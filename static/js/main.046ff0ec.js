/*! For license information please see main.046ff0ec.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,I={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var u=0;u<e.length;u++){var c=s+C(a=e[u],u);l+=N(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,c=s+C(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:I};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)E.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,P(E);else{var t=r(c);null!==t&&O(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,S=!1,T=null,k=-1,x=5,C=-1;function N(){return!(t.unstable_now()-C<x)}function A(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?I():(S=!1,T=null)}}else S=!1}if("function"===typeof w)I=function(){w(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,I=function(){D.postMessage(null)}}else I=function(){v(A,0)};function P(e){T=e,S||(S=!0,I())}function O(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(y(k),k=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(u,e),m||p||(m=!0,P(E))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),x=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,U=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case E:return"Portal";case T:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function W(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(wi){return e.body}}function Q(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&W(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function se(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ie=null,Se=null;function Te(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=Ei(t),Ee(e.stateNode,e.type,t))}}function ke(e){Ie?Se?Se.push(e):Se=[e]:Ie=e}function xe(){if(Ie){var e=Ie,t=Se;if(Se=Ie=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Ie||null!==Se)&&(Ne(),xe())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=Ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(c)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ce){Pe=!1}function Le(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Me=!1,Ue=null,Fe=!1,je=null,Ve={onError:function(e){Me=!0,Ue=e}};function Be(e,t,n,r,i,s,o,a,l){Me=!1,Ue=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(s(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var $e=i.unstable_scheduleCallback,We=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,It,St,Tt,kt=!1,xt=[],Ct=null,Nt=null,At=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ft(e)&&n.delete(t)}function Vt(){kt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==At&&Ft(At)&&(At=null),Rt.forEach(jt),Dt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<xt.length){Bt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,$t(e,t,n,r)}finally{wt=i,qt.transition=s}}function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,$t(e,t,n,r)}finally{wt=i,qt.transition=s}}function $t(e,t,n,r){if(Gt){var i=Qt(e,t,n,r);if(null===i)Gr(e,t,r,Wt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Mt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&_t(s),null===(s=Qt(e,t,n,r))&&Gr(e,t,r,Wt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Wt=null;function Qt(e,t,n,r){if(Wt=null,null!==(e=yi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=U({},un,{view:0,detail:0}),dn=sn(hn),fn=U({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(U({},fn,{dataTransfer:0})),gn=sn(U({},hn,{relatedTarget:0})),vn=sn(U({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(U({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Tn(){return Sn}var kn=U({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=sn(kn),Cn=sn(U({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(U({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(U({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=U({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Rn),Pn=[9,13,27,32],On=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Mn=c&&"TextEvent"in window&&!Ln,Un=c&&(!On||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){ke(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,$n=null;function Wn(e){Fr(e,0)}function Qn(e){if($(_i(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(c){var Xn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),$n=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn($n)){var t=[];Hn(t,$n,e,_e(e)),Re(Wn,t)}}function rr(e,t,n){"focusin"===e?(tr(),$n=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn($n)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=W((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==W(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ir={},Sr={};function Tr(e){if(Ir[e])return Ir[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Ir[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Tr("animationend"),xr=Tr("animationiteration"),Cr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),l(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(kr,"onAnimationEnd"),Dr(xr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(Be.apply(this,arguments),Me){if(!Me)throw Error(s(198));var c=Ue;Me=!1,Ue=null,Fe||(Fe=!0,je=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Ur(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Ur(i,a,u),s=l}}}if(Fe)throw e=je,Fe=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=xn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case kr:case xr:case Cr:l=vn;break;case Nr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=De(p,d))&&c.push(Hr(p,m,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=ze(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:_i(l),f=null==u?a:_i(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=$r(f))p++;for(f=0,m=d;m;m=$r(m))f++;for(;0<p-f;)c=$r(c),p--;for(;0<f-p;)d=$r(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=$r(c),d=$r(d)}c=null}else c=null;null!==l&&Wr(o,a,l,c,!1),null!==u&&null!==h&&Wr(o,h,u,c,!0)}if("select"===(l=(a=r?_i(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(Gn(a))if(Yn)g=or;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?_i(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Un&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(y=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(v=Kr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=Bn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Fn);case"textInput":return(e=t.data)===Fn&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Fr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=De(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function $r(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=De(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=De(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Ei(e){return e[fi]||null}var Ii=[],Si=-1;function Ti(e){return{current:e}}function ki(e){0>Si||(e.current=Ii[Si],Ii[Si]=null,Si--)}function xi(e,t){Si++,Ii[Si]=e.current,e.current=t}var Ci={},Ni=Ti(Ci),Ai=Ti(!1),Ri=Ci;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){ki(Ai),ki(Ni)}function Li(e,t,n){if(Ni.current!==Ci)throw Error(s(168));xi(Ni,t),xi(Ai,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return U({},n,r)}function Ui(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ri=Ni.current,xi(Ni,e),xi(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,ki(Ai),ki(Ni),xi(Ni,e)):ki(Ai),xi(Ai,n)}var ji=null,Vi=!1,Bi=!1;function zi(e){null===ji?ji=[e]:ji.push(e)}function qi(){if(!Bi&&null!==ji){Bi=!0;var e=0,t=wt;try{var n=ji;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Vi=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),$e(Ze,qi),i}finally{wt=t,Bi=!1}}return null}var Gi=[],Hi=0,Ki=null,$i=0,Wi=[],Qi=0,Ji=null,Yi=1,Xi="";function Zi(e,t){Gi[Hi++]=$i,Gi[Hi++]=Ki,Ki=e,$i=t}function es(e,t,n){Wi[Qi++]=Yi,Wi[Qi++]=Xi,Wi[Qi++]=Ji,Ji=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else Yi=1<<s|n<<i|r,Xi=e}function ts(e){null!==e.return&&(Zi(e,1),es(e,1,0))}function ns(e){for(;e===Ki;)Ki=Gi[--Hi],Gi[Hi]=null,$i=Gi[--Hi],Gi[Hi]=null;for(;e===Ji;)Ji=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null}var rs=null,is=null,ss=!1,os=null;function as(e,t){var n=Lu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,is=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,rs=e,is=null,!0);default:return!1}}function us(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(ss){var t=is;if(t){var n=t;if(!ls(e,t)){if(us(e))throw Error(s(418));t=ui(n.nextSibling);var r=rs;t&&ls(e,t)?as(r,n):(e.flags=-4097&e.flags|2,ss=!1,rs=e)}}else{if(us(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,rs=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function ds(e){if(e!==rs)return!1;if(!ss)return hs(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=is)){if(us(e))throw fs(),Error(s(418));for(;t;)as(e,t),t=ui(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=rs?ui(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=is;e;)e=ui(e.nextSibling)}function ps(){is=rs=null,ss=!1}function ms(e){null===os?os=[e]:os.push(e)}var gs=b.ReactCurrentBatchConfig;function vs(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ws=Ti(null),bs=null,_s=null,Es=null;function Is(){Es=_s=bs=null}function Ss(e){var t=ws.current;ki(ws),e._currentValue=t}function Ts(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ks(e,t){bs=e,Es=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ia=!0),e.firstContext=null)}function xs(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===bs)throw Error(s(308));_s=e,bs.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var Cs=null;function Ns(e){null===Cs?Cs=[e]:Cs.push(e)}function As(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ns(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ds=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ms(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Dl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rs(e,n)}return null===(i=r.interleaved)?(t.next=t,Ns(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rs(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function js(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vs(e,t,n,r){var i=e.updateQueue;Ds=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=U({},h,d);break e;case 2:Ds=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Vl|=o,e.lanes=o,e.memoizedState=h}}function Bs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var zs=(new r.Component).refs;function qs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Gs={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=iu(),i=su(e),s=Ls(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ms(e,s,i))&&(ou(t,e,i,r),Us(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=iu(),i=su(e),s=Ls(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ms(e,s,i))&&(ou(t,e,i,r),Us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=iu(),r=su(e),i=Ls(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ms(e,i,r))&&(ou(t,e,r,n),Us(t,e,r))}};function Hs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function Ks(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=xs(s):(i=Pi(t)?Ri:Ni.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Gs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function $s(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Gs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=zs,Ps(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=xs(s):(s=Pi(t)?Ri:Ni.current,i.context=Di(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(qs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Gs.enqueueReplaceState(i,i.state,null),Vs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===zs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Js(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ys(e){return(0,e._init)(e._payload)}function Xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Uu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&Ys(s)===t.type)?((r=i(t,n.props)).ref=Qs(e,t,n),r.return=e,r):((r=Fu(n.type,n.key,n.props,null,e.mode,r)).ref=Qs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=ju(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Fu(t.type,t.key,t.props,null,e.mode,n)).ref=Qs(e,null,t),n.return=e,n;case E:return(t=zu(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=ju(t,e.mode,n,null)).return=e,t;Js(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?u(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Js(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Js(t,r)}return null}function m(i,s,a,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===c?u=v:c.sibling=v,c=v,h=g}if(m===a.length)return n(i,h),ss&&Zi(i,m),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===c?u=h:c.sibling=h,c=h);return ss&&Zi(i,m),u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),ss&&Zi(i,m),u}function g(i,a,l,u){var c=L(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,u);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?c=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),ss&&Zi(i,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,u))&&(a=o(y,a,g),null===h?c=y:h.sibling=y,h=y);return ss&&Zi(i,g),c}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),ss&&Zi(i,g),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===I){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===D&&Ys(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=Qs(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===I?((s=ju(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Fu(o.type,o.key,o.props,null,r.mode,l)).ref=Qs(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=zu(o,r.mode,l)).return=r,r=s}return a(r);case D:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Js(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Bu(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Zs=Xs(!0),eo=Xs(!1),to={},no=Ti(to),ro=Ti(to),io=Ti(to);function so(e){if(e===to)throw Error(s(174));return e}function oo(e,t){switch(xi(io,t),xi(ro,e),xi(no,to),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(no),xi(no,t)}function ao(){ki(no),ki(ro),ki(io)}function lo(e){so(io.current);var t=so(no.current),n=le(t,e.type);t!==n&&(xi(ro,e),xi(no,n))}function uo(e){ro.current===e&&(ki(no),ki(ro))}var co=Ti(0);function ho(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fo=[];function po(){for(var e=0;e<fo.length;e++)fo[e]._workInProgressVersionPrimary=null;fo.length=0}var mo=b.ReactCurrentDispatcher,go=b.ReactCurrentBatchConfig,vo=0,yo=null,wo=null,bo=null,_o=!1,Eo=!1,Io=0,So=0;function To(){throw Error(s(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(vo=o,yo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mo.current=null===e||null===e.memoizedState?ca:ha,e=n(r,i),Eo){o=0;do{if(Eo=!1,Io=0,25<=o)throw Error(s(301));o+=1,bo=wo=null,t.updateQueue=null,mo.current=da,e=n(r,i)}while(Eo)}if(mo.current=ua,t=null!==wo&&null!==wo.next,vo=0,bo=wo=yo=null,_o=!1,t)throw Error(s(300));return e}function Co(){var e=0!==Io;return Io=0,e}function No(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bo?yo.memoizedState=bo=e:bo=bo.next=e,bo}function Ao(){if(null===wo){var e=yo.alternate;e=null!==e?e.memoizedState:null}else e=wo.next;var t=null===bo?yo.memoizedState:bo.next;if(null!==t)bo=t,wo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(wo=e).memoizedState,baseState:wo.baseState,baseQueue:wo.baseQueue,queue:wo.queue,next:null},null===bo?yo.memoizedState=bo=e:bo=bo.next=e}return bo}function Ro(e,t){return"function"===typeof t?t(e):t}function Do(e){var t=Ao(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=wo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((vo&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,yo.lanes|=h,Vl|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(Ia=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,yo.lanes|=o,Vl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=Ao(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(Ia=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Oo(){}function Lo(e,t){var n=yo,r=Ao(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,Ia=!0),r=r.queue,$o(Fo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==bo&&1&bo.memoizedState.tag){if(n.flags|=2048,zo(9,Uo.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&vo)||Mo(n,t,i)}return i}function Mo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=yo.updateQueue)?(t={lastEffect:null,stores:null},yo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Uo(e,t,n,r){t.value=n,t.getSnapshot=r,jo(t)&&Vo(e)}function Fo(e,t,n){return n((function(){jo(t)&&Vo(e)}))}function jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Vo(e){var t=Rs(e,1);null!==t&&ou(t,e,1,-1)}function Bo(e){var t=No();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:e},t.queue=e,e=e.dispatch=sa.bind(null,yo,e),[t.memoizedState,e]}function zo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=yo.updateQueue)?(t={lastEffect:null,stores:null},yo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function qo(){return Ao().memoizedState}function Go(e,t,n,r){var i=No();yo.flags|=e,i.memoizedState=zo(1|t,n,void 0,void 0===r?null:r)}function Ho(e,t,n,r){var i=Ao();r=void 0===r?null:r;var s=void 0;if(null!==wo){var o=wo.memoizedState;if(s=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=zo(t,n,s,r))}yo.flags|=e,i.memoizedState=zo(1|t,n,s,r)}function Ko(e,t){return Go(8390656,8,e,t)}function $o(e,t){return Ho(2048,8,e,t)}function Wo(e,t){return Ho(4,2,e,t)}function Qo(e,t){return Ho(4,4,e,t)}function Jo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Yo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ho(4,4,Jo.bind(null,t,e),n)}function Xo(){}function Zo(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ea(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ta(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,Ia=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),yo.lanes|=n,Vl|=n,e.baseState=!0),t)}function na(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=go.transition;go.transition={};try{e(!1),t()}finally{wt=n,go.transition=r}}function ra(){return Ao().memoizedState}function ia(e,t,n){var r=su(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},oa(e))aa(t,n);else if(null!==(n=As(e,t,n,r))){ou(n,e,r,iu()),la(n,t,r)}}function sa(e,t,n){var r=su(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(oa(e))aa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ns(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=As(e,t,i,r))&&(ou(n,e,r,i=iu()),la(n,t,r))}}function oa(e){var t=e.alternate;return e===yo||null!==t&&t===yo}function aa(e,t){Eo=_o=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function la(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var ua={readContext:xs,useCallback:To,useContext:To,useEffect:To,useImperativeHandle:To,useInsertionEffect:To,useLayoutEffect:To,useMemo:To,useReducer:To,useRef:To,useState:To,useDebugValue:To,useDeferredValue:To,useTransition:To,useMutableSource:To,useSyncExternalStore:To,useId:To,unstable_isNewReconciler:!1},ca={readContext:xs,useCallback:function(e,t){return No().memoizedState=[e,void 0===t?null:t],e},useContext:xs,useEffect:Ko,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Go(4194308,4,Jo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Go(4194308,4,e,t)},useInsertionEffect:function(e,t){return Go(4,2,e,t)},useMemo:function(e,t){var n=No();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=No();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ia.bind(null,yo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},No().memoizedState=e},useState:Bo,useDebugValue:Xo,useDeferredValue:function(e){return No().memoizedState=e},useTransition:function(){var e=Bo(!1),t=e[0];return e=na.bind(null,e[1]),No().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=yo,i=No();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&vo)||Mo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ko(Fo.bind(null,r,o,e),[e]),r.flags|=2048,zo(9,Uo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=No(),t=Pl.identifierPrefix;if(ss){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=Io++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=So++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ha={readContext:xs,useCallback:Zo,useContext:xs,useEffect:$o,useImperativeHandle:Yo,useInsertionEffect:Wo,useLayoutEffect:Qo,useMemo:ea,useReducer:Do,useRef:qo,useState:function(){return Do(Ro)},useDebugValue:Xo,useDeferredValue:function(e){return ta(Ao(),wo.memoizedState,e)},useTransition:function(){return[Do(Ro)[0],Ao().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Lo,useId:ra,unstable_isNewReconciler:!1},da={readContext:xs,useCallback:Zo,useContext:xs,useEffect:$o,useImperativeHandle:Yo,useInsertionEffect:Wo,useLayoutEffect:Qo,useMemo:ea,useReducer:Po,useRef:qo,useState:function(){return Po(Ro)},useDebugValue:Xo,useDeferredValue:function(e){var t=Ao();return null===wo?t.memoizedState=e:ta(t,wo.memoizedState,e)},useTransition:function(){return[Po(Ro)[0],Ao().memoizedState]},useMutableSource:Oo,useSyncExternalStore:Lo,useId:ra,unstable_isNewReconciler:!1};function fa(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function pa(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ma(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ga="function"===typeof WeakMap?WeakMap:Map;function va(e,t,n){(n=Ls(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Ql=r),ma(0,t)},n}function ya(e,t,n){(n=Ls(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ma(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ma(0,t),"function"!==typeof r&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function wa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ga;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Nu.bind(null,e,t,n),t.then(e,e))}function ba(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _a(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ls(-1,1)).tag=2,Ms(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Ea=b.ReactCurrentOwner,Ia=!1;function Sa(e,t,n,r){t.child=null===e?eo(t,null,n,r):Zs(t,e.child,n,r)}function Ta(e,t,n,r,i){n=n.render;var s=t.ref;return ks(t,i),r=xo(e,t,n,r,s,i),n=Co(),null===e||Ia?(ss&&n&&ts(t),t.flags|=1,Sa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function ka(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Mu(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,xa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Uu(s,r)).ref=t.ref,e.return=t,t.child=e}function xa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(Ia=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(Ia=!0)}}return Aa(e,t,n,r,i)}function Ca(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xi(Ul,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xi(Ul,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,xi(Ul,Ml),Ml|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,xi(Ul,Ml),Ml|=r;return Sa(e,t,i,n),t.child}function Na(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,r,i){var s=Pi(n)?Ri:Ni.current;return s=Di(t,s),ks(t,i),n=xo(e,t,n,r,s,i),r=Co(),null===e||Ia?(ss&&r&&ts(t),t.flags|=1,Sa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ra(e,t,n,r,i){if(Pi(n)){var s=!0;Ui(t)}else s=!1;if(ks(t,i),null===t.stateNode)$a(e,t),Ks(t,n,r),Ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=xs(u):u=Di(t,u=Pi(n)?Ri:Ni.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&$s(t,o,r,u),Ds=!1;var d=t.memoizedState;o.state=d,Vs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Ds?("function"===typeof c&&(qs(t,n,c,r),l=t.memoizedState),(a=Ds||Hs(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Os(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:vs(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=xs(l):l=Di(t,l=Pi(n)?Ri:Ni.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&$s(t,o,r,l),Ds=!1,d=t.memoizedState,o.state=d,Vs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Ds?("function"===typeof f&&(qs(t,n,f,r),p=t.memoizedState),(u=Ds||Hs(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Da(e,t,n,r,s,i)}function Da(e,t,n,r,i,s){Na(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wa(e,t,s);r=t.stateNode,Ea.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Zs(t,e.child,null,s),t.child=Zs(t,null,a,s)):Sa(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),oo(e,t.containerInfo)}function Oa(e,t,n,r,i){return ps(),ms(i),t.flags|=256,Sa(e,t,n,r),t.child}var La,Ma,Ua,Fa,ja={dehydrated:null,treeContext:null,retryLane:0};function Va(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,n){var r,i=t.pendingProps,o=co.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),xi(co,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Vu(l,i,0,null),e=ju(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Va(n),t.memoizedState=ja,e):za(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,qa(e,t,a,r=pa(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Vu({mode:"visible",children:r.children},i,0,null),(o=ju(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Zs(t,e.child,null,a),t.child.memoizedState=Va(a),t.memoizedState=ja,o);if(0===(1&t.mode))return qa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,qa(e,t,a,r=pa(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),Ia||l){if(null!==(r=Pl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Rs(e,i),ou(r,e,i,-1))}return wu(),qa(e,t,a,r=pa(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ru.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,is=ui(i.nextSibling),rs=t,ss=!0,os=null,null!==e&&(Wi[Qi++]=Yi,Wi[Qi++]=Xi,Wi[Qi++]=Ji,Yi=e.id,Xi=e.overflow,Ji=t),t=za(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Uu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Uu(r,a):(a=ju(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Va(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=ja,i}return e=(a=e.child).sibling,i=Uu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=Vu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qa(e,t,n,r){return null!==r&&ms(r),Zs(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ga(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ts(e.return,t,n)}function Ha(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ka(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Sa(e,t,r.children,n),0!==(2&(r=co.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ga(e,n,t);else if(19===e.tag)Ga(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xi(co,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ho(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ha(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ho(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ha(t,!0,n,null,s);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $a(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Uu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qa(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ja(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ya(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ja(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Ja(t),null;case 3:return r=t.stateNode,ao(),ki(Ai),ki(Ni),po(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==os&&(cu(os),os=null))),Ma(e,t),Ja(t),null;case 5:uo(t);var i=so(io.current);if(n=t.type,null!==e&&null!=t.stateNode)Ua(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ja(t),null}if(e=so(no.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":J(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,La(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":J(e,r),i=Q(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&jr("scroll",e):null!=c&&w(e,o,c,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ja(t),null;case 6:if(e&&null!=t.stateNode)Fa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=so(io.current),so(no.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=rs))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ja(t),null;case 13:if(ki(co),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ps(),t.flags|=98560,o=!1;else if(o=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ja(t),o=!1}else null!==os&&(cu(os),os=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&co.current)?0===Fl&&(Fl=3):wu())),null!==t.updateQueue&&(t.flags|=4),Ja(t),null);case 4:return ao(),Ma(e,t),null===e&&zr(t.stateNode.containerInfo),Ja(t),null;case 10:return Ss(t.type._context),Ja(t),null;case 19:if(ki(co),null===(o=t.memoizedState))return Ja(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Qa(o,!1);else{if(0!==Fl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ho(e))){for(t.flags|=128,Qa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xi(co,1&co.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Kl&&(t.flags|=128,r=!0,Qa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ho(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ss)return Ja(t),null}else 2*Ye()-o.renderingStartTime>Kl&&1073741824!==n&&(t.flags|=128,r=!0,Qa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=co.current,xi(co,r?1&n|2:1&n),t):(Ja(t),null);case 22:case 23:return mu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(Ja(t),6&t.subtreeFlags&&(t.flags|=8192)):Ja(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xa(e,t){switch(ns(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),ki(Ai),ki(Ni),po(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return uo(t),null;case 13:if(ki(co),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(co),null;case 4:return ao(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return mu(),null;default:return null}}La=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ma=function(){},Ua=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,so(no.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&jr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Fa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Za=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,nl=null;function rl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cu(e,t,r)}else n.current=null}function il(e,t,n){try{n()}catch(r){Cu(e,t,r)}}var sl=!1;function ol(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&il(t,n,s)}i=i.next}while(i!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ll(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cl(e){return 5===e.tag||3===e.tag||4===e.tag}function hl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}var pl=null,ml=!1;function gl(e,t,n){for(n=n.child;null!==n;)vl(e,t,n),n=n.sibling}function vl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:el||rl(n,t);case 6:var r=pl,i=ml;pl=null,gl(e,t,n),ml=i,null!==(pl=r)&&(ml?(e=pl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):pl.removeChild(n.stateNode));break;case 18:null!==pl&&(ml?(e=pl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(pl,n.stateNode));break;case 4:r=pl,i=ml,pl=n.stateNode.containerInfo,ml=!0,gl(e,t,n),pl=r,ml=i;break;case 0:case 11:case 14:case 15:if(!el&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&il(n,t,o),i=i.next}while(i!==r)}gl(e,t,n);break;case 1:if(!el&&(rl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cu(n,t,a)}gl(e,t,n);break;case 21:gl(e,t,n);break;case 22:1&n.mode?(el=(r=el)||null!==n.memoizedState,gl(e,t,n),el=r):gl(e,t,n);break;default:gl(e,t,n)}}function yl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new tl),t.forEach((function(t){var r=Du.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function wl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:pl=l.stateNode,ml=!1;break e;case 3:case 4:pl=l.stateNode.containerInfo,ml=!0;break e}l=l.return}if(null===pl)throw Error(s(160));vl(o,a,i),pl=null,ml=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Cu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bl(t,e),t=t.sibling}function bl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),_l(e),4&r){try{ol(3,e,e.return),al(3,e)}catch(g){Cu(e,e.return,g)}try{ol(5,e,e.return)}catch(g){Cu(e,e.return,g)}}break;case 1:wl(t,e),_l(e),512&r&&null!==n&&rl(n,n.return);break;case 5:if(wl(t,e),_l(e),512&r&&null!==n&&rl(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Cu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(i,o),we(l,a);var c=we(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,c)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Cu(e,e.return,g)}}break;case 6:if(wl(t,e),_l(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Cu(e,e.return,g)}}break;case 3:if(wl(t,e),_l(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Cu(e,e.return,g)}break;case 4:default:wl(t,e),_l(e);break;case 13:wl(t,e),_l(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=Ye())),4&r&&yl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(el=(c=el)||h,wl(t,e),el=c):wl(t,e),_l(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(nl=e,h=e.child;null!==h;){for(d=nl=h;null!==nl;){switch(p=(f=nl).child,f.tag){case 0:case 11:case 14:case 15:ol(4,f,f.return);break;case 1:rl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cu(r,n,g)}}break;case 5:rl(f,f.return);break;case 22:if(null!==f.memoizedState){Tl(d);continue}}null!==p?(p.return=f,nl=p):Tl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",a))}catch(g){Cu(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Cu(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wl(t,e),_l(e),4&r&&yl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(cl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),fl(e,hl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;dl(e,hl(e),o);break;default:throw Error(s(161))}}catch(Fs){Cu(e,e.return,Fs)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function El(e,t,n){nl=e,Il(e,t,n)}function Il(e,t,n){for(var r=0!==(1&e.mode);null!==nl;){var i=nl,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Za;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||el;a=Za;var u=el;if(Za=o,(el=l)&&!u)for(nl=i;null!==nl;)l=(o=nl).child,22===o.tag&&null!==o.memoizedState?kl(i):null!==l?(l.return=o,nl=l):kl(i);for(;null!==s;)nl=s,Il(s,t,n),s=s.sibling;nl=i,Za=a,el=u}Sl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,nl=s):Sl(e)}}function Sl(e){for(;null!==nl;){var t=nl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:el||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!el)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Bs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}el||512&t.flags&&ll(t)}catch(f){Cu(t,t.return,f)}}if(t===e){nl=null;break}if(null!==(n=t.sibling)){n.return=t.return,nl=n;break}nl=t.return}}function Tl(e){for(;null!==nl;){var t=nl;if(t===e){nl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,nl=n;break}nl=t.return}}function kl(e){for(;null!==nl;){var t=nl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(Fs){Cu(t,n,Fs)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Fs){Cu(t,i,Fs)}}var s=t.return;try{ll(t)}catch(Fs){Cu(t,s,Fs)}break;case 5:var o=t.return;try{ll(t)}catch(Fs){Cu(t,o,Fs)}}}catch(Fs){Cu(t,t.return,Fs)}if(t===e){nl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,nl=a;break}nl=t.return}}var xl,Cl=Math.ceil,Nl=b.ReactCurrentDispatcher,Al=b.ReactCurrentOwner,Rl=b.ReactCurrentBatchConfig,Dl=0,Pl=null,Ol=null,Ll=0,Ml=0,Ul=Ti(0),Fl=0,jl=null,Vl=0,Bl=0,zl=0,ql=null,Gl=null,Hl=0,Kl=1/0,$l=null,Wl=!1,Ql=null,Jl=null,Yl=!1,Xl=null,Zl=0,eu=0,tu=null,nu=-1,ru=0;function iu(){return 0!==(6&Dl)?Ye():-1!==nu?nu:nu=Ye()}function su(e){return 0===(1&e.mode)?1:0!==(2&Dl)&&0!==Ll?Ll&-Ll:null!==gs.transition?(0===ru&&(ru=mt()),ru):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function ou(e,t,n,r){if(50<eu)throw eu=0,tu=null,Error(s(185));vt(e,n,r),0!==(2&Dl)&&e===Pl||(e===Pl&&(0===(2&Dl)&&(Bl|=n),4===Fl&&hu(e,Ll)),au(e,r),1===n&&0===Dl&&0===(1&t.mode)&&(Kl=Ye()+500,Vi&&qi()))}function au(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Pl?Ll:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(du.bind(null,e)):zi(du.bind(null,e)),oi((function(){0===(6&Dl)&&qi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pu(n,lu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function lu(e,t){if(nu=-1,ru=0,0!==(6&Dl))throw Error(s(327));var n=e.callbackNode;if(ku()&&e.callbackNode!==n)return null;var r=dt(e,e===Pl?Ll:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=bu(e,r);else{t=r;var i=Dl;Dl|=2;var o=yu();for(Pl===e&&Ll===t||($l=null,Kl=Ye()+500,gu(e,t));;)try{Eu();break}catch(l){vu(e,l)}Is(),Nl.current=o,Dl=i,null!==Ol?t=0:(Pl=null,Ll=0,t=Fl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=uu(e,i))),1===t)throw n=jl,gu(e,0),hu(e,r),au(e,Ye()),n;if(6===t)hu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=bu(e,r))&&(0!==(o=pt(e))&&(r=o,t=uu(e,o))),1===t))throw n=jl,gu(e,0),hu(e,r),au(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Tu(e,Gl,$l);break;case 3:if(hu(e,r),(130023424&r)===r&&10<(t=Hl+500-Ye())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){iu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Tu.bind(null,e,Gl,$l),t);break}Tu(e,Gl,$l);break;case 4:if(hu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(Tu.bind(null,e,Gl,$l),r);break}Tu(e,Gl,$l);break;default:throw Error(s(329))}}}return au(e,Ye()),e.callbackNode===n?lu.bind(null,e):null}function uu(e,t){var n=ql;return e.current.memoizedState.isDehydrated&&(gu(e,t).flags|=256),2!==(e=bu(e,t))&&(t=Gl,Gl=n,null!==t&&cu(t)),e}function cu(e){null===Gl?Gl=e:Gl.push.apply(Gl,e)}function hu(e,t){for(t&=~zl,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function du(e){if(0!==(6&Dl))throw Error(s(327));ku();var t=dt(e,0);if(0===(1&t))return au(e,Ye()),null;var n=bu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=uu(e,r))}if(1===n)throw n=jl,gu(e,0),hu(e,t),au(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tu(e,Gl,$l),au(e,Ye()),null}function fu(e,t){var n=Dl;Dl|=1;try{return e(t)}finally{0===(Dl=n)&&(Kl=Ye()+500,Vi&&qi())}}function pu(e){null!==Xl&&0===Xl.tag&&0===(6&Dl)&&ku();var t=Dl;Dl|=1;var n=Rl.transition,r=wt;try{if(Rl.transition=null,wt=1,e)return e()}finally{wt=r,Rl.transition=n,0===(6&(Dl=t))&&qi()}}function mu(){Ml=Ul.current,ki(Ul)}function gu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ol)for(n=Ol.return;null!==n;){var r=n;switch(ns(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:ao(),ki(Ai),ki(Ni),po();break;case 5:uo(r);break;case 4:ao();break;case 13:case 19:ki(co);break;case 10:Ss(r.type._context);break;case 22:case 23:mu()}n=n.return}if(Pl=e,Ol=e=Uu(e.current,null),Ll=Ml=t,Fl=0,jl=null,zl=Bl=Vl=0,Gl=ql=null,null!==Cs){for(t=0;t<Cs.length;t++)if(null!==(r=(n=Cs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Cs=null}return e}function vu(e,t){for(;;){var n=Ol;try{if(Is(),mo.current=ua,_o){for(var r=yo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}_o=!1}if(vo=0,bo=wo=yo=null,Eo=!1,Io=0,Al.current=null,null===n||null===n.return){Fl=1,jl=t,Ol=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Ll,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ba(a);if(null!==p){p.flags&=-257,_a(p,a,l,0,t),1&p.mode&&wa(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){wa(o,c,t),wu();break e}u=Error(s(426))}else if(ss&&1&l.mode){var v=ba(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),_a(v,a,l,0,t),ms(fa(u,l));break e}}o=u=fa(u,l),4!==Fl&&(Fl=2),null===ql?ql=[o]:ql.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,js(o,va(0,u,t));break e;case 1:l=u;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Jl||!Jl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,js(o,ya(o,l,t));break e}}o=o.return}while(null!==o)}Su(n)}catch(b){t=b,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function yu(){var e=Nl.current;return Nl.current=ua,null===e?ua:e}function wu(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Pl||0===(268435455&Vl)&&0===(268435455&Bl)||hu(Pl,Ll)}function bu(e,t){var n=Dl;Dl|=2;var r=yu();for(Pl===e&&Ll===t||($l=null,gu(e,t));;)try{_u();break}catch(i){vu(e,i)}if(Is(),Dl=n,Nl.current=r,null!==Ol)throw Error(s(261));return Pl=null,Ll=0,Fl}function _u(){for(;null!==Ol;)Iu(Ol)}function Eu(){for(;null!==Ol&&!Qe();)Iu(Ol)}function Iu(e){var t=xl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?Su(e):Ol=t,Al.current=null}function Su(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ya(n,t,Ml)))return void(Ol=n)}else{if(null!==(n=Xa(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Fl=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Fl&&(Fl=5)}function Tu(e,t,n){var r=wt,i=Rl.transition;try{Rl.transition=null,wt=1,function(e,t,n,r){do{ku()}while(null!==Xl);if(0!==(6&Dl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Pl&&(Ol=Pl=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Pu(tt,(function(){return ku(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Rl.transition,Rl.transition=null;var a=wt;wt=1;var l=Dl;Dl|=4,Al.current=null,function(e,t){if(ei=Gt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(ys){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){t=nl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:vs(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(ys){Cu(t,t.return,ys)}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}m=sl,sl=!1}(e,n),bl(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,El(n,e,i),Je(),Dl=l,wt=a,Rl.transition=o}else e.current=n;if(Yl&&(Yl=!1,Xl=e,Zl=i),o=e.pendingLanes,0===o&&(Jl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),au(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Ql,Ql=null,e;0!==(1&Zl)&&0!==e.tag&&ku(),o=e.pendingLanes,0!==(1&o)?e===tu?eu++:(eu=0,tu=e):eu=0,qi()}(e,t,n,r)}finally{Rl.transition=i,wt=r}return null}function ku(){if(null!==Xl){var e=bt(Zl),t=Rl.transition,n=wt;try{if(Rl.transition=null,wt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Zl=0,0!==(6&Dl))throw Error(s(331));var i=Dl;for(Dl|=4,nl=e.current;null!==nl;){var o=nl,a=o.child;if(0!==(16&nl.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(nl=c;null!==nl;){var h=nl;switch(h.tag){case 0:case 11:case 15:ol(8,h,o)}var d=h.child;if(null!==d)d.return=h,nl=d;else for(;null!==nl;){var f=(h=nl).sibling,p=h.return;if(ul(h),h===c){nl=null;break}if(null!==f){f.return=p,nl=f;break}nl=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}nl=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,nl=a;else e:for(;null!==nl;){if(0!==(2048&(o=nl).flags))switch(o.tag){case 0:case 11:case 15:ol(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,nl=y;break e}nl=o.return}}var w=e.current;for(nl=w;null!==nl;){var b=(a=nl).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,nl=b;else e:for(a=w;null!==nl;){if(0!==(2048&(l=nl).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(E){Cu(l,l.return,E)}if(l===a){nl=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,nl=_;break e}nl=l.return}}if(Dl=i,qi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,Rl.transition=t}}return!1}function xu(e,t,n){e=Ms(e,t=va(0,t=fa(n,t),1),1),t=iu(),null!==e&&(vt(e,1,t),au(e,t))}function Cu(e,t,n){if(3===e.tag)xu(e,e,n);else for(;null!==t;){if(3===t.tag){xu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Jl||!Jl.has(r))){t=Ms(t,e=ya(t,e=fa(n,e),1),1),e=iu(),null!==t&&(vt(t,1,e),au(t,e));break}}t=t.return}}function Nu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=iu(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Ll&n)===n&&(4===Fl||3===Fl&&(130023424&Ll)===Ll&&500>Ye()-Hl?gu(e,0):zl|=n),au(e,t)}function Au(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=iu();null!==(e=Rs(e,t))&&(vt(e,t,n),au(e,n))}function Ru(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Au(e,n)}function Du(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Au(e,n)}function Pu(e,t){return $e(e,t)}function Ou(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lu(e,t,n,r){return new Ou(e,t,n,r)}function Mu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uu(e,t){var n=e.alternate;return null===n?((n=Lu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fu(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Mu(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return ju(n.children,i,o,t);case S:a=8,i|=8;break;case T:return(e=Lu(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Lu(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Lu(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Vu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case x:a=9;break e;case C:a=11;break e;case R:a=14;break e;case D:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Lu(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function ju(e,t,n,r){return(e=Lu(7,e,r,t)).lanes=n,e}function Vu(e,t,n,r){return(e=Lu(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Bu(e,t,n){return(e=Lu(6,e,null,t)).lanes=n,e}function zu(e,t,n){return(t=Lu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gu(e,t,n,r,i,s,o,a,l){return e=new qu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Lu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(s),e}function Hu(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Mi(e,n,t)}return t}function Ku(e,t,n,r,i,s,o,a,l){return(e=Gu(n,r,!0,e,0,s,0,a,l)).context=Hu(null),n=e.current,(s=Ls(r=iu(),i=su(n))).callback=void 0!==t&&null!==t?t:null,Ms(n,s,i),e.current.lanes=i,vt(e,i,r),au(e,r),e}function $u(e,t,n,r){var i=t.current,s=iu(),o=su(i);return n=Hu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ls(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ms(i,t,o))&&(ou(e,i,o,s),Us(e,i,o)),o}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ju(e,t){Qu(e,t),(e=e.alternate)&&Qu(e,t)}xl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)Ia=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ia=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),ps();break;case 5:lo(t);break;case 1:Pi(t.type)&&Ui(t);break;case 4:oo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xi(ws,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xi(co,1&co.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(xi(co,1&co.current),null!==(e=Wa(e,t,n))?e.sibling:null);xi(co,1&co.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ka(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(co,co.current),r)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Wa(e,t,n)}(e,t,n);Ia=0!==(131072&e.flags)}else Ia=!1,ss&&0!==(1048576&t.flags)&&es(t,$i,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$a(e,t),e=t.pendingProps;var i=Di(t,Ni.current);ks(t,n),i=xo(null,t,r,e,i,n);var o=Co();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Ui(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ps(t),i.updater=Gs,t.stateNode=i,i._reactInternals=t,Ws(t,r,e,n),t=Da(null,t,r,!0,o,n)):(t.tag=0,ss&&o&&ts(t),Sa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($a(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Mu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=vs(r,e),i){case 0:t=Aa(null,t,r,e,n);break e;case 1:t=Ra(null,t,r,e,n);break e;case 11:t=Ta(null,t,r,e,n);break e;case 14:t=ka(null,t,r,vs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:vs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ra(e,t,r,i=t.elementType===r?i:vs(r,i),n);case 3:e:{if(Pa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Os(e,t),Vs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Oa(e,t,r,n,i=fa(Error(s(423)),t));break e}if(r!==i){t=Oa(e,t,r,n,i=fa(Error(s(424)),t));break e}for(is=ui(t.stateNode.containerInfo.firstChild),rs=t,ss=!0,os=null,n=eo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Wa(e,t,n);break e}Sa(e,t,r,n)}t=t.child}return t;case 5:return lo(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Na(e,t),Sa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ba(e,t,n);case 4:return oo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zs(t,null,r,n):Sa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:vs(r,i),n);case 7:return Sa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Sa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,xi(ws,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Ls(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ts(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ts(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Sa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ks(t,n),r=r(i=xs(i)),t.flags|=1,Sa(e,t,r,n),t.child;case 14:return i=vs(r=t.type,t.pendingProps),ka(e,t,r,i=vs(r.type,i),n);case 15:return xa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vs(r,i),$a(e,t),t.tag=1,Pi(r)?(e=!0,Ui(t)):e=!1,ks(t,n),Ks(t,r,i),Ws(t,r,i,n),Da(null,t,r,!0,e,n);case 19:return Ka(e,t,n);case 22:return Ca(e,t,n)}throw Error(s(156,t.tag))};var Yu="function"===typeof reportError?reportError:function(e){console.error(e)};function Xu(e){this._internalRoot=e}function Zu(e){this._internalRoot=e}function ec(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function tc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function nc(){}function rc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wu(o);a.call(e)}}$u(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wu(o);s.call(e)}}var o=Ku(t,r,e,0,null,!1,0,"",nc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),pu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wu(l);a.call(e)}}var l=Gu(e,0,!1,null,0,!1,0,"",nc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),pu((function(){$u(t,l,n,r)})),l}(n,t,e,i,r);return Wu(o)}Zu.prototype.render=Xu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$u(e,t,null,null)},Zu.prototype.unmount=Xu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pu((function(){$u(null,e,null,null)})),t[pi]=null}},Zu.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ut(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),au(t,Ye()),0===(6&Dl)&&(Kl=Ye()+500,qi()))}break;case 13:pu((function(){var t=Rs(e,1);if(null!==t){var n=iu();ou(t,e,1,n)}})),Ju(e,1)}},Et=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)ou(t,e,134217728,iu());Ju(e,134217728)}},It=function(e){if(13===e.tag){var t=su(e),n=Rs(e,t);if(null!==n)ou(n,e,t,iu());Ju(e,t)}},St=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ei(r);if(!i)throw Error(s(90));$(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=fu,Ne=pu;var ic={usingClientEntryPoint:!1,Events:[bi,_i,Ei,ke,xe,fu]},sc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},oc={bundleType:sc.bundleType,version:sc.version,rendererPackageName:sc.rendererPackageName,rendererConfig:sc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:sc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{it=ac.inject(oc),st=ac}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ic,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ec(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!ec(e))throw Error(s(299));var n=!1,r="",i=Yu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Gu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Xu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return pu(e)},t.hydrate=function(e,t,n){if(!tc(t))throw Error(s(200));return rc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!ec(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Yu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Ku(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Zu(t)},t.render=function(e,t,n){if(!tc(t))throw Error(s(200));return rc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!tc(e))throw Error(s(40));return!!e._reactRootContainer&&(pu((function(){rc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=fu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!tc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return rc(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Cedre/";var r={};n.r(r),n.d(r,{FirebaseError:()=>Zt,SDK_VERSION:()=>Dr,_DEFAULT_ENTRY_NAME:()=>gr,_addComponent:()=>_r,_addOrOverwriteComponent:()=>Er,_apps:()=>yr,_clearComponents:()=>Cr,_components:()=>br,_getProvider:()=>Sr,_isFirebaseApp:()=>kr,_isFirebaseServerApp:()=>xr,_registerComponent:()=>Ir,_removeServiceInstance:()=>Tr,_serverApps:()=>wr,deleteApp:()=>Ur,getApp:()=>Lr,getApps:()=>Mr,initializeApp:()=>Pr,initializeServerApp:()=>Or,onLog:()=>jr,registerVersion:()=>Fr,setLogLevel:()=>Vr});var i,s=n(43),o=n.t(s,2),a=n(391),l=n(950),u=n.t(l,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const h="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function f(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?v(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function v(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,l=i.Pop,u=null,f=v();function v(){return(a.state||{idx:null}).idx}function y(){l=i.Pop;let e=v(),t=null==e?null:e-f;f=e,u&&u({action:l,location:b.location,delta:t})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,a.replaceState(c({},a.state,{idx:f}),""));let b={get action(){return l},get location(){return e(s,a)},listen(e){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(h,y),u=e,()=>{s.removeEventListener(h,y),u=null}},createHref:e=>t(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=i.Push;let r=m(b.location,e,t);n&&n(r,e),f=v()+1;let c=p(r,f),h=b.createHref(r);try{a.pushState(c,"",h)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;s.location.assign(h)}o&&u&&u({action:l,location:b.location,delta:1})},replace:function(e,t){l=i.Replace;let r=m(b.location,e,t);n&&n(r,e),f=v();let s=p(r,f),c=b.createHref(r);a.replaceState(s,"",c),o&&u&&u({action:l,location:b.location,delta:0})},go:e=>a.go(e)};return b}var w;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));const b=new Set(["lazy","caseSensitive","path","id","index","children"]);function _(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e.map(((e,i)=>{let s=[...n,i],o="string"===typeof e.id?e.id:s.join("-");if(d(!0!==e.index||!e.children,"Cannot specify children on an index route"),d(!r[o],'Found a route id collision on id "'+o+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let n=c({},e,t(e),{id:o});return r[o]=n,n}{let n=c({},e,t(e),{id:o,children:void 0});return r[o]=n,e.children&&(n.children=_(e.children,t,s,r)),n}}))}function E(e,t,n){void 0===n&&(n="/");let r=M(("string"===typeof t?v(t):t).pathname||"/",n);if(null==r)return null;let i=I(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=L(r);s=P(i[o],e)}return s}function I(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(d(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=B([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),I(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:D(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of S(e.path))i(e,t,r);else i(e,t)})),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=S(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const T=/^:[\w-]+$/,k=3,x=2,C=1,N=10,A=-2,R=e=>"*"===e;function D(e,t){let n=e.split("/"),r=n.length;return n.some(R)&&(r+=A),t&&(r+=x),n.filter((e=>!R(e))).reduce(((e,t)=>e+(T.test(t)?k:""===t?C:N)),r)}function P(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!u)return null;Object.assign(r,u.params);let c=e.route;s.push({params:r,pathname:B([i,u.pathname]),pathnameBase:z(B([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=B([i,u.pathnameBase]))}return s}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);f("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function L(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return f(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function U(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function j(e,t){let n=F(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function V(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=v(e):(i=c({},e),d(!i.pathname||!i.pathname.includes("?"),U("?","pathname","search",i)),d(!i.pathname||!i.pathname.includes("#"),U("#","pathname","hash",i)),d(!i.search||!i.search.includes("#"),U("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?v(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:q(r),hash:G(i)}}(i,s),u=a&&"/"!==a&&a.endsWith("/"),h=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const B=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",G=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;class H{constructor(e,t,n,r){void 0===r&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function K(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const $=["post","put","patch","delete"],W=new Set($),Q=["get",...$],J=new Set(Q),Y=new Set([301,302,303,307,308]),X=new Set([307,308]),Z={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ee={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},te={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,re=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),ie="remix-router-transitions";function se(e){const t=e.window?e.window:"undefined"!==typeof window?window:void 0,n="undefined"!==typeof t&&"undefined"!==typeof t.document&&"undefined"!==typeof t.document.createElement,r=!n;let s;if(d(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let t=e.detectErrorBoundary;s=e=>({hasErrorBoundary:t(e)})}else s=re;let o,a,l={},u=_(e.routes,s,void 0,l),h=e.basename||"/",p=c({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),g=null,v=new Set,y=null,b=null,I=null,S=null!=e.hydrationData,T=E(u,e.history.location,h),k=null;if(null==T){let t=Ee(404,{pathname:e.history.location.pathname}),{matches:n,route:r}=_e(u);T=n,k={[r.id]:t}}let x,C=T.some((e=>e.route.lazy)),N=T.some((e=>e.route.loader));if(C)a=!1;else if(N)if(p.v7_partialHydration){let t=e.hydrationData?e.hydrationData.loaderData:null,n=e.hydrationData?e.hydrationData.errors:null,r=e=>!e.route.loader||!0!==e.route.loader.hydrate&&(t&&void 0!==t[e.route.id]||n&&void 0!==n[e.route.id]);if(n){let e=T.findIndex((e=>void 0!==n[e.route.id]));a=T.slice(0,e+1).every(r)}else a=T.every(r)}else a=null!=e.hydrationData;else a=!0;let A,R={historyAction:e.history.action,location:e.history.location,matches:T,initialized:a,navigation:Z,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||k,fetchers:new Map,blockers:new Map},D=i.Pop,P=!1,O=!1,L=new Map,U=null,F=!1,j=!1,V=[],B=[],z=new Map,q=0,G=-1,H=new Map,K=new Set,$=new Map,W=new Map,Q=new Set,J=new Map,Y=new Map,se=!1;function le(e,t){void 0===t&&(t={}),R=c({},R,e);let n=[],r=[];p.v7_fetcherPersist&&R.fetchers.forEach(((e,t)=>{"idle"===e.state&&(Q.has(t)?r.push(t):n.push(t))})),[...v].forEach((e=>e(R,{deletedFetchers:r,unstable_viewTransitionOpts:t.viewTransitionOpts,unstable_flushSync:!0===t.flushSync}))),p.v7_fetcherPersist&&(n.forEach((e=>R.fetchers.delete(e))),r.forEach((e=>Ne(e))))}function ce(t,n,r){var s,a;let l,{flushSync:h}=void 0===r?{}:r,d=null!=R.actionData&&null!=R.navigation.formMethod&&Ae(R.navigation.formMethod)&&"loading"===R.navigation.state&&!0!==(null==(s=t.state)?void 0:s._isRedirect);l=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:d?R.actionData:null;let f=n.loaderData?we(R.loaderData,n.loaderData,n.matches||[],n.errors):R.loaderData,p=R.blockers;p.size>0&&(p=new Map(p),p.forEach(((e,t)=>p.set(t,te))));let m,g=!0===P||null!=R.navigation.formMethod&&Ae(R.navigation.formMethod)&&!0!==(null==(a=t.state)?void 0:a._isRedirect);if(o&&(u=o,o=void 0),F||D===i.Pop||(D===i.Push?e.history.push(t,t.state):D===i.Replace&&e.history.replace(t,t.state)),D===i.Pop){let e=L.get(R.location.pathname);e&&e.has(t.pathname)?m={currentLocation:R.location,nextLocation:t}:L.has(t.pathname)&&(m={currentLocation:t,nextLocation:R.location})}else if(O){let e=L.get(R.location.pathname);e?e.add(t.pathname):(e=new Set([t.pathname]),L.set(R.location.pathname,e)),m={currentLocation:R.location,nextLocation:t}}le(c({},n,{actionData:l,loaderData:f,historyAction:D,location:t,initialized:!0,navigation:Z,revalidation:"idle",restoreScrollPosition:$e(t,n.matches||R.matches),preventScrollReset:g,blockers:p}),{viewTransitionOpts:m,flushSync:!0===h}),D=i.Pop,P=!1,O=!1,F=!1,j=!1,V=[],B=[]}async function he(t,n,r){A&&A.abort(),A=null,D=t,F=!0===(r&&r.startUninterruptedRevalidation),function(e,t){if(y&&I){let n=Ke(e,t);y[n]=I()}}(R.location,R.matches),P=!0===(r&&r.preventScrollReset),O=!0===(r&&r.enableViewTransition);let a=o||u,d=r&&r.overrideNavigation,f=E(a,n,h),m=!0===(r&&r.flushSync);if(!f){let e=Ee(404,{pathname:n.pathname}),{matches:t,route:r}=_e(a);return He(),void ce(n,{matches:t,loaderData:{},errors:{[r.id]:e}},{flushSync:m})}if(R.initialized&&!j&&function(e,t){if(e.pathname!==t.pathname||e.search!==t.search)return!1;if(""===e.hash)return""!==t.hash;if(e.hash===t.hash)return!0;if(""!==t.hash)return!0;return!1}(R.location,n)&&!(r&&r.submission&&Ae(r.submission.formMethod)))return void ce(n,{matches:f},{flushSync:m});A=new AbortController;let g,v,b=pe(e.history,n,A.signal,r&&r.submission);if(r&&r.pendingError)v={[be(f).route.id]:r.pendingError};else if(r&&r.submission&&Ae(r.submission.formMethod)){let e=await async function(e,t,n,r,o){void 0===o&&(o={});ge();let a,u=function(e,t){let n={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return n}(t,n);le({navigation:u},{flushSync:!0===o.flushSync});let c=Oe(r,t);if(c.route.action||c.route.lazy){if(a=await fe("action",e,c,r,l,s,h,p.v7_relativeSplatPath),e.signal.aborted)return{shortCircuited:!0}}else a={type:w.error,error:Ee(405,{method:e.method,pathname:t.pathname,routeId:c.route.id})};if(xe(a)){let e;return e=o&&null!=o.replace?o.replace:a.location===R.location.pathname+R.location.search,await de(R,a,{submission:n,replace:e}),{shortCircuited:!0}}if(ke(a)){let e=be(r,c.route.id);return!0!==(o&&o.replace)&&(D=i.Push),{pendingActionData:{},pendingActionError:{[e.route.id]:a.error}}}if(Te(a))throw Ee(400,{type:"defer-action"});return{pendingActionData:{[c.route.id]:a.data}}}(b,n,r.submission,f,{replace:r.replace,flushSync:m});if(e.shortCircuited)return;g=e.pendingActionData,v=e.pendingActionError,d=Me(n,r.submission),m=!1,b=new Request(b.url,{signal:b.signal})}let{shortCircuited:_,loaderData:S,errors:T}=await async function(t,n,r,i,s,a,l,d,f,m,g){let v=i||Me(n,s),y=s||a||Le(v),w=o||u,[b,_]=ue(e.history,R,r,y,n,p.v7_partialHydration&&!0===d,j,V,B,Q,$,K,w,h,m,g);if(He((e=>!(r&&r.some((t=>t.route.id===e)))||b&&b.some((t=>t.route.id===e)))),G=++q,0===b.length&&0===_.length){let e=Ve();return ce(n,c({matches:r,loaderData:{},errors:g||null},m?{actionData:m}:{},e?{fetchers:new Map(R.fetchers)}:{}),{flushSync:f}),{shortCircuited:!0}}if(!F&&(!p.v7_partialHydration||!d)){_.forEach((e=>{let t=R.fetchers.get(e.key),n=Ue(void 0,t?t.data:void 0);R.fetchers.set(e.key,n)}));let e=m||R.actionData;le(c({navigation:v},e?0===Object.keys(e).length?{actionData:null}:{actionData:e}:{},_.length>0?{fetchers:new Map(R.fetchers)}:{}),{flushSync:f})}_.forEach((e=>{z.has(e.key)&&Pe(e.key),e.controller&&z.set(e.key,e.controller)}));let E=()=>_.forEach((e=>Pe(e.key)));A&&A.signal.addEventListener("abort",E);let{results:I,loaderResults:S,fetcherResults:T}=await me(R.matches,r,b,_,t);if(t.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",E);_.forEach((e=>z.delete(e.key)));let k=Ie(I);if(k){if(k.idx>=b.length){let e=_[k.idx-b.length].key;K.add(e)}return await de(R,k.result,{replace:l}),{shortCircuited:!0}}let{loaderData:x,errors:C}=ye(R,r,b,S,g,_,T,J);J.forEach(((e,t)=>{e.subscribe((n=>{(n||e.done)&&J.delete(t)}))})),p.v7_partialHydration&&d&&R.errors&&Object.entries(R.errors).filter((e=>{let[t]=e;return!b.some((e=>e.route.id===t))})).forEach((e=>{let[t,n]=e;C=Object.assign(C||{},{[t]:n})}));let N=Ve(),D=Be(G),P=N||D||_.length>0;return c({loaderData:x,errors:C},P?{fetchers:new Map(R.fetchers)}:{})}(b,n,f,d,r&&r.submission,r&&r.fetcherSubmission,r&&r.replace,r&&!0===r.initialHydration,m,g,v);_||(A=null,ce(n,c({matches:f},g?{actionData:g}:{},{loaderData:S,errors:T})))}async function de(r,s,o){let{submission:a,fetcherSubmission:l,replace:u}=void 0===o?{}:o;s.revalidate&&(j=!0);let f=m(r.location,s.location,{_isRedirect:!0});if(d(f,"Expected a location on the redirect navigation"),n){let n=!1;if(s.reloadDocument)n=!0;else if(ne.test(s.location)){const r=e.history.createURL(s.location);n=r.origin!==t.location.origin||null==M(r.pathname,h)}if(n)return void(u?t.location.replace(s.location):t.location.assign(s.location))}A=null;let p=!0===u?i.Replace:i.Push,{formMethod:g,formAction:v,formEncType:y}=r.navigation;!a&&!l&&g&&v&&y&&(a=Le(r.navigation));let w=a||l;if(X.has(s.status)&&w&&Ae(w.formMethod))await he(p,f,{submission:c({},w,{formAction:s.location}),preventScrollReset:P});else{let e=Me(f,a);await he(p,f,{overrideNavigation:e,fetcherSubmission:l,preventScrollReset:P})}}async function me(t,n,r,i,o){let a=await Promise.all([...r.map((e=>fe("loader",o,e,n,l,s,h,p.v7_relativeSplatPath))),...i.map((t=>{if(t.matches&&t.match&&t.controller)return fe("loader",pe(e.history,t.path,t.controller.signal),t.match,t.matches,l,s,h,p.v7_relativeSplatPath);return{type:w.error,error:Ee(404,{pathname:t.path})}}))]),u=a.slice(0,r.length),c=a.slice(r.length);return await Promise.all([Re(t,r,u,u.map((()=>o.signal)),!1,R.loaderData),Re(t,i.map((e=>e.match)),c,i.map((e=>e.controller?e.controller.signal:null)),!0)]),{results:a,loaderResults:u,fetcherResults:c}}function ge(){j=!0,V.push(...He()),$.forEach(((e,t)=>{z.has(t)&&(B.push(t),Pe(t))}))}function ve(e,t,n){void 0===n&&(n={}),R.fetchers.set(e,t),le({fetchers:new Map(R.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function Se(e,t,n,r){void 0===r&&(r={});let i=be(R.matches,t);Ne(e),le({errors:{[i.route.id]:n},fetchers:new Map(R.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function Ce(e){return p.v7_fetcherPersist&&(W.set(e,(W.get(e)||0)+1),Q.has(e)&&Q.delete(e)),R.fetchers.get(e)||ee}function Ne(e){let t=R.fetchers.get(e);!z.has(e)||t&&"loading"===t.state&&H.has(e)||Pe(e),$.delete(e),H.delete(e),K.delete(e),Q.delete(e),R.fetchers.delete(e)}function Pe(e){let t=z.get(e);d(t,"Expected fetch controller: "+e),t.abort(),z.delete(e)}function je(e){for(let t of e){let e=Fe(Ce(t).data);R.fetchers.set(t,e)}}function Ve(){let e=[],t=!1;for(let n of K){let r=R.fetchers.get(n);d(r,"Expected fetcher: "+n),"loading"===r.state&&(K.delete(n),e.push(n),t=!0)}return je(e),t}function Be(e){let t=[];for(let[n,r]of H)if(r<e){let e=R.fetchers.get(n);d(e,"Expected fetcher: "+n),"loading"===e.state&&(Pe(n),H.delete(n),t.push(n))}return je(t),t.length>0}function ze(e){R.blockers.delete(e),Y.delete(e)}function qe(e,t){let n=R.blockers.get(e)||te;d("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state);let r=new Map(R.blockers);r.set(e,t),le({blockers:r})}function Ge(e){let{currentLocation:t,nextLocation:n,historyAction:r}=e;if(0===Y.size)return;Y.size>1&&f(!1,"A router only supports one blocker at a time");let i=Array.from(Y.entries()),[s,o]=i[i.length-1],a=R.blockers.get(s);return a&&"proceeding"===a.state?void 0:o({currentLocation:t,nextLocation:n,historyAction:r})?s:void 0}function He(e){let t=[];return J.forEach(((n,r)=>{e&&!e(r)||(n.cancel(),t.push(r),J.delete(r))})),t}function Ke(e,t){if(b){return b(e,t.map((e=>function(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}(e,R.loaderData))))||e.key}return e.key}function $e(e,t){if(y){let n=Ke(e,t),r=y[n];if("number"===typeof r)return r}return null}return x={get basename(){return h},get future(){return p},get state(){return R},get routes(){return u},get window(){return t},initialize:function(){if(g=e.history.listen((t=>{let{action:n,location:r,delta:i}=t;if(se)return void(se=!1);f(0===Y.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let s=Ge({currentLocation:R.location,nextLocation:r,historyAction:n});return s&&null!=i?(se=!0,e.history.go(-1*i),void qe(s,{state:"blocked",location:r,proceed(){qe(s,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(i)},reset(){let e=new Map(R.blockers);e.set(s,te),le({blockers:e})}})):he(n,r)})),n){!function(e,t){try{let n=e.sessionStorage.getItem(ie);if(n){let e=JSON.parse(n);for(let[n,r]of Object.entries(e||{}))r&&Array.isArray(r)&&t.set(n,new Set(r||[]))}}catch(n){}}(t,L);let e=()=>function(e,t){if(t.size>0){let r={};for(let[e,n]of t)r[e]=[...n];try{e.sessionStorage.setItem(ie,JSON.stringify(r))}catch(n){f(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}(t,L);t.addEventListener("pagehide",e),U=()=>t.removeEventListener("pagehide",e)}return R.initialized||he(i.Pop,R.location,{initialHydration:!0}),x},subscribe:function(e){return v.add(e),()=>v.delete(e)},enableScrollRestoration:function(e,t,n){if(y=e,I=t,b=n||null,!S&&R.navigation===Z){S=!0;let e=$e(R.location,R.matches);null!=e&&le({restoreScrollPosition:e})}return()=>{y=null,I=null,b=null}},navigate:async function t(n,r){if("number"===typeof n)return void e.history.go(n);let s=oe(R.location,R.matches,h,p.v7_prependBasename,n,p.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),{path:o,submission:a,error:l}=ae(p.v7_normalizeFormMethod,!1,s,r),u=R.location,d=m(R.location,o,r&&r.state);d=c({},d,e.history.encodeLocation(d));let f=r&&null!=r.replace?r.replace:void 0,g=i.Push;!0===f?g=i.Replace:!1===f||null!=a&&Ae(a.formMethod)&&a.formAction===R.location.pathname+R.location.search&&(g=i.Replace);let v=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,y=!0===(r&&r.unstable_flushSync),w=Ge({currentLocation:u,nextLocation:d,historyAction:g});if(!w)return await he(g,d,{submission:a,pendingError:l,preventScrollReset:v,replace:r&&r.replace,enableViewTransition:r&&r.unstable_viewTransition,flushSync:y});qe(w,{state:"blocked",location:d,proceed(){qe(w,{state:"proceeding",proceed:void 0,reset:void 0,location:d}),t(n,r)},reset(){let e=new Map(R.blockers);e.set(w,te),le({blockers:e})}})},fetch:function(t,n,i,a){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");z.has(t)&&Pe(t);let c=!0===(a&&a.unstable_flushSync),f=o||u,m=oe(R.location,R.matches,h,p.v7_prependBasename,i,p.v7_relativeSplatPath,n,null==a?void 0:a.relative),g=E(f,m,h);if(!g)return void Se(t,n,Ee(404,{pathname:m}),{flushSync:c});let{path:v,submission:y,error:w}=ae(p.v7_normalizeFormMethod,!0,m,a);if(w)return void Se(t,n,w,{flushSync:c});let b=Oe(g,v);P=!0===(a&&a.preventScrollReset),y&&Ae(y.formMethod)?async function(t,n,r,i,a,c,f){if(ge(),$.delete(t),!i.route.action&&!i.route.lazy){let e=Ee(405,{method:f.formMethod,pathname:r,routeId:n});return void Se(t,n,e,{flushSync:c})}let m=R.fetchers.get(t);ve(t,function(e,t){let n={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return n}(f,m),{flushSync:c});let g=new AbortController,v=pe(e.history,r,g.signal,f);z.set(t,g);let y=q,w=await fe("action",v,i,a,l,s,h,p.v7_relativeSplatPath);if(v.signal.aborted)return void(z.get(t)===g&&z.delete(t));if(p.v7_fetcherPersist&&Q.has(t)){if(xe(w)||ke(w))return void ve(t,Fe(void 0))}else{if(xe(w))return z.delete(t),G>y?void ve(t,Fe(void 0)):(K.add(t),ve(t,Ue(f)),de(R,w,{fetcherSubmission:f}));if(ke(w))return void Se(t,n,w.error)}if(Te(w))throw Ee(400,{type:"defer-action"});let b=R.navigation.location||R.location,_=pe(e.history,b,g.signal),I=o||u,S="idle"!==R.navigation.state?E(I,R.navigation.location,h):R.matches;d(S,"Didn't find any matches after fetcher action");let T=++q;H.set(t,T);let k=Ue(f,w.data);R.fetchers.set(t,k);let[x,C]=ue(e.history,R,S,f,b,!1,j,V,B,Q,$,K,I,h,{[i.route.id]:w.data},void 0);C.filter((e=>e.key!==t)).forEach((e=>{let t=e.key,n=R.fetchers.get(t),r=Ue(void 0,n?n.data:void 0);R.fetchers.set(t,r),z.has(t)&&Pe(t),e.controller&&z.set(t,e.controller)})),le({fetchers:new Map(R.fetchers)});let N=()=>C.forEach((e=>Pe(e.key)));g.signal.addEventListener("abort",N);let{results:P,loaderResults:O,fetcherResults:L}=await me(R.matches,S,x,C,_);if(g.signal.aborted)return;g.signal.removeEventListener("abort",N),H.delete(t),z.delete(t),C.forEach((e=>z.delete(e.key)));let M=Ie(P);if(M){if(M.idx>=x.length){let e=C[M.idx-x.length].key;K.add(e)}return de(R,M.result)}let{loaderData:U,errors:F}=ye(R,R.matches,x,O,void 0,C,L,J);if(R.fetchers.has(t)){let e=Fe(w.data);R.fetchers.set(t,e)}Be(T),"loading"===R.navigation.state&&T>G?(d(D,"Expected pending action"),A&&A.abort(),ce(R.navigation.location,{matches:S,loaderData:U,errors:F,fetchers:new Map(R.fetchers)})):(le({errors:F,loaderData:we(R.loaderData,U,S,F),fetchers:new Map(R.fetchers)}),j=!1)}(t,n,v,b,g,c,y):($.set(t,{routeId:n,path:v}),async function(t,n,r,i,o,a,u){let c=R.fetchers.get(t);ve(t,Ue(u,c?c.data:void 0),{flushSync:a});let f=new AbortController,m=pe(e.history,r,f.signal);z.set(t,f);let g=q,v=await fe("loader",m,i,o,l,s,h,p.v7_relativeSplatPath);Te(v)&&(v=await De(v,m.signal,!0)||v);z.get(t)===f&&z.delete(t);if(m.signal.aborted)return;if(Q.has(t))return void ve(t,Fe(void 0));if(xe(v))return G>g?void ve(t,Fe(void 0)):(K.add(t),void await de(R,v));if(ke(v))return void Se(t,n,v.error);d(!Te(v),"Unhandled fetcher deferred data"),ve(t,Fe(v.data))}(t,n,v,b,g,c,y))},revalidate:function(){ge(),le({revalidation:"loading"}),"submitting"!==R.navigation.state&&("idle"!==R.navigation.state?he(D||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation}):he(R.historyAction,R.location,{startUninterruptedRevalidation:!0}))},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:Ce,deleteFetcher:function(e){if(p.v7_fetcherPersist){let t=(W.get(e)||0)-1;t<=0?(W.delete(e),Q.add(e)):W.set(e,t)}else Ne(e);le({fetchers:new Map(R.fetchers)})},dispose:function(){g&&g(),U&&U(),v.clear(),A&&A.abort(),R.fetchers.forEach(((e,t)=>Ne(t))),R.blockers.forEach(((e,t)=>ze(t)))},getBlocker:function(e,t){let n=R.blockers.get(e)||te;return Y.get(e)!==t&&Y.set(e,t),n},deleteBlocker:ze,_internalFetchControllers:z,_internalActiveDeferreds:J,_internalSetRoutes:function(e){l={},o=_(e,s,void 0,l)}},x}Symbol("deferred");function oe(e,t,n,r,i,s,o,a){let l,u;if(o){l=[];for(let e of t)if(l.push(e),e.route.id===o){u=e;break}}else l=t,u=t[t.length-1];let c=V(i||".",j(l,s),M(e.pathname,n)||e.pathname,"path"===a);return null==i&&(c.search=e.search,c.hash=e.hash),null!=i&&""!==i&&"."!==i||!u||!u.route.index||Pe(c.search)||(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==n&&(c.pathname="/"===c.pathname?n:B([n,c.pathname])),g(c)}function ae(e,t,n,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:n};if(r.formMethod&&!Ne(r.formMethod))return{path:n,error:Ee(405,{method:r.formMethod})};let i,s,o=()=>({path:n,error:Ee(400,{type:"invalid-body"})}),a=r.formMethod||"get",l=e?a.toUpperCase():a.toLowerCase(),u=Se(n);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!Ae(l))return o();let e="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce(((e,t)=>{let[n,r]=t;return""+e+n+"="+r+"\n"}),""):String(r.body);return{path:n,submission:{formMethod:l,formAction:u,formEncType:r.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===r.formEncType){if(!Ae(l))return o();try{let e="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:l,formAction:u,formEncType:r.formEncType,formData:void 0,json:e,text:void 0}}}catch(f){return o()}}}if(d("function"===typeof FormData,"FormData is not available in this environment"),r.formData)i=me(r.formData),s=r.formData;else if(r.body instanceof FormData)i=me(r.body),s=r.body;else if(r.body instanceof URLSearchParams)i=r.body,s=ge(i);else if(null==r.body)i=new URLSearchParams,s=new FormData;else try{i=new URLSearchParams(r.body),s=ge(i)}catch(f){return o()}let c={formMethod:l,formAction:u,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:s,json:void 0,text:void 0};if(Ae(c.formMethod))return{path:n,submission:c};let h=v(n);return t&&h.search&&Pe(h.search)&&i.append("index",""),h.search="?"+i,{path:g(h),submission:c}}function le(e,t){let n=e;if(t){let r=e.findIndex((e=>e.route.id===t));r>=0&&(n=e.slice(0,r))}return n}function ue(e,t,n,r,i,s,o,a,l,u,h,d,f,p,m,g){let v=g?Object.values(g)[0]:m?Object.values(m)[0]:void 0,y=e.createURL(t.location),w=e.createURL(i),b=g?Object.keys(g)[0]:void 0,_=le(n,b).filter(((e,n)=>{let{route:i}=e;if(i.lazy)return!0;if(null==i.loader)return!1;if(s)return!!i.loader.hydrate||void 0===t.loaderData[i.id]&&(!t.errors||void 0===t.errors[i.id]);if(function(e,t,n){let r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(t.loaderData,t.matches[n],e)||a.some((t=>t===e.route.id)))return!0;let l=t.matches[n],u=e;return he(e,c({currentUrl:y,currentParams:l.params,nextUrl:w,nextParams:u.params},r,{actionResult:v,defaultShouldRevalidate:o||y.pathname+y.search===w.pathname+w.search||y.search!==w.search||ce(l,u)}))})),I=[];return h.forEach(((e,i)=>{if(s||!n.some((t=>t.route.id===e.routeId))||u.has(i))return;let a=E(f,e.path,p);if(!a)return void I.push({key:i,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let h=t.fetchers.get(i),m=Oe(a,e.path),g=!1;g=!d.has(i)&&(!!l.includes(i)||(h&&"idle"!==h.state&&void 0===h.data?o:he(m,c({currentUrl:y,currentParams:t.matches[t.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:v,defaultShouldRevalidate:o})))),g&&I.push({key:i,routeId:e.routeId,path:e.path,matches:a,match:m,controller:new AbortController})})),[_,I]}function ce(e,t){let n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function he(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}async function de(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];d(i,"No route found in manifest");let s={};for(let o in r){let e=void 0!==i[o]&&"hasErrorBoundary"!==o;f(!e,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+o+'" will be ignored.'),e||b.has(o)||(s[o]=r[o])}Object.assign(i,s),Object.assign(i,c({},t(i),{lazy:void 0}))}async function fe(e,t,n,r,i,s,o,a,l){let u,c,h;void 0===l&&(l={});let f=e=>{let r,i=new Promise(((e,t)=>r=t));return h=()=>r(),t.signal.addEventListener("abort",h),Promise.race([e({request:t,params:n.params,context:l.requestContext}),i])};try{let r=n.route[e];if(n.route.lazy)if(r){let e,t=await Promise.all([f(r).catch((t=>{e=t})),de(n.route,s,i)]);if(e)throw e;c=t[0]}else{if(await de(n.route,s,i),r=n.route[e],!r){if("action"===e){let e=new URL(t.url),r=e.pathname+e.search;throw Ee(405,{method:t.method,pathname:r,routeId:n.route.id})}return{type:w.data,data:void 0}}c=await f(r)}else{if(!r){let e=new URL(t.url);throw Ee(404,{pathname:e.pathname+e.search})}c=await f(r)}d(void 0!==c,"You defined "+("action"===e?"an action":"a loader")+' for route "'+n.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(g){u=w.error,c=g}finally{h&&t.signal.removeEventListener("abort",h)}if(Ce(c)){let e,i=c.status;if(Y.has(i)){let e=c.headers.get("Location");if(d(e,"Redirects returned/thrown from loaders/actions must have a Location header"),ne.test(e)){if(!l.isStaticRequest){let n=new URL(t.url),r=e.startsWith("//")?new URL(n.protocol+e):new URL(e),i=null!=M(r.pathname,o);r.origin===n.origin&&i&&(e=r.pathname+r.search+r.hash)}}else e=oe(new URL(t.url),r.slice(0,r.indexOf(n)+1),o,!0,e,a);if(l.isStaticRequest)throw c.headers.set("Location",e),c;return{type:w.redirect,status:i,location:e,revalidate:null!==c.headers.get("X-Remix-Revalidate"),reloadDocument:null!==c.headers.get("X-Remix-Reload-Document")}}if(l.isRouteRequest){throw{type:u===w.error?w.error:w.data,response:c}}try{let t=c.headers.get("Content-Type");e=t&&/\bapplication\/json\b/.test(t)?null==c.body?null:await c.json():await c.text()}catch(g){return{type:w.error,error:g}}return u===w.error?{type:u,error:new H(i,c.statusText,e),headers:c.headers}:{type:w.data,data:e,statusCode:c.status,headers:c.headers}}return u===w.error?{type:u,error:c}:function(e){let t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}(c)?{type:w.deferred,deferredData:c,statusCode:null==(p=c.init)?void 0:p.status,headers:(null==(m=c.init)?void 0:m.headers)&&new Headers(c.init.headers)}:{type:w.data,data:c};var p,m}function pe(e,t,n,r){let i=e.createURL(Se(t)).toString(),s={signal:n};if(r&&Ae(r.formMethod)){let{formMethod:e,formEncType:t}=r;s.method=e.toUpperCase(),"application/json"===t?(s.headers=new Headers({"Content-Type":t}),s.body=JSON.stringify(r.json)):"text/plain"===t?s.body=r.text:"application/x-www-form-urlencoded"===t&&r.formData?s.body=me(r.formData):s.body=r.formData}return new Request(i,s)}function me(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,"string"===typeof r?r:r.name);return t}function ge(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function ve(e,t,n,r,i){let s,o={},a=null,l=!1,u={};return n.forEach(((n,c)=>{let h=t[c].route.id;if(d(!xe(n),"Cannot handle redirect results in processLoaderData"),ke(n)){let t=be(e,h),i=n.error;r&&(i=Object.values(r)[0],r=void 0),a=a||{},null==a[t.route.id]&&(a[t.route.id]=i),o[h]=void 0,l||(l=!0,s=K(n.error)?n.error.status:500),n.headers&&(u[h]=n.headers)}else Te(n)?(i.set(h,n.deferredData),o[h]=n.deferredData.data):o[h]=n.data,null==n.statusCode||200===n.statusCode||l||(s=n.statusCode),n.headers&&(u[h]=n.headers)})),r&&(a=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:a,statusCode:s||200,loaderHeaders:u}}function ye(e,t,n,r,i,s,o,a){let{loaderData:l,errors:u}=ve(t,n,r,i,a);for(let h=0;h<s.length;h++){let{key:t,match:n,controller:r}=s[h];d(void 0!==o&&void 0!==o[h],"Did not find corresponding fetcher result");let i=o[h];if(!r||!r.signal.aborted)if(ke(i)){let r=be(e.matches,null==n?void 0:n.route.id);u&&u[r.route.id]||(u=c({},u,{[r.route.id]:i.error})),e.fetchers.delete(t)}else if(xe(i))d(!1,"Unhandled fetcher revalidation redirect");else if(Te(i))d(!1,"Unhandled fetcher deferred data");else{let n=Fe(i.data);e.fetchers.set(t,n)}}return{loaderData:l,errors:u}}function we(e,t,n,r){let i=c({},t);for(let s of n){let n=s.route.id;if(t.hasOwnProperty(n)?void 0!==t[n]&&(i[n]=t[n]):void 0!==e[n]&&s.route.loader&&(i[n]=e[n]),r&&r.hasOwnProperty(n))break}return i}function be(e,t){return(t?e.slice(0,e.findIndex((e=>e.route.id===t))+1):[...e]).reverse().find((e=>!0===e.route.hasErrorBoundary))||e[0]}function _e(e){let t=1===e.length?e[0]:e.find((e=>e.index||!e.path||"/"===e.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Ee(e,t){let{pathname:n,routeId:r,method:i,type:s}=void 0===t?{}:t,o="Unknown Server Error",a="Unknown @remix-run/router error";return 400===e?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but did not provide a `loader` for route "'+r+'", so there is no way to handle the request.':"defer-action"===s?a="defer() is not supported in actions":"invalid-body"===s&&(a="Unable to encode submission body")):403===e?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):404===e?(o="Not Found",a='No route matches URL "'+n+'"'):405===e&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but did not provide an `action` for route "'+r+'", so there is no way to handle the request.':i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new H(e||500,o,new Error(a),!0)}function Ie(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(xe(n))return{result:n,idx:t}}}function Se(e){return g(c({},"string"===typeof e?v(e):e,{hash:""}))}function Te(e){return e.type===w.deferred}function ke(e){return e.type===w.error}function xe(e){return(e&&e.type)===w.redirect}function Ce(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function Ne(e){return J.has(e.toLowerCase())}function Ae(e){return W.has(e.toLowerCase())}async function Re(e,t,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=t[o];if(!l)continue;let u=e.find((e=>e.route.id===l.route.id)),c=null!=u&&!ce(u,l)&&void 0!==(s&&s[l.route.id]);if(Te(a)&&(i||c)){let e=r[o];d(e,"Expected an AbortSignal for revalidating fetcher deferred result"),await De(a,e,i).then((e=>{e&&(n[o]=e||n[o])}))}}}async function De(e,t,n){if(void 0===n&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:w.data,data:e.deferredData.unwrappedData}}catch(r){return{type:w.error,error:r}}return{type:w.data,data:e.deferredData.data}}}function Pe(e){return new URLSearchParams(e).getAll("index").some((e=>""===e))}function Oe(e,t){let n="string"===typeof t?v(t).search:t.search;if(e[e.length-1].route.index&&Pe(n||""))return e[e.length-1];let r=F(e);return r[r.length-1]}function Le(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:s,json:o}=e;if(t&&n&&r)return null!=i?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i}:null!=s?{formMethod:t,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0}:void 0!==o?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}:void 0}function Me(e,t){if(t){return{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}return{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Ue(e,t){if(e){return{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Fe(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(this,arguments)}const Ve=s.createContext(null);const Be=s.createContext(null);const ze=s.createContext(null);const qe=s.createContext(null);const Ge=s.createContext({outlet:null,matches:[],isDataRoute:!1});const He=s.createContext(null);function Ke(){return null!=s.useContext(qe)}function $e(){return Ke()||d(!1),s.useContext(qe).location}function We(e){s.useContext(ze).static||s.useLayoutEffect(e)}function Qe(){let{isDataRoute:e}=s.useContext(Ge);return e?function(){let{router:e}=ot(it.UseNavigateStable),t=lt(st.UseNavigateStable),n=s.useRef(!1);return We((()=>{n.current=!0})),s.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,je({fromRouteId:t},i)))}),[e,t])}():function(){Ke()||d(!1);let e=s.useContext(Ve),{basename:t,future:n,navigator:r}=s.useContext(ze),{matches:i}=s.useContext(Ge),{pathname:o}=$e(),a=JSON.stringify(j(i,n.v7_relativeSplatPath)),l=s.useRef(!1);return We((()=>{l.current=!0})),s.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=V(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:B([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}),[t,r,a,o,e])}()}const Je=s.createContext(null);function Ye(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(ze),{matches:i}=s.useContext(Ge),{pathname:o}=$e(),a=JSON.stringify(j(i,r.v7_relativeSplatPath));return s.useMemo((()=>V(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function Xe(e,t,n,r){Ke()||d(!1);let{navigator:o}=s.useContext(ze),{matches:a}=s.useContext(Ge),l=a[a.length-1],u=l?l.params:{},c=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=$e();if(t){var p;let e="string"===typeof t?v(t):t;"/"===c||(null==(p=e.pathname)?void 0:p.startsWith(c))||d(!1),h=e}else h=f;let m=h.pathname||"/",g=m;if("/"!==c){let e=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=E(e,{pathname:g});let w=rt(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:B([c,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:B([c,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,r);return t&&w?s.createElement(qe.Provider,{value:{location:je({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:i.Pop}},w):w}function Ze(){let e=function(){var e;let t=s.useContext(He),n=at(st.UseRouteError),r=lt(st.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=K(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const et=s.createElement(Ze,null);class tt extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(Ge.Provider,{value:this.props.routeContext},s.createElement(He.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nt(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(Ve);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(Ge.Provider,{value:t},r)}function rt(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||d(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<a.length;s++){let e=a[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=s),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight(((e,r,i)=>{let o,h=!1,d=null,f=null;var p;n&&(o=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||et,u&&(c<0&&0===i?(p="route-fallback",!1||ut[p]||(ut[p]=!0),h=!0,f=null):c===i&&(h=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,i+1)),g=()=>{let t;return t=o?d:h?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(nt,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(tt,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var it=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(it||{}),st=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(st||{});function ot(e){let t=s.useContext(Ve);return t||d(!1),t}function at(e){let t=s.useContext(Be);return t||d(!1),t}function lt(e){let t=function(){let e=s.useContext(Ge);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const ut={};o.startTransition;function ct(e){return function(e){let t=s.useContext(Ge).outlet;return t?s.createElement(Je.Provider,{value:e},t):t}(e.context)}function ht(e){let{basename:t="/",children:n=null,location:r,navigationType:o=i.Pop,navigator:a,static:l=!1,future:u}=e;Ke()&&d(!1);let c=t.replace(/^\/*/,"/"),h=s.useMemo((()=>({basename:c,navigator:a,static:l,future:je({v7_relativeSplatPath:!1},u)})),[c,u,a,l]);"string"===typeof r&&(r=v(r));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:y="default"}=r,w=s.useMemo((()=>{let e=M(f,c);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:y},navigationType:o}}),[c,f,p,m,g,y,o]);return null==w?null:s.createElement(ze.Provider,{value:h},s.createElement(qe.Provider,{children:n,value:w}))}new Promise((()=>{}));s.Component;function dt(e){let t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:s.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:s.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:s.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ft.apply(this,arguments)}function pt(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const mt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],gt=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];try{window.__reactRouterVersion="6"}catch(eT){}function vt(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=ft({},t,{errors:yt(t.errors)})),t}function yt(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&"RouteErrorResponse"===i.__type)n[r]=new H(i.status,i.statusText,i.data,!0===i.internal);else if(i&&"Error"===i.__type){if(i.__subType){let e=window[i.__subType];if("function"===typeof e)try{let t=new e(i.message);t.stack="",n[r]=t}catch(eT){}}if(null==n[r]){let e=new Error(i.message);e.stack="",n[r]=e}}else n[r]=i;return n}const wt=s.createContext({isTransitioning:!1});const bt=s.createContext(new Map);const _t=o.startTransition,Et=u.flushSync;o.useId;function It(e){Et?Et(e):e()}class St{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}}function Tt(e){let{fallbackElement:t,router:n,future:r}=e,[i,o]=s.useState(n.state),[a,l]=s.useState(),[u,c]=s.useState({isTransitioning:!1}),[h,d]=s.useState(),[f,p]=s.useState(),[m,g]=s.useState(),v=s.useRef(new Map),{v7_startTransition:y}=r||{},w=s.useCallback((e=>{y?function(e){_t?_t(e):e()}(e):e()}),[y]),b=s.useCallback(((e,t)=>{let{deletedFetchers:r,unstable_flushSync:i,unstable_viewTransitionOpts:s}=t;r.forEach((e=>v.current.delete(e))),e.fetchers.forEach(((e,t)=>{void 0!==e.data&&v.current.set(t,e.data)}));let a=null==n.window||"function"!==typeof n.window.document.startViewTransition;if(s&&!a){if(i){It((()=>{f&&(h&&h.resolve(),f.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:s.currentLocation,nextLocation:s.nextLocation})}));let t=n.window.document.startViewTransition((()=>{It((()=>o(e)))}));return t.finished.finally((()=>{It((()=>{d(void 0),p(void 0),l(void 0),c({isTransitioning:!1})}))})),void It((()=>p(t)))}f?(h&&h.resolve(),f.skipTransition(),g({state:e,currentLocation:s.currentLocation,nextLocation:s.nextLocation})):(l(e),c({isTransitioning:!0,flushSync:!1,currentLocation:s.currentLocation,nextLocation:s.nextLocation}))}else i?It((()=>o(e))):w((()=>o(e)))}),[n.window,f,h,v,w]);s.useLayoutEffect((()=>n.subscribe(b)),[n,b]),s.useEffect((()=>{u.isTransitioning&&!u.flushSync&&d(new St)}),[u]),s.useEffect((()=>{if(h&&a&&n.window){let e=a,t=h.promise,r=n.window.document.startViewTransition((async()=>{w((()=>o(e))),await t}));r.finished.finally((()=>{d(void 0),p(void 0),l(void 0),c({isTransitioning:!1})})),p(r)}}),[w,a,h,n.window]),s.useEffect((()=>{h&&a&&i.location.key===a.location.key&&h.resolve()}),[h,f,i.location,a]),s.useEffect((()=>{!u.isTransitioning&&m&&(l(m.state),c({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),g(void 0))}),[u.isTransitioning,m]),s.useEffect((()=>{}),[]);let _=s.useMemo((()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:e=>n.navigate(e),push:(e,t,r)=>n.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset}),replace:(e,t,r)=>n.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})})),[n]),E=n.basename||"/",I=s.useMemo((()=>({router:n,navigator:_,static:!1,basename:E})),[n,_,E]);return s.createElement(s.Fragment,null,s.createElement(Ve.Provider,{value:I},s.createElement(Be.Provider,{value:i},s.createElement(bt.Provider,{value:v.current},s.createElement(wt.Provider,{value:u},s.createElement(ht,{basename:E,location:i.location,navigationType:i.historyAction,navigator:_,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?s.createElement(kt,{routes:n.routes,future:n.future,state:i}):t))))),null)}function kt(e){let{routes:t,future:n,state:r}=e;return Xe(t,void 0,r,n)}const xt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ct=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nt=s.forwardRef((function(e,t){let n,{onClick:r,relative:i,reloadDocument:o,replace:a,state:l,target:u,to:c,preventScrollReset:h,unstable_viewTransition:f}=e,p=pt(e,mt),{basename:m}=s.useContext(ze),v=!1;if("string"===typeof c&&Ct.test(c)&&(n=c,xt))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=M(t.pathname,m);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:v=!0}catch(eT){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;Ke()||d(!1);let{basename:r,navigator:i}=s.useContext(ze),{hash:o,pathname:a,search:l}=Ye(e,{relative:n}),u=a;return"/"!==r&&(u="/"===a?r:B([r,a])),i.createHref({pathname:u,search:l,hash:o})}(c,{relative:i}),w=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,u=Qe(),c=$e(),h=Ye(e,{relative:a});return s.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:g(c)===g(h);u(e,{replace:n,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[c,u,h,r,i,n,e,o,a,l])}(c,{replace:a,state:l,target:u,preventScrollReset:h,relative:i,unstable_viewTransition:f});return s.createElement("a",ft({},p,{href:n||y,onClick:v||o?r:function(e){r&&r(e),e.defaultPrevented||w(e)},ref:t,target:u}))}));const At=s.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:i="",end:o=!1,style:a,to:l,unstable_viewTransition:u,children:c}=e,h=pt(e,gt),f=Ye(l,{relative:h.relative}),p=$e(),m=s.useContext(Be),{navigator:g,basename:v}=s.useContext(ze),y=null!=m&&function(e,t){void 0===t&&(t={});let n=s.useContext(wt);null==n&&d(!1);let{basename:r}=Pt(Rt.useViewTransitionState),i=Ye(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=M(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=M(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=O(i.pathname,a)||null!=O(i.pathname,o)}(f)&&!0===u,w=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,b=p.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(b=b.toLowerCase(),_=_?_.toLowerCase():null,w=w.toLowerCase()),_&&v&&(_=M(_,v)||_);const E="/"!==w&&w.endsWith("/")?w.length-1:w.length;let I,S=b===w||!o&&b.startsWith(w)&&"/"===b.charAt(E),T=null!=_&&(_===w||!o&&_.startsWith(w)&&"/"===_.charAt(w.length)),k={isActive:S,isPending:T,isTransitioning:y},x=S?n:void 0;I="function"===typeof i?i(k):[i,S?"active":null,T?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let C="function"===typeof a?a(k):a;return s.createElement(Nt,ft({},h,{"aria-current":x,className:I,ref:t,style:C,to:l,unstable_viewTransition:u}),"function"===typeof c?c(k):c)}));var Rt,Dt;function Pt(e){let t=s.useContext(Ve);return t||d(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Rt||(Rt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Dt||(Dt={}));const Ot=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Lt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ot(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Mt;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Mt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ut=function(e){return function(e){const t=Ot(e);return Lt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ft=function(e){try{return Lt.decodeString(e,!0)}catch(eT){console.error("base64Decode failed: ",eT)}return null};function jt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=jt(e[n],t[n]));return e}function Vt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Bt=()=>{try{return Vt().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Cedre",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(eT){return}const t=e&&Ft(e[1]);return t&&JSON.parse(t)})()}catch(eT){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${eT}`)}},zt=()=>{var e;return null===(e=Bt())||void 0===e?void 0:e.config};class qt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Gt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ut(JSON.stringify({alg:"none",type:"JWT"})),Ut(JSON.stringify(s)),""].join(".")}function Ht(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Kt(){var e;const t=null===(e=Bt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(eT){return!1}}function $t(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function Wt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Qt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Jt(){const e=Ht();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Yt(){return!Kt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xt(){try{return"object"===typeof indexedDB}catch(eT){return!1}}class Zt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,en.prototype.create)}}class en{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(tn,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new Zt(n,s,t)}}const tn=/\{\$([^}]+)}/g;function nn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function rn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(sn(n)&&sn(s)){if(!rn(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function sn(e){return null!==e&&"object"===typeof e}function on(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function an(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function ln(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function un(e,t){const n=new cn(e,t);return n.subscribe.bind(n)}class cn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=hn),void 0===r.error&&(r.error=hn),void 0===r.complete&&(r.complete=hn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(eT){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(eT){"undefined"!==typeof console&&console.error&&console.error(eT)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function hn(){}function dn(e){return e&&e._delegate?e._delegate:e}class fn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const pn="[DEFAULT]";class mn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new qt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(eT){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(eT){if(r)return null;throw eT}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:pn})}catch(eT){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(eT){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===pn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn;return this.component?this.component.multipleInstances?e:pn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class gn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const vn=[];var yn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(yn||(yn={}));const wn={debug:yn.DEBUG,verbose:yn.VERBOSE,info:yn.INFO,warn:yn.WARN,error:yn.ERROR,silent:yn.SILENT},bn=yn.INFO,_n={[yn.DEBUG]:"log",[yn.VERBOSE]:"log",[yn.INFO]:"info",[yn.WARN]:"warn",[yn.ERROR]:"error"},En=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=_n[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class In{constructor(e){this.name=e,this._logLevel=bn,this._logHandler=En,this._userLogHandler=null,vn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?wn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yn.DEBUG,...t),this._logHandler(this,yn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yn.VERBOSE,...t),this._logHandler(this,yn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yn.INFO,...t),this._logHandler(this,yn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yn.WARN,...t),this._logHandler(this,yn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yn.ERROR,...t),this._logHandler(this,yn.ERROR,...t)}}let Sn,Tn;const kn=new WeakMap,xn=new WeakMap,Cn=new WeakMap,Nn=new WeakMap,An=new WeakMap;let Rn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return xn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Cn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return On(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Dn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Tn||(Tn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ln(this),n),On(kn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return On(e.apply(Ln(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Ln(this),t,...r);return Cn.set(s,t.sort?t.sort():[t]),On(s)}}function Pn(e){return"function"===typeof e?Dn(e):(e instanceof IDBTransaction&&function(e){if(xn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));xn.set(e,t)}(e),t=e,(Sn||(Sn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Rn):e);var t}function On(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(On(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&kn.set(t,e)})).catch((()=>{})),An.set(t,e),t}(e);if(Nn.has(e))return Nn.get(e);const t=Pn(e);return t!==e&&(Nn.set(e,t),An.set(t,e)),t}const Ln=e=>An.get(e);const Mn=["get","getKey","getAll","getAllKeys","count"],Un=["put","add","delete","clear"],Fn=new Map;function jn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Fn.get(t))return Fn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Un.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Mn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Fn.set(t,s),s}Rn=(e=>({...e,get:(t,n,r)=>jn(t,n)||e.get(t,n,r),has:(t,n)=>!!jn(t,n)||e.has(t,n)}))(Rn);class Vn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Bn="@firebase/app",zn="0.10.13",qn=new In("@firebase/app"),Gn="@firebase/app-compat",Hn="@firebase/analytics-compat",Kn="@firebase/analytics",$n="@firebase/app-check-compat",Wn="@firebase/app-check",Qn="@firebase/auth",Jn="@firebase/auth-compat",Yn="@firebase/database",Xn="@firebase/data-connect",Zn="@firebase/database-compat",er="@firebase/functions",tr="@firebase/functions-compat",nr="@firebase/installations",rr="@firebase/installations-compat",ir="@firebase/messaging",sr="@firebase/messaging-compat",or="@firebase/performance",ar="@firebase/performance-compat",lr="@firebase/remote-config",ur="@firebase/remote-config-compat",cr="@firebase/storage",hr="@firebase/storage-compat",dr="@firebase/firestore",fr="@firebase/vertexai-preview",pr="@firebase/firestore-compat",mr="firebase",gr="[DEFAULT]",vr={[Bn]:"fire-core",[Gn]:"fire-core-compat",[Kn]:"fire-analytics",[Hn]:"fire-analytics-compat",[Wn]:"fire-app-check",[$n]:"fire-app-check-compat",[Qn]:"fire-auth",[Jn]:"fire-auth-compat",[Yn]:"fire-rtdb",[Xn]:"fire-data-connect",[Zn]:"fire-rtdb-compat",[er]:"fire-fn",[tr]:"fire-fn-compat",[nr]:"fire-iid",[rr]:"fire-iid-compat",[ir]:"fire-fcm",[sr]:"fire-fcm-compat",[or]:"fire-perf",[ar]:"fire-perf-compat",[lr]:"fire-rc",[ur]:"fire-rc-compat",[cr]:"fire-gcs",[hr]:"fire-gcs-compat",[dr]:"fire-fst",[pr]:"fire-fst-compat",[fr]:"fire-vertex","fire-js":"fire-js",[mr]:"fire-js-all"},yr=new Map,wr=new Map,br=new Map;function _r(e,t){try{e.container.addComponent(t)}catch(eT){qn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,eT)}}function Er(e,t){e.container.addOrOverwriteComponent(t)}function Ir(e){const t=e.name;if(br.has(t))return qn.debug(`There were multiple attempts to register component ${t}.`),!1;br.set(t,e);for(const n of yr.values())_r(n,e);for(const n of wr.values())_r(n,e);return!0}function Sr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Tr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gr;Sr(e,t).clearInstance(n)}function kr(e){return void 0!==e.options}function xr(e){return void 0!==e.settings}function Cr(){br.clear()}const Nr=new en("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ar{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}class Rr extends Ar{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Fr(Bn,zn,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ur(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Nr.create("server-app-deleted")}}const Dr="10.14.1";function Pr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:gr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Nr.create("bad-app-name",{appName:String(i)});if(n||(n=zt()),!n)throw Nr.create("no-options");const s=yr.get(i);if(s){if(rn(n,s.options)&&rn(r,s.config))return s;throw Nr.create("duplicate-app",{appName:i})}const o=new gn(i);for(const l of br.values())o.addComponent(l);const a=new Ar(n,r,o);return yr.set(i,a),a}function Or(e,t){if(("undefined"!==typeof window||$t())&&!$t())throw Nr.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=kr(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Nr.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=wr.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new gn(i);for(const u of br.values())a.addComponent(u);const l=new Rr(n,t,i,a);return wr.set(i,l),l}function Lr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gr;const t=yr.get(e);if(!t&&e===gr&&zt())return Pr();if(!t)throw Nr.create("no-app",{appName:e});return t}function Mr(){return Array.from(yr.values())}async function Ur(e){let t=!1;const n=e.name;if(yr.has(n))t=!0,yr.delete(n);else if(wr.has(n)){e.decRefCount()<=0&&(wr.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Fr(e,t,n){var r;let i=null!==(r=vr[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void qn.warn(e.join(" "))}Ir(new fn(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}function jr(e,t){if(null!==e&&"function"!==typeof e)throw Nr.create("invalid-log-argument");!function(e,t){for(const n of vn){let r=null;t&&t.level&&(r=wn[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:yn[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Vr(e){var t;t=e,vn.forEach((e=>{e.setLogLevel(t)}))}const Br="firebase-heartbeat-store";let zr=null;function qr(){return zr||(zr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=On(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(On(o.result),e.oldVersion,e.newVersion,On(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Br)}catch(eT){console.warn(eT)}}}).catch((e=>{throw Nr.create("idb-open",{originalErrorMessage:e.message})}))),zr}async function Gr(e,t){try{const n=(await qr()).transaction(Br,"readwrite"),r=n.objectStore(Br);await r.put(t,Hr(e)),await n.done}catch(eT){if(eT instanceof Zt)qn.warn(eT.message);else{const t=Nr.create("idb-set",{originalErrorMessage:null===eT||void 0===eT?void 0:eT.message});qn.warn(t.message)}}}function Hr(e){return`${e.name}!${e.options.appId}`}class Kr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=$r();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(eT){qn.warn(eT)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=$r(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Qr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Qr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ut(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(eT){return qn.warn(eT),""}}}function $r(){return(new Date).toISOString().substring(0,10)}class Wr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Xt()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await qr()).transaction(Br),n=await t.objectStore(Br).get(Hr(e));return await t.done,n}catch(eT){if(eT instanceof Zt)qn.warn(eT.message);else{const t=Nr.create("idb-get",{originalErrorMessage:null===eT||void 0===eT?void 0:eT.message});qn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Gr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Gr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Qr(e){return Ut(JSON.stringify({version:2,heartbeats:e})).length}var Jr;Jr="",Ir(new fn("platform-logger",(e=>new Vn(e)),"PRIVATE")),Ir(new fn("heartbeat",(e=>new Kr(e)),"PRIVATE")),Fr(Bn,zn,Jr),Fr(Bn,zn,"esm2017"),Fr("fire-js","");class Yr{constructor(e,t){this._delegate=e,this.firebase=t,_r(e,new fn("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Ur(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gr;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gr;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){_r(this._delegate,e)}_addOrOverwriteComponent(e){Er(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Xr=new en("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Zr=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(r){const i=Pr(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(nn(t,i.name))return t[i.name];const s=new e(i,n);return t[i.name]=s,s},app:i,registerVersion:Fr,setLogLevel:Vr,onLog:jr,apps:null,SDK_VERSION:Dr,INTERNAL:{registerComponent:function(t){const r=t.name,s=r.replace("-compat","");if(Ir(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Xr.create("invalid-app-argument",{appName:r});return e[s]()};void 0!==t.serviceProps&&jt(o,t.serviceProps),n[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:r}};function i(e){if(!nn(t,e=e||gr))throw Xr.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),i.App=e,n}(Yr);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){jt(t,e)},createSubscribe:un,ErrorFactory:en,deepExtend:jt}),t}(),ei=new In("@firebase/app-compat");try{const e=Vt();if(void 0!==e.firebase){ei.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const t=e.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&ei.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch(tT){}const ti=Zr;!function(e){Fr("@firebase/app-compat","0.2.43",e)}();ti.registerVersion("firebase","10.14.1","app-compat");var ni,ri,ii="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},si={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(c(t))throw Error("division by zero");if(c(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=o(n)).j(t);h(u)||0<u.l(e);)u=(s=o(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=f(e,u)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ri=si.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(u))):i=(i=i.j(r)).add(o(u))}return i},ni=si.Integer=r}).apply("undefined"!==typeof ii?ii:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var oi,ai,li,ui,ci,hi,di,fi,pi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},mi={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof pi&&pi];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function I(e){i.setTimeout((()=>{throw e}),0)}function S(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new k),(e=>e.reset()));class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,C=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);x=()=>{e.then(R)}};var R=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){I(n)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function D(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,P);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),F=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new j(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var G="closure_lm_"+(1e6*Math.random()|0),H={};function K(e,t,n,r,i){if(r&&r.once)return W(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[U]?e.K(t,n,o(r)?!!r.capture:!!r,i):$(e,t,n,!1,r,i)}function $(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[G]=l=new B(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[U]?e.L(t,n,o(r)?!!r.capture:!!r,i):$(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[U]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[U])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Y(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[G]=null)):V(e)}}}function Y(e){return e in H?H[e]:H[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[G])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;_(t=new P(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&z(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,D),ne.prototype[U]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}h(le,D);var ue=[];function ce(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&J(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){P.call(this,"d")}function we(){P.call(this,"c")}h(ye,P),h(we,P);var be={},_e=null;function Ee(){return _e=_e||new ne}function Ie(e){P.call(this,be.La,e)}function Se(e){const t=Ee();re(t,new Ie(t))}function Te(e,t){P.call(this,be.STAT_EVENT,e),this.stat=t}function ke(e){const t=Ee();re(t,new Te(t,e))}function xe(e,t){P.call(this,be.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",h(Ie,P),be.STAT_EVENT="statevent",h(Te,P),be.Ma="timingevent",h(xe,P),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Re,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Re=new Oe;var Ue={},Fe={};function je(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Tt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ue[0]=i.toString()),i=ue);for(var s=0;s<i.length;s++){var o=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Ue:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,Ge(e,e.I)}function Ge(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(u(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function $e(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function We(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Jt(n)}rn(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(u(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(He(a),qe(a)),r.g=o}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=u[0]&&"close"!=u[0]||cn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?cn(n,7):Qt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Se()}catch(c){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=d||7==t||Se(),He(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var r=Kt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){$e(this),Ke(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,ke(12),$e(this),Ke(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,We(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==Fe){4==d&&(this.s=4,ke(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ue){this.s=4,ke(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),We(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,ke(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),$e(this),Ke(this)}else Ae(this.i,this.l,a,null),We(this,a);4==d&&$e(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),$e(this),Ke(this)}}}catch(gi){}},Le.prototype.cancel=function(){this.J=!0,$e(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Se(),ke(17)),$e(this),this.s=2,Ke(this)):Ge(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ut(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ut(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ut(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(It(this,t),Tt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new _t(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function ht(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function It(e,t){Et(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return Et(e),t=kt(e,t),e.g.has(t)}function Tt(e,t,n){It(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),d(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function xt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ct(){this.g=new fe}function Nt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(eT){throw t.push(r+"type="+encodeURIComponent("_badmap")),eT}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Ut(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){Et(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,St(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(At,pe),At.prototype.g=function(){return new Rt(this.l,this.j)},At.prototype.i=(mt={},function(){return mt}),h(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Ot(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ut,ne);var Ft=/^https?$/i,jt=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),qt(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Bt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Gt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(eT){}}}function Gt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(wi){return null}}function $t(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$t("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$t("baseRetryDelayMs",5e3,e),this.cb=$t("retryDelaySeedMs",1e4,e),this.Wa=$t("forwardChannelMaxRetries",2,e),this.wa=$t("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Yt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}hn(e)}function Jt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Yt(e){Jt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;x||A(),C||(x(),C=!0),N.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),je(n,r,t)}function en(e,t){e.H&&y(e.H,(function(e,n){ct(t,n,e)})),e.l&&rt({},(function(e,n){ct(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Nt(a,e,"req"+n+"_")}catch(gi){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;x||A(),C||(x(),C=!0),N.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(u(e.Fa,e),un(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new xe(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(u(e.Ga,e,t),un(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function un(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=c(xt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(xt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(xt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(xt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout((()=>{n.abort(),xt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?xt(0,0,!0,t):xt(0,0,!1,t)})).catch((()=>{clearTimeout(r),xt(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),hn(e),Yt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ut(new At({eb:n})):new Ut(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Wt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Ut.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?me(this.o):me(Re),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(jt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Ut.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Wt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ct(n=ot(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&Mt(n,this.m,s)),et(this.h,i),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),i.T=!0,je(i,n,null)):je(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Ye(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Jt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Jt(this),rn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},h(vn,ye),h(yn,we),h(wn,pn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new vn(e))},wn.prototype.sa=function(e){re(this.g,new yn)},wn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,fi=mi.createWebChannelTransport=function(){return new mn},di=mi.getStatEventTarget=function(){return Ee()},hi=mi.Event=be,ci=mi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,ui=mi.ErrorCode=De,Pe.COMPLETE="complete",li=mi.EventType=Pe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ai=mi.WebChannel=ge,mi.FetchXmlHttpFactory=At,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,oi=mi.XhrIo=Ut}).apply("undefined"!==typeof pi?pi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const gi="@firebase/firestore";class vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");let yi="10.14.0";const wi=new In("@firebase/firestore");function bi(){return wi.logLevel}function _i(e){if(wi.logLevel<=yn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Si);wi.debug(`Firestore (${yi}): ${e}`,...i)}}function Ei(e){if(wi.logLevel<=yn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Si);wi.error(`Firestore (${yi}): ${e}`,...i)}}function Ii(e){if(wi.logLevel<=yn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Si);wi.warn(`Firestore (${yi}): ${e}`,...i)}}function Si(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ti(){const e=`FIRESTORE (${yi}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Ei(e),new Error(e)}function ki(e,t){e||Ti()}function xi(e,t){return e}const Ci={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ni extends Zt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ai{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ri{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Di{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(vi.UNAUTHENTICATED)))}shutdown(){}}class Pi{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Oi{constructor(e){this.t=e,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ki(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ai,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{_i("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(_i("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ai)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(_i("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ki("string"==typeof t.accessToken),new Ri(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ki(null===e||"string"==typeof e),new vi(e)}}class Li{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=vi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Mi{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Li(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(vi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ui{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fi{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ki(void 0===this.o);const n=e=>{null!=e.error&&_i("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,_i("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{_i("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):_i("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ki("string"==typeof e.token),this.R=e.token,new Ui(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ji(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Vi{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ji(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Bi(e,t){return e<t?-1:e>t?1:0}function zi(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function qi(e){return e+"\0"}class Gi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ni(Ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ni(Ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ni(Ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ni(Ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gi.fromMillis(Date.now())}static fromDate(e){return Gi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Gi(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bi(this.nanoseconds,e.nanoseconds):Bi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Hi{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Hi(e)}static min(){return new Hi(new Gi(0,0))}static max(){return new Hi(new Gi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ki{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ti(),void 0===n?n=e.length-t:n>e.length-t&&Ti(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ki.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ki?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $i extends Ki{construct(e,t,n){return new $i(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ni(Ci.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new $i(e)}static emptyPath(){return new $i([])}}const Wi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qi extends Ki{construct(e,t,n){return new Qi(e,t,n)}static isValidIdentifier(e){return Wi.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qi(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ni(Ci.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ni(Ci.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ni(Ci.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ni(Ci.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qi(t)}static emptyPath(){return new Qi([])}}class Ji{constructor(e){this.path=e}static fromPath(e){return new Ji($i.fromString(e))}static fromName(e){return new Ji($i.fromString(e).popFirst(5))}static empty(){return new Ji($i.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$i.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $i.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ji(new $i(e.slice()))}}class Yi{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Xi(e){return e.fields.find((e=>2===e.kind))}function Zi(e){return e.fields.filter((e=>2!==e.kind))}Yi.UNKNOWN_ID=-1;class es{constructor(e,t){this.fieldPath=e,this.kind=t}}class ts{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ts(0,is.min())}}function ns(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Hi.fromTimestamp(1e9===r?new Gi(n+1,0):new Gi(n,r));return new is(i,Ji.empty(),t)}function rs(e){return new is(e.readTime,e.key,-1)}class is{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new is(Hi.min(),Ji.empty(),-1)}static max(){return new is(Hi.max(),Ji.empty(),-1)}}function ss(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ji.comparator(e.documentKey,t.documentKey),0!==n?n:Bi(e.largestBatchId,t.largestBatchId))}const os="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class as{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ls(e){if(e.code!==Ci.FAILED_PRECONDITION||e.message!==os)throw e;_i("LocalStore","Unexpectedly lost primary lease")}class us{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ti(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new us(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof us?t:us.resolve(t)}catch(e){return us.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):us.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):us.reject(t)}static resolve(e){return new us(((t,n)=>{t(e)}))}static reject(e){return new us(((t,n)=>{n(e)}))}static waitFor(e){return new us(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=us.resolve(!1);for(const n of e)t=t.next((e=>e?us.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new us(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new us(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class cs{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ai,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ps(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=ws(t.target.error);this.V.reject(new ps(e,n))}}static open(e,t,n,r){try{return new cs(t,e.transaction(r,n))}catch(e){throw new ps(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(_i("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gs(t)}}class hs{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===hs.S(Ht())&&Ei("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return _i("SimpleDb","Removing database:",e),vs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Xt())return!1;if(hs.v())return!0;const e=Ht(),t=hs.S(e),n=0<t&&t<10,r=ds(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(_i("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new ps(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Ni(Ci.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Ni(Ci.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new ps(e,r))},r.onupgradeneeded=e=>{_i("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{_i("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=cs.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),us.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(_i("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ds(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class fs{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return vs(this.B.delete())}}class ps extends Ni{constructor(e,t){super(Ci.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ms(e){return"IndexedDbTransactionError"===e.name}class gs{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(_i("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(_i("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),vs(n)}add(e){return _i("SimpleDb","ADD",this.store.name,e,e),vs(this.store.add(e))}get(e){return vs(this.store.get(e)).next((t=>(void 0===t&&(t=null),_i("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return _i("SimpleDb","DELETE",this.store.name,e),vs(this.store.delete(e))}count(){return _i("SimpleDb","COUNT",this.store.name),vs(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new us(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new us(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){_i("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new us(((n,r)=>{t.onerror=e=>{const t=ws(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new us(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new fs(i),o=t(i.primaryKey,i.value,s);if(o instanceof us){const e=o.catch((e=>(s.done(),us.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>us.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vs(e){return new us(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=ws(e.target.error);n(t)}}))}let ys=!1;function ws(e){const t=hs.S(Ht());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Ni("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ys||(ys=!0,setTimeout((()=>{throw e}),0)),e}}return e}class bs{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){_i("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{_i("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(e){ms(e)?_i("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await ls(e)}await this.X(6e4)}))}}class _s{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return us.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return _i("IndexBackfiller",`Processing collection: ${t}`),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(_i("IndexBackfiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=rs(t);ss(r,n)>0&&(n=r)})),new is(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Es{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Is(e){return null==e}function Ss(e){return 0===e&&1/e==-1/0}function Ts(e){return"number"==typeof e&&Number.isInteger(e)&&!Ss(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function ks(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Cs(t)),t=xs(e.get(n),t);return Cs(t)}function xs(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Cs(e){return e+"\x01\x01"}function Ns(e){const t=e.length;if(ki(t>=2),2===t)return ki("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),$i.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Ti(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Ti()}s=t+2}return new $i(r)}Es.oe=-1;const As=["userId","batchId"];function Rs(e,t){return[e,ks(t)]}function Ds(e,t,n){return[e,ks(t),n]}const Ps={},Os=["prefixPath","collectionGroup","readTime","documentId"],Ls=["prefixPath","collectionGroup","documentId"],Ms=["collectionGroup","readTime","prefixPath","documentId"],Us=["canonicalId","targetId"],Fs=["targetId","path"],js=["path","targetId"],Vs=["collectionId","parent"],Bs=["indexId","uid"],zs=["uid","sequenceNumber"],qs=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Gs=["indexId","uid","orderedDocumentKey"],Hs=["userId","collectionPath","documentId"],Ks=["userId","collectionPath","largestBatchId"],$s=["userId","collectionGroup","largestBatchId"],Ws=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Qs=[...Ws,"documentOverlays"],Js=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ys=Js,Xs=[...Ys,"indexConfiguration","indexState","indexEntries"],Zs=Xs,eo=[...Xs,"globals"];class to extends as{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function no(e,t){const n=xi(e);return hs.F(n._e,t)}function ro(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function io(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function so(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class oo{constructor(e,t){this.comparator=e,this.root=t||lo.EMPTY}insert(e,t){return new oo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,lo.BLACK,null,null))}remove(e){return new oo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ao(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ao(this.root,e,this.comparator,!1)}getReverseIterator(){return new ao(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ao(this.root,e,this.comparator,!0)}}class ao{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lo{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:lo.RED,this.left=null!=r?r:lo.EMPTY,this.right=null!=i?i:lo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new lo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return lo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return lo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ti();if(this.right.isRed())throw Ti();const e=this.left.check();if(e!==this.right.check())throw Ti();return e+(this.isRed()?0:1)}}lo.EMPTY=null,lo.RED=!0,lo.BLACK=!1,lo.EMPTY=new class{constructor(){this.size=0}get key(){throw Ti()}get value(){throw Ti()}get color(){throw Ti()}get left(){throw Ti()}get right(){throw Ti()}copy(e,t,n,r,i){return this}insert(e,t,n){return new lo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class uo{constructor(e){this.comparator=e,this.data=new oo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new co(this.data.getIterator())}getIteratorFrom(e){return new co(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof uo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new uo(this.comparator);return t.data=e,t}}class co{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ho(e){return e.hasNext()?e.getNext():void 0}class fo{constructor(e){this.fields=e,e.sort(Qi.comparator)}static empty(){return new fo([])}unionWith(e){let t=new uo(Qi.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new fo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zi(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class po extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new po("Invalid base64 string: "+e):e}}(e);return new mo(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new mo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mo.EMPTY_BYTE_STRING=new mo("");const go=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(e){if(ki(!!e),"string"==typeof e){let t=0;const n=go.exec(e);if(ki(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:yo(e.seconds),nanos:yo(e.nanos)}}function yo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function wo(e){return"string"==typeof e?mo.fromBase64String(e):mo.fromUint8Array(e)}function bo(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function _o(e){const t=e.mapValue.fields.__previous_value__;return bo(t)?_o(t):t}function Eo(e){const t=vo(e.mapValue.fields.__local_write_time__.timestampValue);return new Gi(t.seconds,t.nanos)}class Io{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class So{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new So("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof So&&e.projectId===this.projectId&&e.database===this.database}}const To={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ko={nullValue:"NULL_VALUE"};function xo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bo(e)?4:qo(e)?9007199254740991:Bo(e)?10:11:Ti()}function Co(e,t){if(e===t)return!0;const n=xo(e);if(n!==xo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Eo(e).isEqual(Eo(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=vo(e.timestampValue),r=vo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return wo(e.bytesValue).isEqual(wo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return yo(e.geoPointValue.latitude)===yo(t.geoPointValue.latitude)&&yo(e.geoPointValue.longitude)===yo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return yo(e.integerValue)===yo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=yo(e.doubleValue),r=yo(t.doubleValue);return n===r?Ss(n)===Ss(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return zi(e.arrayValue.values||[],t.arrayValue.values||[],Co);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ro(n)!==ro(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Co(n[i],r[i])))return!1;return!0}(e,t);default:return Ti()}}function No(e,t){return void 0!==(e.values||[]).find((e=>Co(e,t)))}function Ao(e,t){if(e===t)return 0;const n=xo(e),r=xo(t);if(n!==r)return Bi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bi(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=yo(e.integerValue||e.doubleValue),r=yo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ro(e.timestampValue,t.timestampValue);case 4:return Ro(Eo(e),Eo(t));case 5:return Bi(e.stringValue,t.stringValue);case 6:return function(e,t){const n=wo(e),r=wo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Bi(n[i],r[i]);if(0!==e)return e}return Bi(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Bi(yo(e.latitude),yo(t.latitude));return 0!==n?n:Bi(yo(e.longitude),yo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Do(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,u=null===(r=a.value)||void 0===r?void 0:r.arrayValue,c=Bi((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:Do(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===To.mapValue&&t===To.mapValue)return 0;if(e===To.mapValue)return 1;if(t===To.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Bi(r[o],s[o]);if(0!==e)return e;const t=Ao(n[r[o]],i[s[o]]);if(0!==t)return t}return Bi(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ti()}}function Ro(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Bi(e,t);const n=vo(e),r=vo(t),i=Bi(n.seconds,r.seconds);return 0!==i?i:Bi(n.nanos,r.nanos)}function Do(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ao(n[i],r[i]);if(e)return e}return Bi(n.length,r.length)}function Po(e){return Oo(e)}function Oo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=vo(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return wo(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ji.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Oo(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Oo(e.fields[i])}`;return n+"}"}(e.mapValue):Ti()}function Lo(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Mo(e){return!!e&&"integerValue"in e}function Uo(e){return!!e&&"arrayValue"in e}function Fo(e){return!!e&&"nullValue"in e}function jo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Vo(e){return!!e&&"mapValue"in e}function Bo(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function zo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return io(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=zo(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=zo(e.arrayValue.values[n]);return t}return Object.assign({},e)}function qo(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}const Go={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Ho(e){return"nullValue"in e?ko:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Lo(So.empty(),Ji.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?Bo(e)?Go:{mapValue:{}}:Ti()}function Ko(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Lo(So.empty(),Ji.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?Go:"mapValue"in e?Bo(e)?{mapValue:{}}:To:Ti()}function $o(e,t){const n=Ao(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Wo(e,t){const n=Ao(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Qo{constructor(e){this.value=e}static empty(){return new Qo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Vo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zo(t)}setAll(e){let t=Qi.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=zo(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Vo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Co(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Vo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){io(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Qo(zo(this.value))}}function Jo(e){const t=[];return io(e.fields,((e,n)=>{const r=new Qi([e]);if(Vo(n)){const e=Jo(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new fo(t)}class Yo{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Yo(e,0,Hi.min(),Hi.min(),Hi.min(),Qo.empty(),0)}static newFoundDocument(e,t,n,r){return new Yo(e,1,t,Hi.min(),n,r,0)}static newNoDocument(e,t){return new Yo(e,2,t,Hi.min(),Hi.min(),Qo.empty(),0)}static newUnknownDocument(e,t){return new Yo(e,3,t,Hi.min(),Hi.min(),Qo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Hi.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Hi.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yo&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xo{constructor(e,t){this.position=e,this.inclusive=t}}function Zo(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Ji.comparator(Ji.fromName(o.referenceValue),n.key):Ao(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ea(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Co(e.position[n],t.position[n]))return!1;return!0}class ta{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function na(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ra{}class ia extends ra{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new pa(e,t,n):"array-contains"===t?new ya(e,n):"in"===t?new wa(e,n):"not-in"===t?new ba(e,n):"array-contains-any"===t?new _a(e,n):new ia(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ma(e,n):new ga(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ao(t,this.value)):null!==t&&xo(this.value)===xo(t)&&this.matchesComparison(Ao(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ti()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sa extends ra{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new sa(e,t)}matches(e){return oa(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function oa(e){return"and"===e.op}function aa(e){return"or"===e.op}function la(e){return ua(e)&&oa(e)}function ua(e){for(const t of e.filters)if(t instanceof sa)return!1;return!0}function ca(e){if(e instanceof ia)return e.field.canonicalString()+e.op.toString()+Po(e.value);if(la(e))return e.filters.map((e=>ca(e))).join(",");{const t=e.filters.map((e=>ca(e))).join(",");return`${e.op}(${t})`}}function ha(e,t){return e instanceof ia?function(e,t){return t instanceof ia&&e.op===t.op&&e.field.isEqual(t.field)&&Co(e.value,t.value)}(e,t):e instanceof sa?function(e,t){return t instanceof sa&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&ha(n,t.filters[r])),!0)}(e,t):void Ti()}function da(e,t){const n=e.filters.concat(t);return sa.create(n,e.op)}function fa(e){return e instanceof ia?function(e){return`${e.field.canonicalString()} ${e.op} ${Po(e.value)}`}(e):e instanceof sa?function(e){return e.op.toString()+" {"+e.getFilters().map(fa).join(" ,")+"}"}(e):"Filter"}class pa extends ia{constructor(e,t,n){super(e,t,n),this.key=Ji.fromName(n.referenceValue)}matches(e){const t=Ji.comparator(e.key,this.key);return this.matchesComparison(t)}}class ma extends ia{constructor(e,t){super(e,"in",t),this.keys=va("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ga extends ia{constructor(e,t){super(e,"not-in",t),this.keys=va("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function va(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ji.fromName(e.referenceValue)))}class ya extends ia{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uo(t)&&No(t.arrayValue,this.value)}}class wa extends ia{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&No(this.value.arrayValue,t)}}class ba extends ia{constructor(e,t){super(e,"not-in",t)}matches(e){if(No(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!No(this.value.arrayValue,t)}}class _a extends ia{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uo(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>No(this.value.arrayValue,e)))}}class Ea{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Ia(e){return new Ea(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Sa(e){const t=xi(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ca(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Is(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Po(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Po(e))).join(",")),t.ue=e}return t.ue}function Ta(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!na(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ha(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ea(e.startAt,t.startAt)&&ea(e.endAt,t.endAt)}function ka(e){return Ji.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function xa(e,t){return e.filters.filter((e=>e instanceof ia&&e.field.isEqual(t)))}function Ca(e,t,n){let r=ko,i=!0;for(const s of xa(e,t)){let e=ko,t=!0;switch(s.op){case"<":case"<=":e=Ho(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=ko}$o({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];$o({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Na(e,t,n){let r=To,i=!0;for(const s of xa(e,t)){let e=To,t=!0;switch(s.op){case">=":case">":e=Ko(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=To}Wo({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Wo({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Aa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ra(e,t,n,r,i,s,o,a){return new Aa(e,t,n,r,i,s,o,a)}function Da(e){return new Aa(e)}function Pa(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Oa(e){return null!==e.collectionGroup}function La(e){const t=xi(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new uo(Qi.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new ta(r,n))})),e.has(Qi.keyField().canonicalString())||t.ce.push(new ta(Qi.keyField(),n))}return t.ce}function Ma(e){const t=xi(e);return t.le||(t.le=Ua(t,La(e))),t.le}function Ua(e,t){if("F"===e.limitType)return Ia(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ta(e.field,t)}));const n=e.endAt?new Xo(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Xo(e.startAt.position,e.startAt.inclusive):null;return Ia(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Fa(e,t){const n=e.filters.concat([t]);return new Aa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ja(e,t,n){return new Aa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Va(e,t){return Ta(Ma(e),Ma(t))&&e.limitType===t.limitType}function Ba(e){return`${Sa(Ma(e))}|lt:${e.limitType}`}function za(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>fa(e))).join(", ")}]`),Is(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Po(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Po(e))).join(",")),`Target(${t})`}(Ma(e))}; limitType=${e.limitType})`}function qa(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ji.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of La(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Zo(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,La(e),t))&&!(e.endAt&&!function(e,t,n){const r=Zo(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,La(e),t))}(e,t)}function Ga(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ha(e){return(t,n)=>{let r=!1;for(const i of La(e)){const e=Ka(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ka(e,t,n){const r=e.field.isKeyField()?Ji.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ao(r,i):Ti()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ti()}}class $a{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){io(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return so(this.inner)}size(){return this.innerSize}}const Wa=new oo(Ji.comparator);function Qa(){return Wa}const Ja=new oo(Ji.comparator);function Ya(){let e=Ja;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Xa(e){let t=Ja;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Za(){return tl()}function el(){return tl()}function tl(){return new $a((e=>e.toString()),((e,t)=>e.isEqual(t)))}const nl=new oo(Ji.comparator),rl=new uo(Ji.comparator);function il(){let e=rl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const sl=new uo(Bi);function ol(){return sl}function al(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ss(t)?"-0":t}}function ll(e){return{integerValue:""+e}}function ul(e,t){return Ts(t)?ll(t):al(e,t)}class cl{constructor(){this._=void 0}}function hl(e,t,n){return e instanceof pl?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&bo(t)&&(t=_o(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ml?gl(e,t):e instanceof vl?yl(e,t):function(e,t){const n=fl(e,t),r=bl(n)+bl(e.Pe);return Mo(n)&&Mo(e.Pe)?ll(r):al(e.serializer,r)}(e,t)}function dl(e,t,n){return e instanceof ml?gl(e,t):e instanceof vl?yl(e,t):n}function fl(e,t){return e instanceof wl?function(e){return Mo(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class pl extends cl{}class ml extends cl{constructor(e){super(),this.elements=e}}function gl(e,t){const n=_l(t);for(const r of e.elements)n.some((e=>Co(e,r)))||n.push(r);return{arrayValue:{values:n}}}class vl extends cl{constructor(e){super(),this.elements=e}}function yl(e,t){let n=_l(t);for(const r of e.elements)n=n.filter((e=>!Co(e,r)));return{arrayValue:{values:n}}}class wl extends cl{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function bl(e){return yo(e.integerValue||e.doubleValue)}function _l(e){return Uo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class El{constructor(e,t){this.field=e,this.transform=t}}class Il{constructor(e,t){this.version=e,this.transformResults=t}}class Sl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sl}static exists(e){return new Sl(void 0,e)}static updateTime(e){return new Sl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class kl{}function xl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ul(e.key,Sl.none()):new Dl(e.key,e.data,Sl.none());{const n=e.data,r=Qo.empty();let i=new uo(Qi.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Pl(e.key,r,new fo(i.toArray()),Sl.none())}}function Cl(e,t,n){e instanceof Dl?function(e,t,n){const r=e.value.clone(),i=Ll(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Pl?function(e,t,n){if(!Tl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ll(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ol(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Nl(e,t,n,r){return e instanceof Dl?function(e,t,n,r){if(!Tl(e.precondition,t))return n;const i=e.value.clone(),s=Ml(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Pl?function(e,t,n,r){if(!Tl(e.precondition,t))return n;const i=Ml(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ol(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Tl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Al(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=fl(r.transform,e||null);null!=i&&(null===n&&(n=Qo.empty()),n.set(r.field,i))}return n||null}function Rl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&zi(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ml&&t instanceof ml||e instanceof vl&&t instanceof vl?zi(e.elements,t.elements,Co):e instanceof wl&&t instanceof wl?Co(e.Pe,t.Pe):e instanceof pl&&t instanceof pl}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Dl extends kl{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Pl extends kl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ol(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Ll(e,t,n){const r=new Map;ki(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,dl(o,a,n[i]))}return r}function Ml(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,hl(e,s,t))}return r}class Ul extends kl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fl extends kl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jl{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Cl(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Nl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Nl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=el();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=xl(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Hi.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),il())}isEqual(e){return this.batchId===e.batchId&&zi(this.mutations,e.mutations,((e,t)=>Rl(e,t)))&&zi(this.baseMutations,e.baseMutations,((e,t)=>Rl(e,t)))}}class Vl{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ki(e.mutations.length===n.length);let r=nl;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Vl(e,t,n,r)}}class Bl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class zl{constructor(e,t){this.count=e,this.unchangedNames=t}}var ql,Gl;function Hl(e){switch(e){default:return Ti();case Ci.CANCELLED:case Ci.UNKNOWN:case Ci.DEADLINE_EXCEEDED:case Ci.RESOURCE_EXHAUSTED:case Ci.INTERNAL:case Ci.UNAVAILABLE:case Ci.UNAUTHENTICATED:return!1;case Ci.INVALID_ARGUMENT:case Ci.NOT_FOUND:case Ci.ALREADY_EXISTS:case Ci.PERMISSION_DENIED:case Ci.FAILED_PRECONDITION:case Ci.ABORTED:case Ci.OUT_OF_RANGE:case Ci.UNIMPLEMENTED:case Ci.DATA_LOSS:return!0}}function Kl(e){if(void 0===e)return Ei("GRPC error has no .code"),Ci.UNKNOWN;switch(e){case ql.OK:return Ci.OK;case ql.CANCELLED:return Ci.CANCELLED;case ql.UNKNOWN:return Ci.UNKNOWN;case ql.DEADLINE_EXCEEDED:return Ci.DEADLINE_EXCEEDED;case ql.RESOURCE_EXHAUSTED:return Ci.RESOURCE_EXHAUSTED;case ql.INTERNAL:return Ci.INTERNAL;case ql.UNAVAILABLE:return Ci.UNAVAILABLE;case ql.UNAUTHENTICATED:return Ci.UNAUTHENTICATED;case ql.INVALID_ARGUMENT:return Ci.INVALID_ARGUMENT;case ql.NOT_FOUND:return Ci.NOT_FOUND;case ql.ALREADY_EXISTS:return Ci.ALREADY_EXISTS;case ql.PERMISSION_DENIED:return Ci.PERMISSION_DENIED;case ql.FAILED_PRECONDITION:return Ci.FAILED_PRECONDITION;case ql.ABORTED:return Ci.ABORTED;case ql.OUT_OF_RANGE:return Ci.OUT_OF_RANGE;case ql.UNIMPLEMENTED:return Ci.UNIMPLEMENTED;case ql.DATA_LOSS:return Ci.DATA_LOSS;default:return Ti()}}(Gl=ql||(ql={}))[Gl.OK=0]="OK",Gl[Gl.CANCELLED=1]="CANCELLED",Gl[Gl.UNKNOWN=2]="UNKNOWN",Gl[Gl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gl[Gl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gl[Gl.NOT_FOUND=5]="NOT_FOUND",Gl[Gl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gl[Gl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gl[Gl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gl[Gl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gl[Gl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gl[Gl.ABORTED=10]="ABORTED",Gl[Gl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gl[Gl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gl[Gl.INTERNAL=13]="INTERNAL",Gl[Gl.UNAVAILABLE=14]="UNAVAILABLE",Gl[Gl.DATA_LOSS=15]="DATA_LOSS";let $l=null;function Wl(){return new TextEncoder}const Ql=new ni([4294967295,4294967295],0);function Jl(e){const t=Wl().encode(e),n=new ri;return n.update(t),new Uint8Array(n.digest())}function Yl(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ni([n,r],0),new ni([i,s],0)]}class Xl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Zl(`Invalid padding: ${t}`);if(n<0)throw new Zl(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Zl(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Zl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ni.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(ni.fromNumber(n)));return 1===r.compare(Ql)&&(r=new ni([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Jl(e),[n,r]=Yl(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Xl(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=Jl(e),[n,r]=Yl(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class eu{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,tu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new eu(Hi.min(),r,new oo(Bi),Qa(),il())}}class tu{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new tu(n,t,il(),il(),il())}}class nu{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class ru{constructor(e,t){this.targetId=e,this.me=t}}class iu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mo.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class su{constructor(){this.fe=0,this.ge=lu(),this.pe=mo.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=il(),t=il(),n=il();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ti()}})),new tu(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=lu()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ki(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ou{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qa(),this.qe=au(),this.Qe=new oo(Bi)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Ti()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(ka(i))if(0===n){const e=new Ji(i.path);this.Ue(t,e,Yo.newNoDocument(e,Hi.min()))}else ki(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==$l||$l.et(function(e,t,n,r,i){var s,o,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=wo(n).toUint8Array()}catch(e){if(e instanceof po)return Ii("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Xl(s,r,i)}catch(e){return Ii(e instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&ka(i.target)){const t=new Ji(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Yo.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}}));let n=il();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new eu(e,t,this.Qe,this.ke,n);return this.ke=Qa(),this.qe=au(),this.Qe=new oo(Bi),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new su,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new uo(Bi),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||_i("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new su),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function au(){return new oo(Ji.comparator)}function lu(){return new oo(Ji.comparator)}const uu={asc:"ASCENDING",desc:"DESCENDING"},cu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hu={and:"AND",or:"OR"};class du{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fu(e,t){return e.useProto3Json||Is(t)?t:{value:t}}function pu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function mu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function gu(e,t){return pu(e,t.toTimestamp())}function vu(e){return ki(!!e),Hi.fromTimestamp(function(e){const t=vo(e);return new Gi(t.seconds,t.nanos)}(e))}function yu(e,t){return wu(e,t).canonicalString()}function wu(e,t){const n=function(e){return new $i(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function bu(e){const t=$i.fromString(e);return ki(zu(t)),t}function _u(e,t){return yu(e.databaseId,t.path)}function Eu(e,t){const n=bu(t);if(n.get(1)!==e.databaseId.projectId)throw new Ni(Ci.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ni(Ci.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ji(ku(n))}function Iu(e,t){return yu(e.databaseId,t)}function Su(e){const t=bu(e);return 4===t.length?$i.emptyPath():ku(t)}function Tu(e){return new $i(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ku(e){return ki(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function xu(e,t,n){return{name:_u(e,t),fields:n.value.mapValue.fields}}function Cu(e,t,n){const r=Eu(e,t.name),i=vu(t.updateTime),s=t.createTime?vu(t.createTime):Hi.min(),o=new Qo({mapValue:{fields:t.fields}}),a=Yo.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Nu(e,t){let n;if(t instanceof Dl)n={update:xu(e,t.key,t.value)};else if(t instanceof Ul)n={delete:_u(e,t.key)};else if(t instanceof Pl)n={update:xu(e,t.key,t.data),updateMask:Bu(t.fieldMask)};else{if(!(t instanceof Fl))return Ti();n={verify:_u(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof pl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ml)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof vl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wl)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Ti()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:gu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ti()}(e,t.precondition)),n}function Au(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Sl.updateTime(vu(e.updateTime)):void 0!==e.exists?Sl.exists(e.exists):Sl.none()}(t.currentDocument):Sl.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)ki("REQUEST_TIME"===t.setToServerValue),n=new pl;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new ml(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new vl(e)}else"increment"in t?n=new wl(e,t.increment):Ti();const r=Qi.fromServerFormat(t.fieldPath);return new El(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Eu(e,t.update.name),s=new Qo({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new fo(t.map((e=>Qi.fromServerFormat(e))))}(t.updateMask);return new Pl(i,s,e,n,r)}return new Dl(i,s,n,r)}if(t.delete){const r=Eu(e,t.delete);return new Ul(r,n)}if(t.verify){const r=Eu(e,t.verify);return new Fl(r,n)}return Ti()}function Ru(e,t){return{documents:[Iu(e,t.path)]}}function Du(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Iu(e,i);const s=function(e){if(0!==e.length)return Vu(sa.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Fu(e.field),direction:Lu(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=fu(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Pu(e){let t=Su(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ki(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ou(e);return t instanceof sa&&la(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new ta(ju(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Is(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Xo(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Xo(n,t)}(n.endAt)),Ra(t,i,o,s,a,"F",l,u)}function Ou(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ju(e.unaryFilter.field);return ia.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ju(e.unaryFilter.field);return ia.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ju(e.unaryFilter.field);return ia.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ju(e.unaryFilter.field);return ia.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ti()}}(e):void 0!==e.fieldFilter?function(e){return ia.create(ju(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ti()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return sa.create(e.compositeFilter.filters.map((e=>Ou(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ti()}}(e.compositeFilter.op))}(e):Ti()}function Lu(e){return uu[e]}function Mu(e){return cu[e]}function Uu(e){return hu[e]}function Fu(e){return{fieldPath:e.canonicalString()}}function ju(e){return Qi.fromServerFormat(e.fieldPath)}function Vu(e){return e instanceof ia?function(e){if("=="===e.op){if(jo(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NAN"}};if(Fo(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(jo(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NOT_NAN"}};if(Fo(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fu(e.field),op:Mu(e.op),value:e.value}}}(e):e instanceof sa?function(e){const t=e.getFilters().map((e=>Vu(e)));return 1===t.length?t[0]:{compositeFilter:{op:Uu(e.op),filters:t}}}(e):Ti()}function Bu(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function zu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class qu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hi.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Hi.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:mo.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new qu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Gu{constructor(e){this.ct=e}}function Hu(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ku(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:_u(e,t.key),fields:t.data.value.mapValue.fields,updateTime:pu(e,t.version.toTimestamp()),createTime:pu(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:$u(t.version)};else{if(!t.isUnknownDocument())return Ti();r.unknownDocument={path:n.path.toArray(),version:$u(t.version)}}return r}function Ku(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function $u(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Wu(e){const t=new Gi(e.seconds,e.nanoseconds);return Hi.fromTimestamp(t)}function Qu(e,t){const n=(t.baseMutations||[]).map((t=>Au(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Au(e.ct,t))),i=Gi.fromMillis(t.localWriteTimeMs);return new jl(t.batchId,i,n,r)}function Ju(e){const t=Wu(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Wu(e.lastLimboFreeSnapshotVersion):Hi.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return ki(1===e.documents.length),Ma(Da(Su(e.documents[0])))}(e.query):function(e){return Ma(Pu(e))}(e.query),new qu(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,mo.fromBase64String(e.resumeToken))}function Yu(e,t){const n=$u(t.snapshotVersion),r=$u(t.lastLimboFreeSnapshotVersion);let i;i=ka(t.target)?Ru(e.ct,t.target):Du(e.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Sa(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Xu(e){const t=Pu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ja(t,t.limit,"L"):t}function Zu(e,t){return new Bl(t.largestBatchId,Au(e.ct,t.overlayMutation))}function ec(e,t){const n=t.path.lastSegment();return[e,ks(t.path.popLast()),n]}function tc(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:$u(r.readTime),documentKey:ks(r.documentKey.path),largestBatchId:r.largestBatchId}}class nc{getBundleMetadata(e,t){return rc(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Wu(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return rc(e).put(function(e){return{bundleId:e.id,createTime:$u(vu(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return ic(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Xu(e.bundledQuery),readTime:Wu(e.readTime)}}(e)}))}saveNamedQuery(e,t){return ic(e).put(function(e){return{name:e.name,readTime:$u(vu(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function rc(e){return no(e,"bundles")}function ic(e){return no(e,"namedQueries")}class sc{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new sc(e,n)}getOverlay(e,t){return oc(e).get(ec(this.userId,t)).next((e=>e?Zu(this.serializer,e):null))}getOverlays(e,t){const n=Za();return us.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Bl(t,i);r.push(this.ht(e,s))})),us.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(ks(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(oc(e).j("collectionPathOverlayIndex",r))})),us.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Za(),i=ks(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return oc(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Zu(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Za();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return oc(e).J({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Zu(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return oc(e).put(function(e,t,n){const[r,i,s]=ec(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Nu(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function oc(e){return no(e,"documentOverlays")}class ac{Pt(e){return no(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((e=>{const t=null==e?void 0:e.value;return t?mo.fromUint8Array(t):mo.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class lc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(yo(e.integerValue));else if("doubleValue"in e){const n=yo(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Ss(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=vo(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(wo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?qo(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Bo(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ti()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(yo(o)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Ji.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}function uc(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function cc(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=uc(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}lc.vt=new lc;class hc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ot(n.value),n=t.next();this.Nt()}Lt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Bt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ot(e);else if(e<2048)this.Ot(960|e>>>6),this.Ot(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|e>>>12),this.Ot(128|63&e>>>6),this.Ot(128|63&e);else{const e=t.codePointAt(0);this.Ot(240|e>>>18),this.Ot(128|63&e>>>12),this.Ot(128|63&e>>>6),this.Ot(128|63&e)}}this.Nt()}kt(e){const t=this.qt(e),n=cc(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Kt(e){const t=this.qt(e),n=cc(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class dc{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class fc{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class pc{constructor(){this.jt=new hc,this.Ht=new dc(this.jt),this.Jt=new fc(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class mc{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new mc(this.indexId,this.documentKey,this.arrayValue,n)}}function gc(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=vc(e.arrayValue,t.arrayValue),0!==n?n:(n=vc(e.directionalValue,t.directionalValue),0!==n?n:Ji.comparator(e.documentKey,t.documentKey)))}function vc(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class yc{constructor(e){this.Xt=new uo(((e,t)=>Qi.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const e=t;e.isInequality()?this.Xt=this.Xt.add(e):this.tn.push(e)}}get nn(){return this.Xt.size>1}rn(e){if(ki(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Xi(e);if(void 0!==t&&!this.sn(t))return!1;const n=Zi(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.sn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const e=this.Xt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.on(e,t)||!this._n(this.en[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.en.length||!this._n(this.en[s++],e))return!1}return!0}an(){if(this.nn)return null;let e=new uo(Qi.comparator);const t=[];for(const n of this.tn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new es(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new es(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new es(n.field,"asc"===n.dir?0:1)));return new Yi(Yi.UNKNOWN_ID,this.collectionId,t,ts.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function wc(e){var t,n;if(ki(e instanceof ia||e instanceof sa),e instanceof ia){if(e instanceof wa){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>ia.create(e.field,"==",t))))||[];return sa.create(r,"or")}return e}const r=e.filters.map((e=>wc(e)));return sa.create(r,e.op)}function bc(e){if(0===e.getFilters().length)return[];const t=Sc(wc(e));return ki(Ic(t)),_c(t)||Ec(t)?[t]:t.getFilters()}function _c(e){return e instanceof ia}function Ec(e){return e instanceof sa&&la(e)}function Ic(e){return _c(e)||Ec(e)||function(e){if(e instanceof sa&&aa(e)){for(const t of e.getFilters())if(!_c(t)&&!Ec(t))return!1;return!0}return!1}(e)}function Sc(e){if(ki(e instanceof ia||e instanceof sa),e instanceof ia)return e;if(1===e.filters.length)return Sc(e.filters[0]);const t=e.filters.map((e=>Sc(e)));let n=sa.create(t,e.op);return n=xc(n),Ic(n)?n:(ki(n instanceof sa),ki(oa(n)),ki(n.filters.length>1),n.filters.reduce(((e,t)=>Tc(e,t))))}function Tc(e,t){let n;return ki(e instanceof ia||e instanceof sa),ki(t instanceof ia||t instanceof sa),n=e instanceof ia?t instanceof ia?function(e,t){return sa.create([e,t],"and")}(e,t):kc(e,t):t instanceof ia?kc(t,e):function(e,t){if(ki(e.filters.length>0&&t.filters.length>0),oa(e)&&oa(t))return da(e,t.getFilters());const n=aa(e)?e:t,r=aa(e)?t:e,i=n.filters.map((e=>Tc(e,r)));return sa.create(i,"or")}(e,t),xc(n)}function kc(e,t){if(oa(t))return da(t,e.getFilters());{const n=t.filters.map((t=>Tc(e,t)));return sa.create(n,"or")}}function xc(e){if(ki(e instanceof ia||e instanceof sa),e instanceof ia)return e;const t=e.getFilters();if(1===t.length)return xc(t[0]);if(ua(e))return e;const n=t.map((e=>xc(e))),r=[];return n.forEach((t=>{t instanceof ia?r.push(t):t instanceof sa&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:sa.create(r,e.op)}class Cc{constructor(){this.un=new Nc}addToCollectionParentIndex(e,t){return this.un.add(t),us.resolve()}getCollectionParents(e,t){return us.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return us.resolve()}deleteFieldIndex(e,t){return us.resolve()}deleteAllFieldIndexes(e){return us.resolve()}createTargetIndexes(e,t){return us.resolve()}getDocumentsMatchingTarget(e,t){return us.resolve(null)}getIndexType(e,t){return us.resolve(0)}getFieldIndexes(e,t){return us.resolve([])}getNextCollectionGroupToUpdate(e){return us.resolve(null)}getMinOffset(e,t){return us.resolve(is.min())}getMinOffsetFromCollectionGroup(e,t){return us.resolve(is.min())}updateCollectionGroup(e,t,n){return us.resolve()}updateIndexEntries(e,t){return us.resolve()}}class Nc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new uo($i.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new uo($i.comparator)).toArray()}}const Ac=new Uint8Array(0);class Rc{constructor(e,t){this.databaseId=t,this.cn=new Nc,this.ln=new $a((e=>Sa(e)),((e,t)=>Ta(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.cn.add(t)}));const i={collectionId:n,parent:ks(r)};return Dc(e).put(i)}return us.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[qi(t),""],!1,!0);return Dc(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ns(r.parent))}return n}))}addFieldIndex(e,t){const n=Oc(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Lc(e);return i.next((e=>{n.put(tc(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Oc(e),r=Lc(e),i=Pc(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Oc(e),n=Pc(e),r=Lc(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return us.forEach(this.hn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new yc(t).an();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Pc(e);let r=!0;const i=new Map;return us.forEach(this.hn(t),(t=>this.Pn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=il();const r=[];return us.forEach(i,((i,s)=>{_i("IndexedDbIndexManager",`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`}(i)} to execute ${Sa(t)}`);const o=function(e,t){const n=Xi(t);if(void 0===n)return null;for(const r of xa(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of Zi(t))for(const t of xa(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Zi(t)){const t=0===i.kind?Ca(e,i.fieldPath,e.startAt):Na(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Xo(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of Zi(t)){const t=0===i.kind?Na(e,i.fieldPath,e.endAt):Ca(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Xo(n,r)}(s,i),c=this.In(i,s,l),h=this.In(i,s,u),d=this.Tn(i,s,a),f=this.En(i.indexId,o,c,l.inclusive,h,u.inclusive,d);return us.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=Ji.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return us.resolve(null)}))}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:bc(sa.create(e.filters,"and")).map((t=>Ia(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,t),t)}En(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.dn(t[c/l]):Ac,h=this.An(e,a,n[c%l],r),d=this.Rn(e,a,i[c%l],s),f=o.map((t=>this.An(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}An(e,t,n,r){const i=new mc(e,Ji.empty(),t,n);return r?i:i.Zt()}Rn(e,t,n,r){const i=new mc(e,Ji.empty(),t,n);return r?i.Zt():i}Pn(e,t){const n=new yc(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.rn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.hn(t);return us.forEach(r,(t=>this.Pn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new uo(Qi.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}Vn(e,t){const n=new pc;for(const r of Zi(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Yt(r.kind);lc.vt.It(e,i)}return n.zt()}dn(e){const t=new pc;return lc.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const n=new pc;return lc.vt.It(Lo(this.databaseId,t),n.Yt(function(e){const t=Zi(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.zt()}Tn(e,t,n){if(null===n)return[];let r=[];r.push(new pc);let i=0;for(const s of Zi(e)){const e=n[i++];for(const n of r)if(this.fn(t,s.fieldPath)&&Uo(e))r=this.gn(r,s,e);else{const t=n.Yt(s.kind);lc.vt.It(e,t)}}return this.pn(r)}In(e,t,n){return this.Tn(e,t,n.position)}pn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].zt();return t}gn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new pc;n.seed(e.zt()),lc.vt.It(s,n.Yt(t.kind)),i.push(n)}return i}fn(e,t){return!!e.filters.find((e=>e instanceof ia&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Oc(e),r=Lc(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return us.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new ts(t.sequenceNumber,new is(Wu(t.readTime),new Ji(Ns(t.documentKey)),t.largestBatchId)):ts.empty(),r=e.fields.map((e=>{let[t,n]=e;return new es(Qi.fromServerFormat(t),n)}));return new Yi(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Bi(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Oc(e),i=Lc(e);return this.yn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>us.forEach(t,(t=>i.put(tc(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return us.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?us.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),us.forEach(i,(n=>this.wn(e,t,n).next((t=>{const i=this.Sn(r,n);return t.isEqual(i)?us.resolve():this.bn(e,r,n,t,i)})))))))}))}Dn(e,t,n,r){return Pc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}vn(e,t,n,r){return Pc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}wn(e,t,n){const r=Pc(e);let i=new uo(gc);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},((e,r)=>{i=i.add(new mc(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}Sn(e,t){let n=new uo(gc);const r=this.Vn(t,e);if(null==r)return n;const i=Xi(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Uo(s))for(const i of s.arrayValue.values||[])n=n.add(new mc(t.indexId,e.key,this.dn(i),r))}else n=n.add(new mc(t.indexId,e.key,Ac,r));return n}bn(e,t,n,r,i){_i("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=ho(s),l=ho(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=ho(o)):t?(i(a),a=ho(s)):(a=ho(s),l=ho(o))}}(r,i,gc,(r=>{s.push(this.Dn(e,t,n,r))}),(r=>{s.push(this.vn(e,t,n,r))})),us.waitFor(s)}yn(e){let t=1;return Lc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>gc(e,t))).filter(((e,t,n)=>!t||0!==gc(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=gc(s,e),i=gc(s,t);if(0===n)r[0]=e.Zt();else if(n>0&&i<0)r.push(s),r.push(s.Zt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Cn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Ac,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Ac,[]];i.push(IDBKeyRange.bound(e,t))}return i}Cn(e,t){return gc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Mc)}getMinOffset(e,t){return us.mapArray(this.hn(t),(t=>this.Pn(e,t).next((e=>e||Ti())))).next(Mc)}}function Dc(e){return no(e,"collectionParents")}function Pc(e){return no(e,"indexEntries")}function Oc(e){return no(e,"indexConfiguration")}function Lc(e){return no(e,"indexState")}function Mc(e){ki(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;ss(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new is(t.readTime,t.documentKey,n)}const Uc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Fc(e,Fc.DEFAULT_COLLECTION_PERCENTILE,Fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function jc(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{ki(1===a)})));const u=[];for(const c of n.mutations){const e=Ds(t,c.key.path,n.batchId);s.push(i.delete(e)),u.push(c.key)}return us.waitFor(s).next((()=>u))}function Vc(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ti();t=e.noDocument}return JSON.stringify(t).length}Fc.DEFAULT_COLLECTION_PERCENTILE=10,Fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fc.DEFAULT=new Fc(41943040,Fc.DEFAULT_COLLECTION_PERCENTILE,Fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fc.DISABLED=new Fc(-1,0,0);class Bc{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Fn={}}static lt(e,t,n,r){ki(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Bc(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qc(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Gc(e),s=qc(e);return s.add({}).next((o=>{ki("number"==typeof o);const a=new jl(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Nu(e.ct,t))),i=n.mutations.map((t=>Nu(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new uo(((e,t)=>Bi(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Ds(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,Ps))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Fn[o]=a.keys()})),us.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return qc(e).get(t).next((e=>e?(ki(e.userId===this.userId),Qu(this.serializer,e)):null))}Mn(e,t){return this.Fn[t]?us.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Fn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return qc(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(ki(t.batchId>=n),i=Qu(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return qc(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qc(e).U("userMutationsIndex",t).next((e=>e.map((e=>Qu(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Rs(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Gc(e).J({range:r},((n,r,s)=>{const[o,a,l]=n,u=Ns(a);if(o===this.userId&&t.path.isEqual(u))return qc(e).get(l).next((e=>{if(!e)throw Ti();ki(e.userId===this.userId),i.push(Qu(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new uo(Bi);const r=[];return t.forEach((t=>{const i=Rs(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Gc(e).J({range:s},((e,r,i)=>{const[s,o,a]=e,l=Ns(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),us.waitFor(r).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Rs(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new uo(Bi);return Gc(e).J({range:s},((e,t,i)=>{const[s,a,l]=e,u=Ns(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):i.done()})).next((()=>this.xn(e,o)))}xn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(qc(e).get(t).next((e=>{if(null===e)throw Ti();ki(e.userId===this.userId),n.push(Qu(this.serializer,e))})))})),us.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return jc(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.On(t.batchId)})),us.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return us.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Gc(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Ns(e[1]);r.push(t)}else n.done()})).next((()=>{ki(0===r.length)}))}))}containsKey(e,t){return zc(e,this.userId,t)}Nn(e){return Hc(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function zc(e,t,n){const r=Rs(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Gc(e).J({range:s,H:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function qc(e){return no(e,"mutations")}function Gc(e){return no(e,"documentMutations")}function Hc(e){return no(e,"mutationQueues")}class Kc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Kc(0)}static kn(){return new Kc(-1)}}class $c{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next((t=>{const n=new Kc(t.highestTargetId);return t.highestTargetId=n.next(),this.Qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((e=>Hi.fromTimestamp(new Gi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.qn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Qn(e,r))))}addTargetData(e,t){return this.Kn(e,t).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(t,n),this.Qn(e,n))))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Wc(e).delete(t.targetId))).next((()=>this.qn(e))).next((t=>(ki(t.targetCount>0),t.targetCount-=1,this.Qn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Wc(e).J(((s,o)=>{const a=Ju(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>us.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Wc(e).J(((e,n)=>{const r=Ju(n);t(r)}))}qn(e){return Qc(e).get("targetGlobalKey").next((e=>(ki(null!==e),e)))}Qn(e,t){return Qc(e).put("targetGlobalKey",t)}Kn(e,t){return Wc(e).put(Yu(this.serializer,t))}$n(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Sa(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Wc(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Ju(n);Ta(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Jc(e);return t.forEach((t=>{const s=ks(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),us.waitFor(r)}removeMatchingKeys(e,t,n){const r=Jc(e);return us.forEach(t,(t=>{const i=ks(t.path);return us.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Jc(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Jc(e);let i=il();return r.J({range:n,H:!0},((e,t,n)=>{const r=Ns(e[1]),s=new Ji(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=ks(t.path),r=IDBKeyRange.bound([n],[qi(n)],!1,!0);let i=0;return Jc(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return Wc(e).get(t).next((e=>e?Ju(e):null))}}function Wc(e){return no(e,"targets")}function Qc(e){return no(e,"targetGlobal")}function Jc(e){return no(e,"targetDocuments")}function Yc(e,t){let[n,r]=e,[i,s]=t;const o=Bi(n,i);return 0===o?Bi(r,s):o}class Xc{constructor(e){this.Un=e,this.buffer=new uo(Yc),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Yc(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Zc{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){_i("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ms(e)?_i("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await ls(e)}await this.Hn(3e5)}))}}class eh{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return us.resolve(Es.oe);const n=new Xc(t);return this.Jn.forEachTarget(e,(e=>n.zn(e.sequenceNumber))).next((()=>this.Jn.Zn(e,(e=>n.zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(_i("LruGarbageCollector","Garbage collection skipped; disabled"),us.resolve(Uc)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(_i("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Uc):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(_i("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),bi()<=yn.DEBUG&&_i("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-u}ms`),us.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function th(e,t){return new eh(e,t)}class nh{constructor(e,t){this.db=e,this.garbageCollector=th(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}er(e){let t=0;return this.Zn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,((e,n)=>t(n)))}addReference(e,t,n){return rh(e,n)}removeReference(e,t,n){return rh(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return rh(e,t)}nr(e,t){return function(e,t){let n=!1;return Hc(e).Y((r=>zc(e,r,t).next((e=>(e&&(n=!0),us.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.tr(e,((s,o)=>{if(o<=t){const t=this.nr(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Hi.min()),Jc(e).delete(function(e){return[0,ks(e.path)]}(s)))))}));r.push(t)}})).next((()=>us.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return rh(e,t)}tr(e,t){const n=Jc(e);let r,i=Es.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Es.oe&&t(new Ji(Ns(r)),i),i=l,r=a):i=Es.oe})).next((()=>{i!==Es.oe&&t(new Ji(Ns(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rh(e,t){return Jc(e).put(function(e,t){return{targetId:0,path:ks(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ih{constructor(){this.changes=new $a((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yo.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?us.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class sh{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return uh(e).put(n)}removeEntry(e,t,n){return uh(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ku(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.rr(e,n))))}getEntry(e,t){let n=Yo.newInvalidDocument(t);return uh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ch(t))},((e,r)=>{n=this.ir(t,r)})).next((()=>n))}sr(e,t){let n={size:0,document:Yo.newInvalidDocument(t)};return uh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ch(t))},((e,r)=>{n={document:this.ir(t,r),size:Vc(r)}})).next((()=>n))}getEntries(e,t){let n=Qa();return this._r(e,t,((e,t)=>{const r=this.ir(e,t);n=n.insert(e,r)})).next((()=>n))}ar(e,t){let n=Qa(),r=new oo(Ji.comparator);return this._r(e,t,((e,t)=>{const i=this.ir(e,t);n=n.insert(e,i),r=r.insert(e,Vc(t))})).next((()=>({documents:n,ur:r})))}_r(e,t,n){if(t.isEmpty())return us.resolve();let r=new uo(dh);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(ch(r.first()),ch(r.last())),s=r.getIterator();let o=s.getNext();return uh(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Ji.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&dh(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.$(ch(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Ku(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return uh(e).U(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Qa();for(const i of e){const e=this.ir(Ji.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(qa(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Qa();const s=hh(t,n),o=hh(t,is.max());return uh(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.ir(Ji.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new ah(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return lh(e).get("remoteDocumentGlobalKey").next((e=>(ki(!!e),e)))}rr(e,t){return lh(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Cu(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ji.fromSegments(t.noDocument.path),r=Wu(t.noDocument.readTime);n=Yo.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ti();{const e=Ji.fromSegments(t.unknownDocument.path),r=Wu(t.unknownDocument.version);n=Yo.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Gi(e[0],e[1]);return Hi.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Hi.min()))return e}return Yo.newInvalidDocument(e)}}function oh(e){return new sh(e)}class ah extends ih{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new $a((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new uo(((e,t)=>Bi(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.lr.get(i);if(t.push(this.cr.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Hu(this.cr.serializer,s);r=r.add(i.path.popLast());const l=Vc(a);n+=l-o.size,t.push(this.cr.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Hu(this.cr.serializer,s.convertToNoDocument(Hi.min()));t.push(this.cr.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.cr.updateMetadata(e,n)),us.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next((e=>(this.lr.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.cr.ar(e,t).next((e=>{let{documents:t,ur:n}=e;return n.forEach(((e,n)=>{this.lr.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function lh(e){return no(e,"remoteDocumentGlobal")}function uh(e){return no(e,"remoteDocumentsV14")}function ch(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function hh(e,t){const n=t.documentKey.path.toArray();return[e,Ku(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function dh(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Bi(n[s],r[s]),i)return i;return i=Bi(n.length,r.length),i||(i=Bi(n[n.length-2],r[r.length-2]),i||Bi(n[n.length-1],r[r.length-1]))}class fh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ph{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Nl(n.mutation,e,fo.empty(),Gi.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,il()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:il();const r=Za();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Ya();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Za();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,il())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Qa();const s=tl(),o=tl();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Pl)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Nl(o.mutation,t,o.mutation.getFieldMask(),Gi.now())):s.set(t.key,fo.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new fh(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=tl();let r=new oo(((e,t)=>e-t)),i=il();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||fo.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||il()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=el();l.forEach((e=>{if(!i.has(e)){const r=xl(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return us.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ji.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Oa(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):us.resolve(Za());let o=-1,a=i;return s.next((t=>us.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?us.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,il()))).next((e=>({batchId:o,changes:Xa(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ji(t)).next((e=>{let t=Ya();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Ya();return this.indexManager.getCollectionParents(e,i).next((o=>us.forEach(o,(o=>{const a=function(e,t){return new Aa(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Yo.newInvalidDocument(r)))}));let n=Ya();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Nl(s.mutation,r,fo.empty(),Gi.now()),qa(t,r)&&(n=n.insert(e,r))})),n}))}}class mh{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return us.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:vu(e.createTime)}}(t)),us.resolve()}getNamedQuery(e,t){return us.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Xu(e.bundledQuery),readTime:vu(e.readTime)}}(t)),us.resolve()}}class gh{constructor(){this.overlays=new oo(Ji.comparator),this.Ir=new Map}getOverlay(e,t){return us.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Za();return us.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),us.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),us.resolve()}getOverlaysForCollection(e,t,n){const r=Za(),i=t.length+1,s=new Ji(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return us.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new oo(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Za(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Za(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return us.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Bl(t,n));let i=this.Ir.get(t);void 0===i&&(i=il(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class vh{constructor(){this.sessionToken=mo.EMPTY_BYTE_STRING}getSessionToken(e){return us.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,us.resolve()}}class yh{constructor(){this.Tr=new uo(wh.Er),this.dr=new uo(wh.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new wh(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new wh(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new Ji(new $i([])),n=new wh(t,e),r=new wh(t,e+1),i=[];return this.dr.forEachInRange([n,r],(e=>{this.Vr(e),i.push(e.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ji(new $i([])),n=new wh(t,e),r=new wh(t,e+1);let i=il();return this.dr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new wh(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class wh{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ji.comparator(e.key,t.key)||Bi(e.wr,t.wr)}static Ar(e,t){return Bi(e.wr,t.wr)||Ji.comparator(e.key,t.key)}}class bh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new uo(wh.Er)}checkEmpty(e){return us.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new jl(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.br=this.br.add(new wh(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return us.resolve(s)}lookupMutationBatch(e,t){return us.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return us.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return us.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return us.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new wh(t,0),r=new wh(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],(e=>{const t=this.Dr(e.wr);i.push(t)})),us.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new uo(Bi);return t.forEach((e=>{const t=new wh(e,0),r=new wh(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],(e=>{n=n.add(e.wr)}))})),us.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ji.isDocumentKey(i)||(i=i.child(""));const s=new wh(new Ji(i),0);let o=new uo(Bi);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.wr)),!0)}),s),us.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ki(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return us.forEach(t.mutations,(r=>{const i=new wh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new wh(t,0),r=this.br.firstAfterOrEqual(n);return us.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,us.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class _h{constructor(e){this.Mr=e,this.docs=new oo(Ji.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return us.resolve(n?n.document.mutableCopy():Yo.newInvalidDocument(t))}getEntries(e,t){let n=Qa();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Yo.newInvalidDocument(e))})),us.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Qa();const s=t.path,o=new Ji(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ss(rs(o),n)<=0||(r.has(o.key)||qa(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return us.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ti()}Or(e,t){return us.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Eh(this)}getSize(e){return us.resolve(this.size)}}class Eh extends ih{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)})),us.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Ih{constructor(e){this.persistence=e,this.Nr=new $a((e=>Sa(e)),Ta),this.lastRemoteSnapshotVersion=Hi.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yh,this.targetCount=0,this.kr=Kc.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),us.resolve()}getLastRemoteSnapshotVersion(e){return us.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return us.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),us.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),us.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Kc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,us.resolve()}updateTargetData(e,t){return this.Kn(t),us.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,us.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),us.waitFor(i).next((()=>r))}getTargetCount(e){return us.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return us.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),us.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),us.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),us.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return us.resolve(n)}containsKey(e,t){return us.resolve(this.Br.containsKey(t))}}class Sh{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Es(0),this.Kr=!1,this.Kr=!0,this.$r=new vh,this.referenceDelegate=e(this),this.Ur=new Ih(this),this.indexManager=new Cc,this.remoteDocumentCache=function(e){return new _h(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new Gu(t),this.Gr=new mh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new bh(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){_i("MemoryPersistence","Starting transaction:",e);const r=new Th(this.Qr.next());return this.referenceDelegate.zr(),n(r).next((e=>this.referenceDelegate.jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Hr(e,t){return us.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class Th extends as{constructor(e){super(),this.currentSequenceNumber=e}}class kh{constructor(e){this.persistence=e,this.Jr=new yh,this.Yr=null}static Zr(e){return new kh(e)}get Xr(){if(this.Yr)return this.Yr;throw Ti()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),us.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),us.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),us.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return us.forEach(this.Xr,(n=>{const r=Ji.fromPath(n);return this.ei(e,r).next((e=>{e||t.removeEntry(r,Hi.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return us.or([()=>us.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class xh{constructor(e){this.serializer=e}O(e,t,n,r){const i=new cs("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",As,{unique:!0}),e.createObjectStore("documentMutations")}(e),Ch(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=us.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Ch(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Hi.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",As,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return us.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.ni(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i))))),n<7&&r>=7&&(s=s.next((()=>this.ii(i)))),n<8&&r>=8&&(s=s.next((()=>this.si(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.oi(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Hs});t.createIndex("collectionPathOverlayIndex",Ks,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",$s,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Os});t.createIndex("documentKeyIndex",Ls),t.createIndex("collectionGroupIndex",Ms)}(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ai(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Bs}).createIndex("sequenceNumberIndex",zs,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:qs}).createIndex("documentKeyIndex",Gs,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),n<17&&r>=17&&(s=s.next((()=>{!function(e){e.createObjectStore("globals",{keyPath:"name"})}(e)}))),s}ri(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=Vc(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>us.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>us.forEach(n,(n=>{ki(n.userId===t.userId);const r=Qu(this.serializer,n);return jc(e,t.userId,r).next((()=>{}))}))))}))))}ii(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new $i(n),o=function(e){return[0,ks(e)]}(s);r.push(t.get(o).next((n=>n?us.resolve():(n=>t.put({targetId:0,path:ks(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>us.waitFor(r)))}))}si(e,t){e.createObjectStore("collectionParents",{keyPath:Vs});const n=t.store("collectionParents"),r=new Nc,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:ks(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new $i(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,s]=e;const o=Ns(r);return i(o.popLast())}))))}oi(e){const t=e.store("targets");return t.J(((e,n)=>{const r=Ju(n),i=Yu(this.serializer,r);return t.put(i)}))}_i(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Ji($i.fromString(e.document.name).popFirst(5)):e.noDocument?Ji.fromSegments(e.noDocument.path):e.unknownDocument?Ji.fromSegments(e.unknownDocument.path):Ti()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>us.waitFor(r)))}ai(e,t){const n=t.store("mutations"),r=oh(this.serializer),i=new Sh(kh.Zr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:il();Qu(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),us.forEach(n,((e,n)=>{const s=new vi(n),o=sc.lt(this.serializer,s),a=i.getIndexManager(s),l=Bc.lt(s,this.serializer,a,i.referenceDelegate);return new ph(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new to(t,Es.oe),e).next()}))}))}}function Ch(e){e.createObjectStore("targetDocuments",{keyPath:Fs}).createIndex("documentTargetsIndex",js,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Us,{unique:!0}),e.createObjectStore("targetGlobal")}const Nh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ah{constructor(e,t,n,r,i,s,o,a,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:17;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ui=i,this.window=s,this.document=o,this.ci=l,this.li=u,this.hi=c,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=e=>Promise.resolve(),!Ah.D())throw new Ni(Ci.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nh(this,r),this.Ai=t+"main",this.serializer=new Gu(a),this.Ri=new hs(this.Ai,this.hi,new xh(this.serializer)),this.$r=new ac,this.Ur=new $c(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oh(this.serializer),this.Gr=new nc,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===u&&Ei("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ni(Ci.FAILED_PRECONDITION,Nh);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new Es(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Dh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((t=>this.isPrimary&&!t?this.bi(e).next((()=>!1)):!!t&&this.Di(e).next((()=>!0)))))).catch((e=>{if(ms(e))return _i("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _i("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return Rh(e).get("owner").next((e=>us.resolve(this.vi(e))))}Ci(e){return Dh(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=no(e,"clientMetadata");return t.U().next((e=>{const n=this.xi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return us.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?us.resolve(!0):Rh(e).get("owner").next((t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Ni(Ci.FAILED_PRECONDITION,Nh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dh(e).U().next((e=>void 0===this.xi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&_i("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new to(e,Es.oe);return this.bi(t).next((()=>this.Ci(t)))})),this.Ri.close(),this.qi()}xi(e,t){return e.filter((e=>this.Mi(e.updateTimeMs,t)&&!this.Ni(e.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>Dh(e).U().next((e=>this.xi(e,18e5).map((e=>e.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Bc.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Rc(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return sc.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,n){_i("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 17===e?eo:16===e?Zs:15===e?Xs:14===e?Ys:13===e?Js:12===e?Qs:11===e?Ws:void Ti()}(this.hi);let s;return this.Ri.runTransaction(e,r,i,(r=>(s=new to(r,this.Qr?this.Qr.next():Es.oe),"readwrite-primary"===t?this.wi(s).next((e=>!!e||this.Si(s))).next((t=>{if(!t)throw Ei(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new Ni(Ci.FAILED_PRECONDITION,os);return n(s)})).next((e=>this.Di(s).next((()=>e)))):this.Ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Ki(e){return Rh(e).get("owner").next((e=>{if(null!==e&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ni(Ci.FAILED_PRECONDITION,Nh)}))}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rh(e).put("owner",t)}static D(){return hs.D()}bi(e){const t=Rh(e);return t.get("owner").next((e=>this.vi(e)?(_i("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):us.resolve()))}Mi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ei(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const e=/(?:Version|Mobile)\/1[456]/;Yt()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const n=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return _i("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Ei("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(eT){Ei("Failed to set zombie client id.",eT)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch(eT){}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rh(e){return no(e,"owner")}function Dh(e){return no(e,"clientMetadata")}function Ph(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Oh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=il(),r=il();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Oh(e,t.fromCache,n,r)}}class Lh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Mh{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=Yt()?8:ds(Ht())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Zi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Lh;return this.Xi(e,t,n).next((r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)}))})).next((()=>i.result))}es(e,t,n,r){return n.documentReadCount<this.ji?(bi()<=yn.DEBUG&&_i("QueryEngine","SDK will not create cache indexes for query:",za(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),us.resolve()):(bi()<=yn.DEBUG&&_i("QueryEngine","Query:",za(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(bi()<=yn.DEBUG&&_i("QueryEngine","The SDK decides to create cache indexes for query:",za(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ma(t))):us.resolve())}Yi(e,t){if(Pa(t))return us.resolve(null);let n=Ma(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=ja(t,null,"F"),n=Ma(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=il(...r);return this.Ji.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,ja(t,null,"F")):this.rs(e,s,t,n)}))))})))))}Zi(e,t,n,r){return Pa(t)||r.isEqual(Hi.min())?us.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?us.resolve(null):(bi()<=yn.DEBUG&&_i("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),za(t)),this.rs(e,s,t,ns(r,-1)).next((e=>e)))}))}ts(e,t){let n=new uo(Ha(e));return t.forEach(((t,r)=>{qa(e,r)&&(n=n.add(r))})),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return bi()<=yn.DEBUG&&_i("QueryEngine","Using full collection scan to execute query:",za(t)),this.Ji.getDocumentsMatchingQuery(e,t,is.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Uh{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new oo(Bi),this._s=new $a((e=>Sa(e)),Ta),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ph(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function Fh(e,t,n,r){return new Uh(e,t,n,r)}async function jh(e,t){const n=xi(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=il();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({hs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Vh(e){const t=xi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function Bh(e,t,n){let r=il(),i=il();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Qa();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Hi.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):_i("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Ps:r,Is:i}}))}function zh(e,t){const n=xi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function qh(e,t){const n=xi(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ur.getTargetData(e,t).next((i=>i?(r=i,us.resolve(r)):n.Ur.allocateTargetId(e).next((i=>(r=new qu(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}async function Gh(e,t,n){const r=xi(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ms(e))throw e;_i("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function Hh(e,t,n){const r=xi(e);let i=Hi.min(),s=il();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=xi(e),i=r._s.get(n);return void 0!==i?us.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,Ma(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:Hi.min(),n?s:il()))).next((e=>(Wh(r,Ga(t),e),{documents:e,Ts:s})))))}function Kh(e,t){const n=xi(e),r=xi(n.Ur),i=n.os.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function $h(e,t){const n=xi(e),r=n.us.get(t)||Hi.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.cs.getAllFromCollectionGroup(e,t,ns(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Wh(n,t,e),e)))}function Wh(e,t,n){let r=e.us.get(t)||Hi.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.us.set(t,r)}async function Qh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:il();const r=await qh(e,Ma(Xu(t.bundledQuery))),i=xi(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=vu(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Gr.saveNamedQuery(e,t);const o=r.withResumeToken(mo.EMPTY_BYTE_STRING,s);return i.os=i.os.insert(o.targetId,o),i.Ur.updateTargetData(e,o).next((()=>i.Ur.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Ur.addMatchingKeys(e,n,r.targetId))).next((()=>i.Gr.saveNamedQuery(e,t)))}))}function Jh(e,t){return`firestore_clients_${e}_${t}`}function Yh(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Xh(e,t){return`firestore_targets_${e}_${t}`}class Zh{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Rs(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ni(r.error.code,r.error.message))),s?new Zh(e,t,r.state,i):(Ei("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ed{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Rs(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Ni(n.error.code,n.error.message))),i?new ed(e,n.state,r):(Ei("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class td{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=ol();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Ts(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new td(e,i):(Ei("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class nd{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new nd(t.clientId,t.onlineState):(Ei("SharedClientState",`Failed to parse online state: ${e}`),null)}}class rd{constructor(){this.activeTargetIds=ol()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class id{constructor(e,t,n,r,i){this.window=e,this.ui=t,this.persistenceKey=n,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new oo(Bi),this.started=!1,this.bs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=Jh(this.persistenceKey,this.ps),this.vs=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new rd),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Os=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const e=this.getItem(Jh(this.persistenceKey,n));if(e){const t=td.Rs(n,e);t&&(this.Ss=this.Ss.insert(t.clientId,t))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const e=this.Ls(t);e&&this.Bs(e)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,n){this.qs(e,t,n),this.Qs(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(Xh(this.persistenceKey,e));if(t){const r=ed.Rs(e,t);r&&(n=r.state)}}return t&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xh(this.persistenceKey,e))}updateQueryState(e,t,n){this.$s(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Qs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return _i("SharedClientState","READ",e,t),t}setItem(e,t){_i("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){_i("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(_i("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ei("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Cs.test(t.key)){if(null==t.newValue){const e=this.Gs(t.key);return this.zs(e,null)}{const e=this.js(t.key,t.newValue);if(e)return this.zs(e.clientId,e)}}else if(this.Fs.test(t.key)){if(null!==t.newValue){const e=this.Hs(t.key,t.newValue);if(e)return this.Js(e)}}else if(this.Ms.test(t.key)){if(null!==t.newValue){const e=this.Ys(t.key,t.newValue);if(e)return this.Zs(e)}}else if(t.key===this.xs){if(null!==t.newValue){const e=this.Ls(t.newValue);if(e)return this.Bs(e)}}else if(t.key===this.vs){const e=function(e){let t=Es.oe;if(null!=e)try{const n=JSON.parse(e);ki("number"==typeof n),t=n}catch(e){Ei("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Es.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Os){const e=this.Xs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.eo(e))))}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,n){const r=new Zh(this.currentUser,e,t,n),i=Yh(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Vs())}Qs(e){const t=Yh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,n){const r=Xh(this.persistenceKey,e),i=new ed(e,t,n);this.setItem(r,i.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const n=this.Gs(e);return td.Rs(n,t)}Hs(e,t){const n=this.Fs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Zh.Rs(new vi(i),r,t)}Ys(e,t){const n=this.Ms.exec(e),r=Number(n[1]);return ed.Rs(r,t)}Ls(e){return nd.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);_i("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const n=t?this.Ss.insert(e,t):this.Ss.remove(e),r=this.ks(this.Ss),i=this.ks(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.io(s,o).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=ol();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class sd{constructor(){this.so=new rd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new rd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class od{_o(e){}shutdown(){}}class ad{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){_i("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){_i("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ld=null;function ud(){return null===ld?ld=268435456+Math.round(2147483648*Math.random()):ld++,"0x"+ld.toString(16)}const cd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hd{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const dd="WebChannelConnection";class fd extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=ud(),o=this.xo(e,t.toUriEncodedString());_i("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,i),this.No(e,o,a,n).then((t=>(_i("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Ii("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+yi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=cd[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=ud();return new Promise(((s,o)=>{const a=new oi;a.setWithCredentials(!0),a.listenOnce(li.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ui.NO_ERROR:const t=a.getResponseJson();_i(dd,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case ui.TIMEOUT:_i(dd,`RPC '${e}' ${i} timed out`),o(new Ni(Ci.DEADLINE_EXCEEDED,"Request time out"));break;case ui.HTTP_ERROR:const n=a.getStatus();if(_i(dd,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ci).indexOf(t)>=0?t:Ci.UNKNOWN}(t.status);o(new Ni(e,t.message))}else o(new Ni(Ci.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ni(Ci.UNAVAILABLE,"Connection failed."));break;default:Ti()}}finally{_i(dd,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);_i(dd,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Bo(e,t,n){const r=ud(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fi(),o=di(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");_i(dd,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new hd({Io:t=>{d?_i(dd,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(_i(dd,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),_i(dd,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},To:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,ai.EventType.OPEN,(()=>{d||(_i(dd,`RPC '${e}' stream ${r} transport opened.`),f.yo())})),p(c,ai.EventType.CLOSE,(()=>{d||(d=!0,_i(dd,`RPC '${e}' stream ${r} transport closed`),f.So())})),p(c,ai.EventType.ERROR,(t=>{d||(d=!0,Ii(dd,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new Ni(Ci.UNAVAILABLE,"The operation could not be completed")))})),p(c,ai.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];ki(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){_i(dd,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=ql[e];if(void 0!==t)return Kl(t)}(t),i=o.message;void 0===n&&(n=Ci.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.So(new Ni(n,i)),c.close()}else _i(dd,`RPC '${e}' stream ${r} received:`,i),f.bo(i)}})),p(o,hi.STAT_EVENT,(t=>{t.stat===ci.PROXY?_i(dd,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ci.NOPROXY&&_i(dd,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.wo()}),0),f}}function pd(){return"undefined"!=typeof window?window:null}function md(){return"undefined"!=typeof document?document:null}function gd(e){return new du(e,!0)}class vd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&_i("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class yd{constructor(e,t,n,r,i,s,o,a){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vd(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Ci.RESOURCE_EXHAUSTED?(Ei(t.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Ci.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)}),(t=>{e((()=>{const e=new Ni(Ci.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return _i("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(_i("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wd extends yd{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ti()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ki(void 0===t||"string"==typeof t),mo.fromBase64String(t||"")):(ki(void 0===t||t instanceof Buffer||t instanceof Uint8Array),mo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ci.UNKNOWN:Kl(e.code);return new Ni(t,e.message||"")}(o);n=new iu(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Eu(e,r.document.name),s=vu(r.document.updateTime),o=r.document.createTime?vu(r.document.createTime):Hi.min(),a=new Qo({mapValue:{fields:r.document.fields}}),l=Yo.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new nu(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Eu(e,r.document),s=r.readTime?vu(r.readTime):Hi.min(),o=Yo.newNoDocument(i,s),a=r.removedTargetIds||[];n=new nu([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Eu(e,r.document),s=r.removedTargetIds||[];n=new nu([],s,i,null)}else{if(!("filter"in t))return Ti();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new zl(r,i),o=e.targetId;n=new ru(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Hi.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Hi.min():t.readTime?vu(t.readTime):Hi.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Tu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=ka(r)?{documents:Ru(e,r)}:{query:Du(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=mu(e,t.resumeToken);const r=fu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Hi.min())>0){n.readTime=pu(e,t.snapshotVersion.toTimestamp());const r=fu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ti()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Tu(this.serializer),t.removeTarget=e,this.a_(t)}}class bd extends yd{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ki(!!e.streamToken),this.lastStreamToken=e.streamToken,ki(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){ki(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(ki(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?vu(e.updateTime):vu(t);return n.isEqual(Hi.min())&&(n=vu(t)),new Il(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=vu(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Tu(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Nu(this.serializer,e)))};this.a_(t)}}class _d extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Ni(Ci.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Mo(e,wu(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ci.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ni(Ci.UNKNOWN,e.toString())}))}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Lo(e,wu(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ci.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ni(Ci.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Ed{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ei(t),this.D_=!1):_i("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Id{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((e=>{n.enqueueAndForget((async()=>{Dd(this)&&(_i("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=xi(e);t.L_.add(4),await Td(t),t.q_.set("Unknown"),t.L_.delete(4),await Sd(t)}(this))}))})),this.q_=new Ed(n,r)}}async function Sd(e){if(Dd(e))for(const t of e.B_)await t(!0)}async function Td(e){for(const t of e.B_)await t(!1)}function kd(e,t){const n=xi(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Rd(n)?Ad(n):Yd(n).r_()&&Cd(n,t))}function xd(e,t){const n=xi(e),r=Yd(n);n.N_.delete(t),r.r_()&&Nd(n,t),0===n.N_.size&&(r.r_()?r.o_():Dd(n)&&n.q_.set("Unknown"))}function Cd(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Hi.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Yd(e).A_(t)}function Nd(e,t){e.Q_.xe(t),Yd(e).R_(t)}function Ad(e){e.Q_=new ou({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Yd(e).start(),e.q_.v_()}function Rd(e){return Dd(e)&&!Yd(e).n_()&&e.N_.size>0}function Dd(e){return 0===xi(e).L_.size}function Pd(e){e.Q_=void 0}async function Od(e){e.q_.set("Online")}async function Ld(e){e.N_.forEach(((t,n)=>{Cd(e,t)}))}async function Md(e,t){Pd(e),Rd(e)?(e.q_.M_(t),Ad(e)):e.q_.set("Unknown")}async function Ud(e,t,n){if(e.q_.set("Online"),t instanceof iu&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){_i("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Fd(e,n)}else if(t instanceof nu?e.Q_.Ke(t):t instanceof ru?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Hi.min()))try{const t=await Vh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(mo.EMPTY_BYTE_STRING,r.snapshotVersion)),Nd(e,t);const i=new qu(r.target,t,n,r.sequenceNumber);Cd(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){_i("RemoteStore","Failed to raise snapshot:",t),await Fd(e,t)}}async function Fd(e,t,n){if(!ms(t))throw t;e.L_.add(1),await Td(e),e.q_.set("Offline"),n||(n=()=>Vh(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{_i("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Sd(e)}))}function jd(e,t){return t().catch((n=>Fd(e,n,t)))}async function Vd(e){const t=xi(e),n=Xd(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Bd(t);)try{const e=await zh(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,zd(t,e)}catch(e){await Fd(t,e)}qd(t)&&Gd(t)}function Bd(e){return Dd(e)&&e.O_.length<10}function zd(e,t){e.O_.push(t);const n=Xd(e);n.r_()&&n.V_&&n.m_(t.mutations)}function qd(e){return Dd(e)&&!Xd(e).n_()&&e.O_.length>0}function Gd(e){Xd(e).start()}async function Hd(e){Xd(e).p_()}async function Kd(e){const t=Xd(e);for(const n of e.O_)t.m_(n.mutations)}async function $d(e,t,n){const r=e.O_.shift(),i=Vl.from(r,t,n);await jd(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Vd(e)}async function Wd(e,t){t&&Xd(e).V_&&await async function(e,t){if(function(e){return Hl(e)&&e!==Ci.ABORTED}(t.code)){const n=e.O_.shift();Xd(e).s_(),await jd(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Vd(e)}}(e,t),qd(e)&&Gd(e)}async function Qd(e,t){const n=xi(e);n.asyncQueue.verifyOperationInProgress(),_i("RemoteStore","RemoteStore received new credentials");const r=Dd(n);n.L_.add(3),await Td(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Sd(n)}async function Jd(e,t){const n=xi(e);t?(n.L_.delete(2),await Sd(n)):t||(n.L_.add(2),await Td(n),n.q_.set("Unknown"))}function Yd(e){return e.K_||(e.K_=function(e,t,n){const r=xi(e);return r.w_(),new wd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Od.bind(null,e),Ro:Ld.bind(null,e),mo:Md.bind(null,e),d_:Ud.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),Rd(e)?Ad(e):e.q_.set("Unknown")):(await e.K_.stop(),Pd(e))}))),e.K_}function Xd(e){return e.U_||(e.U_=function(e,t,n){const r=xi(e);return r.w_(),new bd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Hd.bind(null,e),mo:Wd.bind(null,e),f_:Kd.bind(null,e),g_:$d.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await Vd(e)):(await e.U_.stop(),e.O_.length>0&&(_i("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))}))),e.U_}class Zd{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Zd(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ni(Ci.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ef(e,t){if(Ei("AsyncQueue",`${t}: ${e}`),ms(e))return new Ni(Ci.UNAVAILABLE,`${t}: ${e}`);throw e}class tf{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ji.comparator(t.key,n.key):(e,t)=>Ji.comparator(e.key,t.key),this.keyedMap=Ya(),this.sortedSet=new oo(this.comparator)}static emptySet(e){return new tf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof tf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new tf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class nf{constructor(){this.W_=new oo(Ji.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ti():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class rf{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new rf(e,t,tf.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Va(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class sf{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class of{constructor(){this.queries=af(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=xi(e),r=n.queries;n.queries=af(),r.forEach(((e,n)=>{for(const r of n.j_)r.onError(t)}))}(this,new Ni(Ci.ABORTED,"Firestore shutting down"))}}function af(){return new $a((e=>Ba(e)),Va)}async function lf(e,t){const n=xi(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new sf,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=ef(e,`Initialization of query '${za(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&df(n)}async function uf(e,t){const n=xi(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cf(e,t){const n=xi(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&df(n)}function hf(e,t,n){const r=xi(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function df(e){e.Y_.forEach((e=>{e.next()}))}var ff,pf;(pf=ff||(ff={})).ea="default",pf.Cache="cache";class mf{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new rf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=rf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ff.Cache}}class gf{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class vf{constructor(e){this.serializer=e}Es(e){return Eu(this.serializer,e)}ds(e){return e.metadata.exists?Cu(this.serializer,e.document,!1):Yo.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return vu(e)}}class yf{constructor(e,t,n){this.ca=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wf(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const n=$i.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,n=new vf(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Es(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||il()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=xi(e);let s=il(),o=Qa();for(const u of n){const e=t.Es(u.metadata.name);u.document&&(s=s.add(e));const n=t.ds(u);n.setReadTime(t.As(u.metadata.readTime)),o=o.insert(e,n)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=await qh(i,function(e){return Ma(Da($i.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Bh(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Ur.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Ur.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.Ps,t.Is))).next((()=>t.Ps))))))}(this.localStore,new vf(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const n of this.queries)await Qh(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function wf(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class bf{constructor(e){this.key=e}}class _f{constructor(e){this.key=e}}class Ef{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=il(),this.mutatedKeys=il(),this.Aa=Ha(e),this.Ra=new tf(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new nf,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=qa(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.ga(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.Aa(c,a)>0||l&&this.Aa(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:o,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ti()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),r=null!=r&&r;const o=t&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,l=a!==this.Ea;return this.Ea=a,0!==s.length||l?{snapshot:new rf(this.query,e.Ra,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new nf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=il(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new _f(e))})),this.da.forEach((n=>{e.has(n)||t.push(new bf(n))})),t}ba(e){this.Ta=e.Ts,this.da=il();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return rf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class If{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Sf{constructor(e){this.key=e,this.va=!1}}class Tf{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new $a((e=>Ba(e)),Va),this.Ma=new Map,this.xa=new Set,this.Oa=new oo(Ji.comparator),this.Na=new Map,this.La=new yh,this.Ba={},this.ka=new Map,this.qa=Kc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function kf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=tp(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Cf(r,t,n,!0),i}async function xf(e,t){const n=tp(e);await Cf(n,t,!0,!1)}async function Cf(e,t,n,r){const i=await qh(e.localStore,Ma(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Nf(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&kd(e.remoteStore,i),a}async function Nf(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await Hh(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ma(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Bf(e,t.targetId,a.wa),a.snapshot}(e,t,n,r);const s=await Hh(e.localStore,t,!0),o=new Ef(t,s.Ts),a=o.ma(s.documents),l=tu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);Bf(e,n,u.wa);const c=new If(t,n,o);return e.Fa.set(t,c),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),u.snapshot}async function Af(e,t,n){const r=xi(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter((e=>!Va(e,t)))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Gh(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xd(r.remoteStore,i.targetId),jf(r,i.targetId)})).catch(ls)):(jf(r,i.targetId),await Gh(r.localStore,i.targetId,!0))}async function Rf(e,t){const n=xi(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xd(n.remoteStore,r.targetId))}async function Df(e,t){const n=xi(e);try{const e=await function(e,t){const n=xi(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Ur.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(mo.EMPTY_BYTE_STRING,Hi.min()).withLastLimboFreeSnapshotVersion(Hi.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Ur.updateTargetData(e,u))}));let a=Qa(),l=il();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Bh(e,s,t.documentUpdates).next((e=>{a=e.Ps,l=e.Is}))),!r.isEqual(Hi.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return us.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.os=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Na.get(t);r&&(ki(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?ki(r.va):e.removedDocuments.size>0&&(ki(r.va),r.va=!1))})),await Gf(n,e,t)}catch(e){await ls(e)}}function Pf(e,t,n){const r=xi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach(((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=xi(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)})),r&&df(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Of(e,t,n){const r=xi(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new oo(Ji.comparator);e=e.insert(s,Yo.newNoDocument(s,Hi.min()));const n=il().add(s),i=new eu(Hi.min(),new Map,new oo(Bi),e,n);await Df(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),qf(r)}else await Gh(r.localStore,t,!1).then((()=>jf(r,t,n))).catch(ls)}async function Lf(e,t){const n=xi(e),r=t.batch.batchId;try{const e=await function(e,t){const n=xi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=us.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);ki(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=il();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Ff(n,r,null),Uf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gf(n,e)}catch(e){await ls(e)}}async function Mf(e,t,n){const r=xi(e);try{const e=await function(e,t){const n=xi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ki(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Ff(r,t,n),Uf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Gf(r,e)}catch(n){await ls(n)}}function Uf(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function Ff(e,t,n){const r=xi(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function jf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||Vf(e,t)}))}function Vf(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(xd(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),qf(e))}function Bf(e,t,n){for(const r of n)r instanceof bf?(e.La.addReference(r.key,t),zf(e,r)):r instanceof _f?(_i("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Vf(e,r.key)):Ti()}function zf(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(_i("SyncEngine","New document in limbo: "+n),e.xa.add(r),qf(e))}function qf(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Ji($i.fromString(t)),r=e.qa.next();e.Na.set(r,new Sf(n)),e.Oa=e.Oa.insert(n,r),kd(e.remoteStore,new qu(Ma(Da(n.path)),r,"TargetPurposeLimboResolution",Es.oe))}}async function Gf(e,t,n){const r=xi(e),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach(((e,a)=>{o.push(r.Ka(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Oh.Wi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Ca.d_(i),await async function(e,t){const n=xi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>us.forEach(t,(t=>us.forEach(t.$i,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>us.forEach(t.Ui,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!ms(e))throw e;_i("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function Hf(e,t){const n=xi(e);if(!n.currentUser.isEqual(t)){_i("SyncEngine","User change. New user:",t.toKey());const e=await jh(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new Ni(Ci.CANCELLED,t))}))})),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Gf(n,e.hs)}}function Kf(e,t){const n=xi(e),r=n.Na.get(t);if(r&&r.va)return il().add(r.key);{let e=il();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}async function $f(e,t){const n=xi(e),r=await Hh(n.localStore,t.query,!0),i=t.view.ba(r);return n.isPrimaryClient&&Bf(n,t.targetId,i.wa),i}async function Wf(e,t){const n=xi(e);return $h(n.localStore,t).then((e=>Gf(n,e)))}async function Qf(e,t,n,r){const i=xi(e),s=await function(e,t){const n=xi(e),r=xi(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Mn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):us.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Vd(i.remoteStore):"acknowledged"===n||"rejected"===n?(Ff(i,t,r||null),Uf(i,t),function(e,t){xi(xi(e).mutationQueue).On(t)}(i.localStore,t)):Ti(),await Gf(i,s)):_i("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Jf(e,t,n){const r=xi(e),i=[],s=[];for(const o of t){let e;const t=r.Ma.get(o);if(t&&0!==t.length){e=await qh(r.localStore,Ma(t[0]));for(const e of t){const t=r.Fa.get(e),n=await $f(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Kh(r.localStore,o);e=await qh(r.localStore,t),await Nf(r,Yf(t),o,!1,e.resumeToken)}i.push(e)}return r.Ca.d_(s),i}function Yf(e){return Ra(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Xf(e){return function(e){return xi(xi(e).persistence).Qi()}(xi(e).localStore)}async function Zf(e,t,n,r){const i=xi(e);if(i.Qa)return void _i("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await $h(i.localStore,Ga(s[0])),r=eu.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,mo.EMPTY_BYTE_STRING);await Gf(i,e,r);break}case"rejected":await Gh(i.localStore,t,!0),jf(i,t,r);break;default:Ti()}}async function ep(e,t,n){const r=tp(e);if(r.Qa){for(const e of t){if(r.Ma.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){_i("SyncEngine","Adding an already active target "+e);continue}const t=await Kh(r.localStore,e),n=await qh(r.localStore,t);await Nf(r,Yf(t),n.targetId,!1,n.resumeToken),kd(r.remoteStore,n)}for(const e of n)r.Ma.has(e)&&await Gh(r.localStore,e,!1).then((()=>{xd(r.remoteStore,e),jf(r,e)})).catch(ls)}}function tp(e){const t=xi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Df.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Of.bind(null,t),t.Ca.d_=cf.bind(null,t.eventManager),t.Ca.$a=hf.bind(null,t.eventManager),t}function np(e){const t=xi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Lf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Mf.bind(null,t),t}class rp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Fh(this.persistence,new Mh,e.initialUser,this.serializer)}Ga(e){return new Sh(kh.Zr,this.serializer)}Wa(e){return new sd}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rp.provider={build:()=>new rp};class ip extends rp{constructor(e,t,n){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await np(this.Ja.syncEngine),await Vd(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return Fh(this.persistence,new Mh,e.initialUser,this.serializer)}ja(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Zc(n,e.asyncQueue,t)}Ha(e,t){const n=new _s(t,this.persistence);return new bs(e.asyncQueue,n)}Ga(e){const t=Ph(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fc.withCacheSize(this.cacheSizeBytes):Fc.DEFAULT;return new Ah(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,pd(),md(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new sd}}class sp extends ip{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof id&&(this.sharedClientState.syncEngine={no:Qf.bind(null,t),ro:Zf.bind(null,t),io:ep.bind(null,t),Qi:Xf.bind(null,t),eo:Wf.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi((async e=>{await async function(e,t){const n=xi(e);if(tp(n),np(n),!0===t&&!0!==n.Qa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Jf(n,e.toArray());n.Qa=!0,await Jd(n.remoteStore,!0);for(const r of t)kd(n.remoteStore,r)}else if(!1===t&&!1!==n.Qa){const e=[];let t=Promise.resolve();n.Ma.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(jf(n,i),Gh(n.localStore,i,!0)))),xd(n.remoteStore,i)})),await t,await Jf(n,e),function(e){const t=xi(e);t.Na.forEach(((e,n)=>{xd(t.remoteStore,n)})),t.La.pr(),t.Na=new Map,t.Oa=new oo(Ji.comparator)}(n),n.Qa=!1,await Jd(n.remoteStore,!1)}}(this.Ja.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}Wa(e){const t=pd();if(!id.D(t))throw new Ni(Ci.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Ph(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new id(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class op{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Pf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hf.bind(null,this.syncEngine),await Jd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new of}createDatastore(e){const t=gd(e.databaseInfo.databaseId),n=function(e){return new fd(e)}(e.databaseInfo);return function(e,t,n,r){return new _d(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Id(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Pf(this.syncEngine,e,0)),ad.D()?new ad:new od)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Tf(e,t,n,r,i,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=xi(e);_i("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Td(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function ap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}op.provider={build:()=>new op};class lp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class up{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Ai,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then((e=>{e&&e.ua()?this.metadata.resolve(e.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.aa)}`))}),(e=>this.metadata.reject(e)))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(null===e)return null;const t=this.eu.decode(e),n=Number(t);isNaN(n)&&this.ru(`length string (${t}) is not valid number`);const r=await this.iu(n);return new gf(JSON.parse(r),e.length+n)}su(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async nu(){for(;this.su()<0&&!await this.ou(););if(0===this.buffer.length)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class cp{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ni(Ci.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=xi(e),r={documents:t.map((e=>_u(n.serializer,e)))},i=await n.Lo("BatchGetDocuments",n.serializer.databaseId,$i.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){ki(!!t.found),t.found.name,t.found.updateTime;const n=Eu(e,t.found.name),r=vu(t.found.updateTime),i=t.found.createTime?vu(t.found.createTime):Hi.min(),s=new Qo({mapValue:{fields:t.found.fields}});return Yo.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){ki(!!t.missing),ki(!!t.readTime);const n=Eu(e,t.missing),r=vu(t.readTime);return Yo.newNoDocument(n,r)}(e,t):Ti()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());ki(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ul(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Ji.fromPath(t);this.mutations.push(new Fl(n,this.precondition(n)))})),await async function(e,t){const n=xi(e),r={writes:t.map((e=>Nu(n.serializer,e)))};await n.Mo("Commit",n.serializer.databaseId,$i.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ti();t=Hi.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ni(Ci.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Hi.min())?Sl.exists(!1):Sl.updateTime(t):Sl.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Hi.min()))throw new Ni(Ci.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sl.updateTime(t)}return Sl.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hp{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this._u=n.maxAttempts,this.t_=new vd(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new cp(this.datastore),t=this.cu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.lu(e)}))))})).catch((e=>{this.lu(e)}))}))}cu(e){try{const t=this.updateFunction(e);return!Is(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Hl(t)}return!1}}class dp{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=vi.UNAUTHENTICATED,this.clientId=Vi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{_i("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(_i("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ef(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function fp(e,t){e.asyncQueue.verifyOperationInProgress(),_i("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await jh(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function pp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await mp(e);_i("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Qd(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Qd(t.remoteStore,n))),e._onlineComponents=t}async function mp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){_i("FirestoreClient","Using user provided OfflineComponentProvider");try{await fp(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ci.FAILED_PRECONDITION||e.code===Ci.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ii("Error using user provided cache. Falling back to memory cache: "+n),await fp(e,new rp)}}else _i("FirestoreClient","Using default OfflineComponentProvider"),await fp(e,new rp);return e._offlineComponents}async function gp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(_i("FirestoreClient","Using user provided OnlineComponentProvider"),await pp(e,e._uninitializedComponentsProvider._online)):(_i("FirestoreClient","Using default OnlineComponentProvider"),await pp(e,new op))),e._onlineComponents}function vp(e){return mp(e).then((e=>e.persistence))}function yp(e){return mp(e).then((e=>e.localStore))}function wp(e){return gp(e).then((e=>e.remoteStore))}function bp(e){return gp(e).then((e=>e.syncEngine))}function _p(e){return gp(e).then((e=>e.datastore))}async function Ep(e){const t=await gp(e),n=t.eventManager;return n.onListen=kf.bind(null,t.syncEngine),n.onUnlisten=Af.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=xf.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Rf.bind(null,t.syncEngine),n}function Ip(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ai;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new lp({next:a=>{s.Za(),t.enqueueAndForget((()=>uf(e,o)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Ni(Ci.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Ni(Ci.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new mf(Da(n.path),s,{includeMetadataChanges:!0,_a:!0});return lf(e,o)}(await Ep(e),e.asyncQueue,t,n,r))),r.promise}function Sp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ai;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new lp({next:n=>{s.Za(),t.enqueueAndForget((()=>uf(e,o))),n.fromCache&&"server"===r.source?i.reject(new Ni(Ci.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new mf(n,s,{includeMetadataChanges:!0,_a:!0});return lf(e,o)}(await Ep(e),e.asyncQueue,t,n,r))),r.promise}function Tp(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Wl().encode(e):e,function(e,t){return new up(e,t)}(function(e,t){if(e instanceof Uint8Array)return ap(e,t);if(e instanceof ArrayBuffer)return ap(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,gd(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=xi(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=xi(e),r=vu(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Gr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(wf(r));const i=new yf(r,e.localStore,t.serializer);let s=await t.Ua();for(;s;){const e=await i.la(s);e&&n._updateProgress(e),s=await t.Ua()}const o=await i.complete();return await Gf(e,o.Ia,void 0),await function(e,t){const n=xi(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Gr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Pa)}catch(e){return Ii("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await bp(e),i,r)}))}function kp(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const xp=new Map;function Cp(e,t,n){if(!n)throw new Ni(Ci.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Np(e,t,n,r){if(!0===t&&!0===r)throw new Ni(Ci.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Ap(e){if(!Ji.isDocumentKey(e))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Rp(e){if(Ji.isDocumentKey(e))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Dp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ti()}function Pp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ni(Ci.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dp(e);throw new Ni(Ci.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Op(e,t){if(t<=0)throw new Ni(Ci.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Lp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ni(Ci.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ni(Ci.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Np("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kp(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ni(Ci.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Ni(Ci.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Ni(Ci.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ni(Ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ni(Ci.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lp(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Di;switch(e.type){case"firstParty":return new Mi(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ni(Ci.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xp.get(e);t&&(_i("ComponentProvider","Removing Datastore"),xp.delete(e),t.terminate())}(this),Promise.resolve()}}function Up(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Pp(e,Mp))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=vi.MOCK_USER;else{t=Gt(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ni(Ci.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new vi(s)}e._authCredentials=new Pi(new Ri(t,n))}}class Fp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Fp(this.firestore,e,this._query)}}class jp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jp(this.firestore,e,this._key)}}class Vp extends Fp{constructor(e,t,n){super(e,t,Da(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jp(this.firestore,null,new Ji(e))}withConverter(e){return new Vp(this.firestore,e,this._path)}}function Bp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=dn(e),Cp("collection","path",t),e instanceof Mp){const n=$i.fromString(t,...r);return Rp(n),new Vp(e,null,n)}{if(!(e instanceof jp||e instanceof Vp))throw new Ni(Ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child($i.fromString(t,...r));return Rp(n),new Vp(e.firestore,null,n)}}function zp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=dn(e),1===arguments.length&&(t=Vi.newId()),Cp("doc","path",t),e instanceof Mp){const n=$i.fromString(t,...r);return Ap(n),new jp(e,null,new Ji(n))}{if(!(e instanceof jp||e instanceof Vp))throw new Ni(Ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child($i.fromString(t,...r));return Ap(n),new jp(e.firestore,e instanceof Vp?e.converter:null,new Ji(n))}}function qp(e,t){return e=dn(e),t=dn(t),(e instanceof jp||e instanceof Vp)&&(t instanceof jp||t instanceof Vp)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Gp(e,t){return e=dn(e),t=dn(t),e instanceof Fp&&t instanceof Fp&&e.firestore===t.firestore&&Va(e._query,t._query)&&e.converter===t.converter}class Hp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vd(this,"async_queue_retry"),this.Vu=()=>{const e=md();e&&_i("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=md();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=md();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Ai;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(eT){if(!ms(eT))throw eT;_i("AsyncQueue","Operation failed with retryable error: "+eT)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ei("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Zd.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(r),r}fu(){this.Eu&&Ti()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Kp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class $p{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ai,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wp extends Mp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Hp,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hp(e),this._firestoreClient=void 0,await e}}}function Qp(e){if(e._terminated)throw new Ni(Ci.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Jp(e),e._firestoreClient}function Jp(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Io(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,kp(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new dp(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function Yp(e,t,n){if((e=Pp(e,Wp))._firestoreClient||e._terminated)throw new Ni(Ci.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new Ni(Ci.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},Jp(e)}function Xp(e){return function(e){const t=new Ai;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=xi(e);Dd(n.remoteStore)||_i("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=xi(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ka.get(e)||[];r.push(t),n.ka.set(e,r)}catch(e){const n=ef(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await bp(e),t))),t.promise}(Qp(e=Pp(e,Wp)))}function Zp(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await vp(e),n=await wp(e);return t.setNetworkEnabled(!0),function(e){const t=xi(e);return t.L_.delete(0),Sd(t)}(n)}))}(Qp(e=Pp(e,Wp)))}function em(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await vp(e),n=await wp(e);return t.setNetworkEnabled(!1),async function(e){const t=xi(e);t.L_.add(0),await Td(t),t.q_.set("Offline")}(n)}))}(Qp(e=Pp(e,Wp)))}function tm(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=xi(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Gr.getNamedQuery(e,t)))}(await yp(e),t)))}(Qp(e=Pp(e,Wp)),t).then((t=>t?new Fp(e,null,t.query):null))}class nm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nm(mo.fromBase64String(e))}catch(e){throw new Ni(Ci.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new nm(mo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ni(Ci.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qi(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class im{constructor(e){this._methodName=e}}class sm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ni(Ci.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ni(Ci.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bi(this._lat,e._lat)||Bi(this._long,e._long)}}class om{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const am=/^__.*__$/;class lm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Pl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dl(e,this.data,t,this.fieldTransforms)}}class um{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Pl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ti()}}class hm{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new hm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Rm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(cm(this.Cu)&&am.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class dm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||gd(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new hm({Cu:e,methodName:t,qu:n,path:Qi.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fm(e){const t=e._freezeSettings(),n=gd(e._databaseId);return new dm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function pm(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);xm("Data must be an object, but it was:",o,r);const a=Tm(r,o);let l,u;if(s.merge)l=new fo(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Cm(t,r,n);if(!o.contains(i))throw new Ni(Ci.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Dm(e,i)||e.push(i)}l=new fo(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new lm(new Qo(a),l,u)}class mm extends im{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mm}}function gm(e,t,n){return new hm({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class vm extends im{_toFieldTransform(e){return new El(e.path,new pl)}isEqual(e){return e instanceof vm}}class ym extends im{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=gm(this,e,!0),n=this.Ku.map((e=>Sm(e,t))),r=new ml(n);return new El(e.path,r)}isEqual(e){return e instanceof ym&&rn(this.Ku,e.Ku)}}class wm extends im{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=gm(this,e,!0),n=this.Ku.map((e=>Sm(e,t))),r=new vl(n);return new El(e.path,r)}isEqual(e){return e instanceof wm&&rn(this.Ku,e.Ku)}}class bm extends im{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new wl(e.serializer,ul(e.serializer,this.$u));return new El(e.path,t)}isEqual(e){return e instanceof bm&&this.$u===e.$u}}function _m(e,t,n,r){const i=e.Qu(1,t,n);xm("Data must be an object, but it was:",i,r);const s=[],o=Qo.empty();io(r,((e,r)=>{const a=Am(t,e,n);r=dn(r);const l=i.Nu(a);if(r instanceof mm)s.push(a);else{const e=Sm(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new fo(s);return new um(o,a,i.fieldTransforms)}function Em(e,t,n,r,i,s){const o=e.Qu(1,t,n),a=[Cm(t,r,n)],l=[i];if(s.length%2!=0)throw new Ni(Ci.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Cm(t,s[d])),l.push(s[d+1]);const u=[],c=Qo.empty();for(let d=a.length-1;d>=0;--d)if(!Dm(u,a[d])){const e=a[d];let t=l[d];t=dn(t);const n=o.Nu(e);if(t instanceof mm)u.push(e);else{const r=Sm(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new fo(u);return new um(c,h,o.fieldTransforms)}function Im(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Sm(n,e.Qu(r?4:3,t))}function Sm(e,t){if(km(e=dn(e)))return xm("Unsupported field value:",t,e),Tm(e,t);if(e instanceof im)return function(e,t){if(!cm(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Sm(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=dn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ul(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Gi.fromDate(e);return{timestampValue:pu(t.serializer,n)}}if(e instanceof Gi){const n=new Gi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:pu(t.serializer,n)}}if(e instanceof sm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof nm)return{bytesValue:mu(t.serializer,e._byteString)};if(e instanceof jp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:yu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof om)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return al(t.serializer,e)}))}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${Dp(e)}`)}(e,t)}function Tm(e,t){const n={};return so(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):io(e,((e,r)=>{const i=Sm(r,t.Mu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function km(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Gi||e instanceof sm||e instanceof nm||e instanceof jp||e instanceof im||e instanceof om)}function xm(e,t,n){if(!km(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Dp(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Cm(e,t,n){if((t=dn(t))instanceof rm)return t._internalPath;if("string"==typeof t)return Am(e,t);throw Rm("Field path arguments must be of type string or ",e,!1,void 0,n)}const Nm=new RegExp("[~\\*/\\[\\]]");function Am(e,t,n){if(t.search(Nm)>=0)throw Rm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new rm(...t.split("."))._internalPath}catch(r){throw Rm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Rm(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ni(Ci.INVALID_ARGUMENT,a+e+l)}function Dm(e,t){return e.some((e=>e.isEqual(t)))}class Pm{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Om(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Om extends Pm{data(){return super.data()}}function Lm(e,t){return"string"==typeof t?Am(e,t):t instanceof rm?t._internalPath:t._delegate._internalPath}function Mm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ni(Ci.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Um{}class Fm extends Um{}function jm(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Um&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Bm)).length,n=e.filter((e=>e instanceof Vm)).length;if(t>1||t>0&&n>0)throw new Ni(Ci.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Vm extends Fm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Vm(e,t,n)}_apply(e){const t=this._parse(e);return Qm(e._query,t),new Fp(e.firestore,e.converter,Fa(e._query,t))}_parse(e){const t=fm(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ni(Ci.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Wm(o,s);const t=[];for(const n of o)t.push($m(r,e,n));a={arrayValue:{values:t}}}else a=$m(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Wm(o,s),a=Im(n,t,o,"in"===s||"not-in"===s);return ia.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Bm extends Um{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bm(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:sa.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Qm(n,i),n=Fa(n,i)}(e._query,t),new Fp(e.firestore,e.converter,Fa(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class zm extends Fm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zm(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ni(Ci.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ni(Ci.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ta(t,n)}(e._query,this._field,this._direction);return new Fp(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Aa(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class qm extends Fm{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new qm(e,t,n)}_apply(e){return new Fp(e.firestore,e.converter,ja(e._query,this._limit,this._limitType))}}class Gm extends Fm{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Gm(e,t,n)}_apply(e){const t=Km(e,this.type,this._docOrFields,this._inclusive);return new Fp(e.firestore,e.converter,function(e,t){return new Aa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Hm extends Fm{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Hm(e,t,n)}_apply(e){const t=Km(e,this.type,this._docOrFields,this._inclusive);return new Fp(e.firestore,e.converter,function(e,t){return new Aa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Km(e,t,n,r){if(n[0]=dn(n[0]),n[0]instanceof Pm)return function(e,t,n,r,i){if(!r)throw new Ni(Ci.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of La(e))if(o.field.isKeyField())s.push(Lo(t,r.key));else{const e=r.data.field(o.field);if(bo(e))throw new Ni(Ci.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new Xo(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=fm(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Ni(Ci.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!Oa(e)&&-1!==s.indexOf("/"))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child($i.fromString(s));if(!Ji.isDocumentKey(n))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new Ji(n);a.push(Lo(t,i))}else{const e=Im(n,r,s);a.push(e)}}return new Xo(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function $m(e,t,n){if("string"==typeof(n=dn(n))){if(""===n)throw new Ni(Ci.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Oa(t)&&-1!==n.indexOf("/"))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child($i.fromString(n));if(!Ji.isDocumentKey(r))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lo(e,new Ji(r))}if(n instanceof jp)return Lo(e,n._key);throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dp(n)}.`)}function Wm(e,t){if(!Array.isArray(e)||0===e.length)throw new Ni(Ci.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Qm(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ni(Ci.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ni(Ci.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Jm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ti()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return io(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>yo(e.doubleValue)));return new om(i)}convertGeoPoint(e){return new sm(yo(e.latitude),yo(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=_o(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Eo(e));default:return null}}convertTimestamp(e){const t=vo(e);return new Gi(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=$i.fromString(e);ki(zu(n));const r=new So(n.get(1),n.get(3)),i=new Ji(n.popFirst(5));return r.isEqual(t)||Ei(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Ym(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Xm extends Jm{constructor(e){super(),this.firestore=e}convertBytes(e){return new nm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jp(this.firestore,null,t)}}class Zm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eg extends Pm{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new tg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Lm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class tg extends eg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ng{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Zm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new tg(this._firestore,this._userDataWriter,n.key,n,new Zm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ni(Ci.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new tg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Zm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new tg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Zm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:rg(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function rg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ti()}}function ig(e,t){return e instanceof eg&&t instanceof eg?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ng&&t instanceof ng&&e._firestore===t._firestore&&Gp(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class sg extends Jm{constructor(e){super(),this.firestore=e}convertBytes(e){return new nm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jp(this.firestore,null,t)}}function og(e){e=Pp(e,jp);const t=Pp(e.firestore,Wp),n=Qp(t),r=new sg(t);return function(e,t){const n=new Ai;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=xi(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Ni(Ci.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=ef(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await yp(e),t,n))),n.promise}(n,e._key).then((n=>new eg(t,r,e._key,n,new Zm(null!==n&&n.hasLocalMutations,!0),e.converter)))}function ag(e){e=Pp(e,Fp);const t=Pp(e.firestore,Wp),n=Qp(t),r=new sg(t);return function(e,t){const n=new Ai;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Hh(e,t,!0),i=new Ef(t,r.Ts),s=i.ma(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=ef(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await yp(e),t,n))),n.promise}(n,e._query).then((n=>new ng(t,r,e,n)))}function lg(e,t,n){e=Pp(e,jp);const r=Pp(e.firestore,Wp),i=Ym(e.converter,t,n);return dg(r,[pm(fm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Sl.none())])}function ug(e,t,n){e=Pp(e,jp);const r=Pp(e.firestore,Wp),i=fm(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=dn(t))||t instanceof rm?Em(i,"updateDoc",e._key,t,n,a):_m(i,"updateDoc",e._key,t),dg(r,[s.toMutation(e._key,Sl.exists(!0))])}function cg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=dn(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Kp(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Kp(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,h,d;if(e instanceof jp)h=Pp(e.firestore,Wp),d=Da(e._key.path),c={next:t=>{n[l]&&n[l](fg(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Pp(e,Fp);h=Pp(t.firestore,Wp),d=t._query;const r=new sg(h);c={next:e=>{n[l]&&n[l](new ng(h,r,t,e))},error:n[l+1],complete:n[l+2]},Mm(e._query)}return function(e,t,n,r){const i=new lp(r),s=new mf(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>lf(await Ep(e),s))),()=>{i.Za(),e.asyncQueue.enqueueAndForget((async()=>uf(await Ep(e),s)))}}(Qp(h),d,u,c)}function hg(e,t){return function(e,t){const n=new lp(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){xi(e).Y_.add(t),t.next()}(await Ep(e),n))),()=>{n.Za(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){xi(e).Y_.delete(t)}(await Ep(e),n)))}}(Qp(e=Pp(e,Wp)),Kp(t)?t:{next:t})}function dg(e,t){return function(e,t){const n=new Ai;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=np(e);try{const e=await function(e,t){const n=xi(e),r=Gi.now(),i=t.reduce(((e,t)=>e.add(t.key)),il());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Qa(),l=il();return n.cs.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Al(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Pl(e.key,t,Jo(t.value.mapValue),Sl.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Xa(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new oo(Bi)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Gf(r,e.changes),await Vd(r.remoteStore)}catch(e){const t=ef(e,"Failed to persist write");n.reject(t)}}(await bp(e),t,n))),n.promise}(Qp(e),t)}function fg(e,t,n){const r=n.docs.get(t._key),i=new sg(e);return new eg(e,i,t._key,r,new Zm(n.hasPendingWrites,n.fromCache),t.converter)}const pg={maxAttempts:5};class mg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fm(e)}set(e,t,n){this._verifyNotCommitted();const r=gg(e,this._firestore),i=Ym(r.converter,t,n),s=pm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Sl.none())),this}update(e,t,n){this._verifyNotCommitted();const r=gg(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=dn(t))||t instanceof rm?Em(this._dataReader,"WriteBatch.update",r._key,t,n,o):_m(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Sl.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gg(e,this._firestore);return this._mutations=this._mutations.concat(new Ul(t._key,Sl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ni(Ci.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gg(e,t){if((e=dn(e)).firestore!==t)throw new Ni(Ci.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class vg extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=fm(e)}get(e){const t=gg(e,this._firestore),n=new Xm(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ti();const r=e[0];if(r.isFoundDocument())return new Pm(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Pm(this._firestore,n,t._key,null,t.converter);throw Ti()}))}set(e,t,n){const r=gg(e,this._firestore),i=Ym(r.converter,t,n),s=pm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=gg(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=dn(t))||t instanceof rm?Em(this._dataReader,"Transaction.update",r._key,t,n,o):_m(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=gg(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gg(e,this._firestore),n=new sg(this._firestore);return super.get(e).then((e=>new eg(this._firestore,n,t._key,e._document,new Zm(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){yi=e}(Dr),Ir(new fn("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Wp(new Oi(e.getProvider("auth-internal")),new Fi(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ni(Ci.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new So(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Fr(gi,"4.7.3",e),Fr(gi,"4.7.3","esm2017")}();function yg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ni("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function wg(){if("undefined"===typeof Uint8Array)throw new Ni("unimplemented","Uint8Arrays are not available in this environment.")}function bg(){if("undefined"==typeof atob)throw new Ni("unimplemented","Blobs are unavailable in Firestore in this environment.")}class _g{constructor(e){this._delegate=e}static fromBase64String(e){return bg(),new _g(nm.fromBase64String(e))}static fromUint8Array(e){return wg(),new _g(nm.fromUint8Array(e))}toBase64(){return bg(),this._delegate.toBase64()}toUint8Array(){return wg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Eg(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Ig{enableIndexedDbPersistence(e,t){return function(e,t){Ii("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return Yp(e,op.provider,{build:e=>new ip(e,n.cacheSizeBytes,null==t?void 0:t.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return async function(e){Ii("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();Yp(e,op.provider,{build:e=>new sp(e,t.cacheSizeBytes)})}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Ni(Ci.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ai;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!hs.D())return Promise.resolve();const t=e+"main";await hs.delete(t)}(Ph(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Sg{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof So||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Ii("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Up(this._delegate,e,t,n)}enableNetwork(){return Zp(this._delegate)}disableNetwork(){return em(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Np("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Xp(this._delegate)}onSnapshotsInSync(e){return hg(this._delegate,e)}get app(){if(!this._appCompat)throw new Ni("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Fg(this,Bp(this._delegate,e))}catch(eT){throw Ag(eT,"collection()","Firestore.collection()")}}doc(e){try{return new Ng(this,zp(this._delegate,e))}catch(eT){throw Ag(eT,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Lg(this,function(e,t){if(e=Pp(e,Mp),Cp("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ni(Ci.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Fp(e,null,function(e){return new Aa($i.emptyPath(),e)}(t))}(this._delegate,e))}catch(eT){throw Ag(eT,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Pp(e,Wp);const r=Object.assign(Object.assign({},pg),n);return function(e){if(e.maxAttempts<1)throw new Ni(Ci.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Ai;return e.asyncQueue.enqueueAndForget((async()=>{const i=await _p(e);new hp(e.asyncQueue,i,n,t,r).au()})),r.promise}(Qp(e),(n=>t(new vg(e,n))),r)}(this._delegate,(t=>e(new kg(this,t))))}batch(){return Qp(this._delegate),new xg(new mg(this._delegate,(e=>dg(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Qp(e=Pp(e,Wp)),r=new $p;return Tp(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return tm(this._delegate,e).then((e=>e?new Lg(this,e):null))}}class Tg extends Jm{constructor(e){super(),this.firestore=e}convertBytes(e){return new _g(new nm(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ng.forKey(t,this.firestore,null)}}class kg{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Tg(e)}get(e){const t=jg(e);return this._delegate.get(t).then((e=>new Pg(this._firestore,new eg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=jg(e);return n?(yg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=jg(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=jg(e);return this._delegate.delete(t),this}}class xg{constructor(e){this._delegate=e}set(e,t,n){const r=jg(e);return n?(yg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=jg(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=jg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Cg{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new tg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Og(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Cg.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Cg(e,new Tg(e),t),r.set(t,i)),i}}Cg.INSTANCES=new WeakMap;class Ng{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tg(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Ni("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ng(t,new jp(t._delegate,n,new Ji(e)))}static forKey(e,t,n){return new Ng(t,new jp(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Fg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Fg(this.firestore,Bp(this._delegate,e))}catch(eT){throw Ag(eT,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=dn(e))instanceof jp&&qp(this._delegate,e)}set(e,t){t=yg("DocumentReference.set",t);try{return t?lg(this._delegate,e,t):lg(this._delegate,e)}catch(eT){throw Ag(eT,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ug(this._delegate,e):ug(this._delegate,e,t,...r)}catch(eT){throw Ag(eT,"updateDoc()","DocumentReference.update()")}}delete(){return dg(Pp((e=this._delegate).firestore,Wp),[new Ul(e._key,Sl.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Rg(t),i=Dg(t,(e=>new Pg(this.firestore,new eg(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return cg(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?og(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Pp(e,jp);const t=Pp(e.firestore,Wp);return Ip(Qp(t),e._key,{source:"server"}).then((n=>fg(t,e,n)))}(this._delegate):function(e){e=Pp(e,jp);const t=Pp(e.firestore,Wp);return Ip(Qp(t),e._key).then((n=>fg(t,e,n)))}(this._delegate),t.then((e=>new Pg(this.firestore,new eg(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Ng(this.firestore,e?this._delegate.withConverter(Cg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ag(e,t,n){return e.message=e.message.replace(t,n),e}function Rg(e){for(const t of e)if("object"===typeof t&&!Eg(t))return t;return{}}function Dg(e,t){var n,r;let i;return i=Eg(e[0])?e[0]:Eg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Pg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ng(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ig(this._delegate,e._delegate)}}class Og extends Pg{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Ti(),t}}class Lg{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Tg(e)}where(e,t,n){try{return new Lg(this.firestore,jm(this._delegate,function(e,t,n){const r=t,i=Lm("where",e);return Vm._create(i,r,n)}(e,t,n)))}catch(eT){throw Ag(eT,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Lg(this.firestore,jm(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Lm("orderBy",e);return zm._create(n,t)}(e,t)))}catch(eT){throw Ag(eT,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Lg(this.firestore,jm(this._delegate,(Op("limit",t=e),qm._create("limit",t,"F"))))}catch(t){throw Ag(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Lg(this.firestore,jm(this._delegate,(Op("limitToLast",t=e),qm._create("limitToLast",t,"L"))))}catch(t){throw Ag(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Lg(this.firestore,jm(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gm._create("startAt",t,!0)}(...arguments)))}catch(eT){throw Ag(eT,"startAt()","Query.startAt()")}}startAfter(){try{return new Lg(this.firestore,jm(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gm._create("startAfter",t,!1)}(...arguments)))}catch(eT){throw Ag(eT,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Lg(this.firestore,jm(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Hm._create("endBefore",t,!1)}(...arguments)))}catch(eT){throw Ag(eT,"endBefore()","Query.endBefore()")}}endAt(){try{return new Lg(this.firestore,jm(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Hm._create("endAt",t,!0)}(...arguments)))}catch(eT){throw Ag(eT,"endAt()","Query.endAt()")}}isEqual(e){return Gp(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?ag(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Pp(e,Fp);const t=Pp(e.firestore,Wp),n=Qp(t),r=new sg(t);return Sp(n,e._query,{source:"server"}).then((n=>new ng(t,r,e,n)))}(this._delegate):function(e){e=Pp(e,Fp);const t=Pp(e.firestore,Wp),n=Qp(t),r=new sg(t);return Mm(e._query),Sp(n,e._query).then((n=>new ng(t,r,e,n)))}(this._delegate),t.then((e=>new Ug(this.firestore,new ng(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Rg(t),i=Dg(t,(e=>new Ug(this.firestore,new ng(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return cg(this._delegate,r,i)}withConverter(e){return new Lg(this.firestore,e?this._delegate.withConverter(Cg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Mg{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Og(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ug{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Lg(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Og(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Mg(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Og(this._firestore,n))}))}isEqual(e){return ig(this._delegate,e._delegate)}}class Fg extends Lg{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ng(this.firestore,e):null}doc(e){try{return new Ng(this.firestore,void 0===e?zp(this._delegate):zp(this._delegate,e))}catch(eT){throw Ag(eT,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Pp(e.firestore,Wp),r=zp(e),i=Ym(e.converter,t);return dg(n,[pm(fm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Sl.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Ng(this.firestore,e)))}isEqual(e){return qp(this._delegate,e._delegate)}withConverter(e){return new Fg(this.firestore,e?this._delegate.withConverter(Cg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function jg(e){return Pp(e,jp)}class Vg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new rm(...t)}static documentId(){return new Vg(Qi.keyField().canonicalString())}isEqual(e){return(e=dn(e))instanceof rm&&this._delegate._internalPath.isEqual(e._internalPath)}}class Bg{constructor(e){this._delegate=e}static serverTimestamp(){const e=new vm("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Bg(e)}static delete(){const e=new mm("deleteField");return e._methodName="FieldValue.delete",new Bg(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ym("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Bg(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wm("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Bg(e)}static increment(e){const t=new bm("increment",e);return t._methodName="FieldValue.increment",new Bg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const zg={Firestore:Sg,GeoPoint:sm,Timestamp:Gi,Blob:_g,Transaction:kg,WriteBatch:xg,DocumentReference:Ng,DocumentSnapshot:Pg,Query:Lg,QueryDocumentSnapshot:Og,QuerySnapshot:Ug,CollectionReference:Fg,FieldPath:Vg,FieldValue:Bg,setLogLevel:function(e){var t;t=e,wi.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var qg;(function(e,t){e.INTERNAL.registerComponent(new fn("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},zg)))})(qg=ti,((e,t)=>new Sg(e,t,new Ig))),qg.registerVersion("@firebase/firestore-compat","0.3.38");const Gg="firebasestorage.googleapis.com",Hg="storageBucket";class Kg extends Zt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Qg(e),`Firebase Storage: ${t} (${Qg(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Kg.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var $g,Wg;function Qg(e){return"storage/"+e}function Jg(){return new Kg($g.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Yg(){return new Kg($g.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Xg(){return new Kg($g.CANCELED,"User canceled the upload/download.")}function Zg(){return new Kg($g.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ev(e){return new Kg($g.INVALID_ARGUMENT,e)}function tv(){return new Kg($g.APP_DELETED,"The Firebase app was deleted.")}function nv(e){return new Kg($g.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rv(e,t){return new Kg($g.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function iv(e){throw new Kg($g.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}($g||($g={}));class sv{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=sv.makeFromUrl(e,t)}catch(eT){return new sv(e,"")}if(""===n.path)return n;throw r=e,new Kg($g.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===Gg?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new sv(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Kg($g.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class ov{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function av(e){return"string"===typeof e||e instanceof String}function lv(e){return uv()&&e instanceof Blob}function uv(){return"undefined"!==typeof Blob}function cv(e,t,n,r){if(r<t)throw ev(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw ev(`Invalid value for '${e}'. Expected ${n} or less.`)}function hv(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function dv(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function fv(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Wg||(Wg={}));class pv{constructor(e,t,n,r,i,s,o,a,l,u,c){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=c,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new mv(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Wg.NO_ERROR,i=n.getStatus();if(!t||fv(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Wg.ABORT;return void e(!1,new mv(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new mv(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(eT){r(eT)}else if(null!==i){const e=Jg();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?tv():Xg())}else{r(Yg())}};this.canceled_?t(0,new mv(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let u=!1;function c(){if(!u){u=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(u)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void c.call(null,e,...n);if(l()||o)return d(),void c.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),u||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class mv{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function gv(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function vv(){const e=gv();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(uv())return new Blob(n);throw new Kg($g.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function yv(e){if("undefined"===typeof atob)throw t="base-64",new Kg($g.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const wv={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bv{constructor(e,t){this.data=e,this.contentType=t||null}}function _v(e,t){switch(e){case wv.RAW:return new bv(Ev(t));case wv.BASE64:case wv.BASE64URL:return new bv(Iv(e,t));case wv.DATA_URL:return new bv(function(e){const t=new Sv(e);return t.base64?Iv(wv.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(eT){throw rv(wv.DATA_URL,"Malformed data URL.")}return Ev(t)}(t.rest)}(t),new Sv(t).contentType)}throw Jg()}function Ev(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Iv(e,t){switch(e){case wv.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw rv(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case wv.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw rv(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=yv(t)}catch(eT){if(eT.message.includes("polyfill"))throw eT;throw rv(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Sv{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw rv(wv.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Tv{constructor(e,t){let n=0,r="";lv(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(lv(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Tv(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Tv(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(uv()){const e=t.map((e=>e instanceof Tv?e.data_:e));return new Tv(vv.apply(null,e))}{const e=t.map((e=>av(e)?_v(wv.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Tv(r,!0)}}uploadData(){return this.data_}}function kv(e){let t;try{t=JSON.parse(e)}catch(eT){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function xv(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Cv(e,t){return t}class Nv{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Cv}}let Av=null;function Rv(){if(Av)return Av;const e=[];e.push(new Nv("bucket")),e.push(new Nv("generation")),e.push(new Nv("metageneration")),e.push(new Nv("name","fullPath",!0));const t=new Nv("name");t.xform=function(e,t){return function(e){return!av(e)||e.length<2?e:xv(e)}(t)},e.push(t);const n=new Nv("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Nv("timeCreated")),e.push(new Nv("updated")),e.push(new Nv("md5Hash",null,!0)),e.push(new Nv("cacheControl",null,!0)),e.push(new Nv("contentDisposition",null,!0)),e.push(new Nv("contentEncoding",null,!0)),e.push(new Nv("contentLanguage",null,!0)),e.push(new Nv("contentType",null,!0)),e.push(new Nv("metadata","customMetadata",!0)),Av=e,Av}function Dv(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new sv(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Pv(e,t,n){const r=kv(t);if(null===r)return null;return Dv(e,r,n)}function Ov(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const Lv="prefixes",Mv="items";function Uv(e,t,n){const r=kv(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Lv])for(const i of n[Lv]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new sv(t,n));r.prefixes.push(s)}if(n[Mv])for(const i of n[Mv]){const n=e._makeStorageReference(new sv(t,i.name));r.items.push(n)}return r}(e,t,r)}class Fv{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function jv(e){if(!e)throw Jg()}function Vv(e,t){return function(n,r){const i=Pv(e,r,t);return jv(null!==i),i}}function Bv(e,t){return function(n,r){const i=Pv(e,r,t);return jv(null!==i),function(e,t,n,r){const i=kv(t);if(null===i)return null;if(!av(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return hv("/b/"+o(i)+"/o/"+o(s),n,r)+dv({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function zv(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Kg($g.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Kg($g.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new Kg($g.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Kg($g.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function qv(e){const t=zv(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new Kg($g.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Gv(e,t,n){const r=hv(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Fv(r,"GET",Vv(e,n),i);return s.errorHandler=qv(t),s}function Hv(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=hv(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new Fv(o,"GET",function(e,t){return function(n,r){const i=Uv(e,t,r);return jv(null!==i),i}}(e,t.bucket),a);return l.urlParams=s,l.errorHandler=zv(t),l}function Kv(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function $v(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=Kv(t,r,i),u="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ov(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",c="\r\n--"+a+"--",h=Tv.getBlob(u,r,c);if(null===h)throw Zg();const d={name:l.fullPath},f=hv(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Fv(f,"POST",Vv(e,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=zv(t),m}class Wv{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function Qv(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(eT){jv(!1)}return jv(!!n&&-1!==(t||["active"]).indexOf(n)),n}const Jv=262144;function Yv(e,t,n,r,i,s,o,a){const l=new Wv(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new Kg($g.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const u=l.total-l.current;let c=u;i>0&&(c=Math.min(c,i));const h=l.current,d=h+c;let f="";f=0===c?"finalize":u===c?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},m=r.slice(h,d);if(null===m)throw Zg();const g=t.maxUploadRetryTime,v=new Fv(n,"POST",(function(e,n){const i=Qv(e,["active","final"]),o=l.current+c,a=r.size();let u;return u="final"===i?Vv(t,s)(e,n):null,new Wv(o,a,"final"===i,u)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=zv(e),v}const Xv={STATE_CHANGED:"state_changed"},Zv={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ey(e){switch(e){case"running":case"pausing":case"canceling":return Zv.RUNNING;case"paused":return Zv.PAUSED;case"success":return Zv.SUCCESS;case"canceled":return Zv.CANCELED;default:return Zv.ERROR}}class ty{constructor(e,t,n){if("function"===typeof e||null!=t||null!=n)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function ny(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}class ry{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wg.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Wg.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Wg.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw iv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw iv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw iv("cannot .getStatus() before sending");try{return this.xhr_.status}catch(eT){return-1}}getResponse(){if(!this.sent_)throw iv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw iv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class iy extends ry{initXhr(){this.xhr_.responseType="text"}}function sy(){return new iy}class oy{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Rv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals($g.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(fv(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=Yg()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals($g.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=Kv(t,r,i),a={name:o.fullPath},l=hv(s,e.host,e._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},c=Ov(o,n),h=e.maxUploadRetryTime,d=new Fv(l,"POST",(function(e){let t;Qv(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(eT){jv(!1)}return jv(av(t)),t}),h);return d.urlParams=a,d.headers=u,d.body=c,d.errorHandler=zv(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,sy,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new Fv(n,"POST",(function(e){const t=Qv(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(eT){jv(!1)}n||jv(!1);const i=Number(n);return jv(!isNaN(i)),new Wv(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=zv(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,sy,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=Jv*this._chunkMultiplier,t=new Wv(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=Yv(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(eT){return this._error=eT,void this._transition("error")}const o=this._ref.storage._makeRequest(s,sy,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(Jv*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=Gv(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,sy,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=$v(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,sy,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Xg(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ey(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new ty(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ey(this._state)){case Zv.SUCCESS:ny(this._resolve.bind(null,this.snapshot))();break;case Zv.CANCELED:case Zv.ERROR:ny(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ey(this._state)){case Zv.RUNNING:case Zv.PAUSED:e.next&&ny(e.next.bind(e,this.snapshot))();break;case Zv.SUCCESS:e.complete&&ny(e.complete.bind(e))();break;default:e.error&&ny(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ay{constructor(e,t){this._service=e,this._location=t instanceof sv?t:sv.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ay(e,t)}get root(){const e=new sv(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xv(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new sv(this._location.bucket,e);return new ay(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw nv(e)}}function ly(e){const t={prefixes:[],items:[]};return uy(e,t).then((()=>t))}async function uy(e,t,n){const r={pageToken:n},i=await cy(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await uy(e,t,i.nextPageToken)}function cy(e,t){null!=t&&"number"===typeof t.maxResults&&cv("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=Hv(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,sy)}function hy(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=hv(t.fullServerUrl(),e.host,e._protocol),s=Ov(n,r),o=e.maxOperationRetryTime,a=new Fv(i,"PATCH",Vv(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=qv(t),a}(e.storage,e._location,t,Rv());return e.storage.makeRequestWithTokens(n,sy)}function dy(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=hv(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Fv(r,"GET",Bv(e,n),i);return s.errorHandler=qv(t),s}(e.storage,e._location,Rv());return e.storage.makeRequestWithTokens(t,sy).then((e=>{if(null===e)throw new Kg($g.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function fy(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=hv(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Fv(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=qv(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,sy)}function py(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new sv(e._location.bucket,n);return new ay(e.storage,r)}function my(e,t){if(e instanceof yy){const n=e;if(null==n._bucket)throw new Kg($g.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Hg+"' property when initializing the app?");const r=new ay(n,n._bucket);return null!=t?my(r,t):r}return void 0!==t?py(e,t):e}function gy(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof yy)return new ay(e,t);throw ev("To use ref(service, url), the first argument must be a Storage instance.")}return my(e,t)}function vy(e,t){const n=null===t||void 0===t?void 0:t[Hg];return null==n?null:sv.makeFromBucketSpec(n,e)}class yy{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Gg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?sv.makeFromBucketSpec(r,this._host):vy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=sv.makeFromBucketSpec(this._url,e):this._bucket=vy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ay(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new ov(tv());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=dv(e.urlParams),l=e.url+a,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new pv(l,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const wy="@firebase/storage",by="0.13.2",_y="storage";function Ey(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new oy(e,new Tv(t),n)}(e=dn(e),t,n)}function Iy(e){return function(e){e._throwIfRoot("getMetadata");const t=Gv(e.storage,e._location,Rv());return e.storage.makeRequestWithTokens(t,sy)}(e=dn(e))}function Sy(e,t){return gy(e=dn(e),t)}function Ty(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Gt(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function ky(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new yy(r,i,s,n,Dr)}Ir(new fn(_y,ky,"PUBLIC").setMultipleInstances(!0)),Fr(wy,by,""),Fr(wy,by,"esm2017");class xy{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Cy{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new xy(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new xy(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new xy(e,this,this._ref)):{next:t.next?e=>t.next(new xy(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class Ny{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new Ay(e,this._service)))}get items(){return this._delegate.items.map((e=>new Ay(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ay{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return py(e,t)}(this._delegate,e);return new Ay(t,this.storage)}get root(){return new Ay(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ay(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Cy(Ey(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wv.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=_v(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Cy(new oy(this._delegate,new Tv(r.data,!0),i),this)}listAll(){return function(e){return ly(e=dn(e))}(this._delegate).then((e=>new Ny(e,this.storage)))}list(e){return function(e,t){return cy(e=dn(e),t)}(this._delegate,e||void 0).then((e=>new Ny(e,this.storage)))}getMetadata(){return Iy(this._delegate)}updateMetadata(e){return function(e,t){return hy(e=dn(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return dy(e=dn(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return fy(e=dn(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw nv(e)}}class Ry{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Dy(e))throw ev("ref() expected a child path but got a URL, use refFromURL instead.");return new Ay(Sy(this._delegate,e),this)}refFromURL(e){if(!Dy(e))throw ev("refFromURL() expected a full URL but got a child path, use ref() instead.");try{sv.makeFromUrl(e,this._delegate.host)}catch(eT){throw ev("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ay(Sy(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ty(this._delegate,e,t,n)}}function Dy(e){return/^[A-Za-z]+:\/\//.test(e)}function Py(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Ry(r,i)}!function(e){const t={TaskState:Zv,TaskEvent:Xv,StringFormat:wv,Storage:Ry,Reference:Ay};e.INTERNAL.registerComponent(new fn("storage-compat",Py,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.12")}(ti);function Oy(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Ly="facebook.com",My="github.com",Uy="google.com",Fy="password",jy="twitter.com",Vy="EMAIL_SIGNIN",By="PASSWORD_RESET",zy="RECOVER_EMAIL",qy="REVERT_SECOND_FACTOR_ADDITION",Gy="VERIFY_AND_CHANGE_EMAIL",Hy="VERIFY_EMAIL";function Ky(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $y=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Wy=Ky,Qy=new en("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Jy=new In("@firebase/auth");function Yy(e){if(Jy.logLevel<=yn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Jy.error(`Auth (${Dr}): ${e}`,...n)}}function Xy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw rw(e,...n)}function Zy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rw(e,...n)}function ew(e,t,n){const r=Object.assign(Object.assign({},Wy()),{[t]:n});return new en("auth","Firebase",r).create(t,{appName:e.name})}function tw(e){return ew(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nw(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Xy(e,"argument-error"),ew(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Qy.create(e,...n)}function iw(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw rw(t,...r)}}function sw(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Yy(t),new Error(t)}function ow(e,t){e||sw(t)}function aw(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function lw(){return"http:"===uw()||"https:"===uw()}function uw(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class cw{constructor(e,t){this.shortDelay=e,this.longDelay=t,ow(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())||Qt()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(lw()||Wt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function hw(e,t){ow(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class dw{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void sw("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void sw("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void sw("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},pw=new cw(3e4,6e4);function mw(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function gw(e,t,n,r){return vw(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=on(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),dw.fetch()(ww(e,e.config.apiHost,n,o),l)}))}async function vw(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},fw),t);try{const t=new _w(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Ew(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ew(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Ew(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Ew(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw ew(e,a,o);Xy(e,a)}}catch(eT){if(eT instanceof Zt)throw eT;Xy(e,"network-request-failed",{message:String(eT)})}}async function yw(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await gw(e,t,n,r,i);return"mfaPendingCredential"in s&&Xy(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ww(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?hw(e.config,i):`${e.config.apiScheme}://${i}`}function bw(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _w{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Zy(this.auth,"network-request-failed"))),pw.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ew(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Zy(e,t,r);return i.customData._tokenResponse=n,i}function Iw(e){return void 0!==e&&void 0!==e.getResponse}function Sw(e){return void 0!==e&&void 0!==e.enterprise}class Tw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return bw(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function kw(e,t){return gw(e,"GET","/v2/recaptchaConfig",mw(e,t))}async function xw(e,t){return gw(e,"POST","/v1/accounts:lookup",t)}function Cw(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(eT){}}function Nw(e){return 1e3*Number(e)}function Aw(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Yy("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ft(n);return e?JSON.parse(e):(Yy("Failed to decode base64 JWT payload"),null)}catch(eT){return Yy("Caught error parsing JWT payload as JSON",null===eT||void 0===eT?void 0:eT.toString()),null}}function Rw(e){const t=Aw(e);return iw(t,"internal-error"),iw("undefined"!==typeof t.exp,"internal-error"),iw("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Dw(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(eT){throw eT instanceof Zt&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(eT)&&e.auth.currentUser===e&&await e.auth.signOut(),eT}}class Pw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(eT){return void("auth/network-request-failed"===(null===eT||void 0===eT?void 0:eT.code)&&this.schedule(!0))}this.schedule()}}class Ow{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cw(this.lastLoginAt),this.creationTime=Cw(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Lw(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Dw(e,xw(n,{idToken:r}));iw(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Mw(s.providerUserInfo):[],a=(l=e.providerData,u=o,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const c=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!c&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ow(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function Mw(e){return e.map((e=>{var{providerId:t}=e,n=Oy(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Uw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){iw(e.idToken,"internal-error"),iw("undefined"!==typeof e.idToken,"internal-error"),iw("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Rw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){iw(0!==e.length,"internal-error");const t=Rw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(iw(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await vw(e,{},(async()=>{const n=on({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=ww(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",dw.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Uw;return n&&(iw("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(iw("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(iw("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uw,this.toJSON())}_performRefresh(){return sw("not implemented")}}function Fw(e,t){iw("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class jw{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Oy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ow(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Dw(this,this.stsTokenManager.getToken(this.auth,e));return iw(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=dn(e),r=await n.getIdToken(t),i=Aw(r);iw(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Cw(Nw(i.auth_time)),issuedAtTime:Cw(Nw(i.iat)),expirationTime:Cw(Nw(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=dn(e);await Lw(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(iw(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jw(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){iw(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Lw(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xr(this.auth.app))return Promise.reject(tw(this.auth));const e=await this.getIdToken();return await Dw(this,async function(e,t){return gw(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;iw(y&&E,e,"internal-error");const I=Uw.fromJSON(this.name,E);iw("string"===typeof y,e,"internal-error"),Fw(c,e.name),Fw(h,e.name),iw("boolean"===typeof w,e,"internal-error"),iw("boolean"===typeof b,e,"internal-error"),Fw(d,e.name),Fw(f,e.name),Fw(p,e.name),Fw(m,e.name),Fw(g,e.name),Fw(v,e.name);const S=new jw({uid:y,auth:e,email:h,emailVerified:w,displayName:c,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Uw;r.updateFromServerResponse(t);const i=new jw({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Lw(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];iw(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Mw(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Uw;o.updateFromIdToken(n);const a=new jw({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ow(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Vw=new Map;function Bw(e){ow(e instanceof Function,"Expected a class definition");let t=Vw.get(e);return t?(ow(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Vw.set(e,t),t)}class zw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zw.type="NONE";const qw=zw;function Gw(e,t,n){return`firebase:${e}:${t}:${n}`}class Hw{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Gw(this.userKey,r.apiKey,i),this.fullPersistenceKey=Gw("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jw._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Hw(Bw(qw),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Bw(qw);const s=Gw(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=jw._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(tT){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(tT){}}))),new Hw(i,e,n)):new Hw(i,e,n)}}function Kw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Jw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($w(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Xw(t))return"Blackberry";if(Zw(t))return"Webos";if(Ww(t))return"Safari";if((t.includes("chrome/")||Qw(t))&&!t.includes("edge/"))return"Chrome";if(Yw(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function $w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht();return/firefox\//i.test(e)}function Ww(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht();return/crios\//i.test(e)}function Jw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht();return/iemobile/i.test(e)}function Yw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht();return/android/i.test(e)}function Xw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht();return/blackberry/i.test(e)}function Zw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht();return/webos/i.test(e)}function eb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function tb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht();return eb(e)||Yw(e)||Zw(e)||Xw(e)||/windows phone/i.test(e)||Jw(e)}function nb(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Kw(Ht());break;case"Worker":t=`${Kw(Ht())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Dr}/${r}`}class rb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(eT){r(eT)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(eT){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===eT||void 0===eT?void 0:eT.message})}}}class ib{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class sb{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ab(this),this.idTokenSubscription=new ab(this),this.beforeStateQueue=new rb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bw(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Hw.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(eT){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await xw(this,{idToken:e}),n=await jw._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(eT){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(eT)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return iw(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(eT){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lw(e)}catch(eT){if("auth/network-request-failed"!==(null===eT||void 0===eT?void 0:eT.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xr(this.app))return Promise.reject(tw(this));const t=e?dn(e):null;return t&&iw(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&iw(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return xr(this.app)?Promise.reject(tw(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xr(this.app)?Promise.reject(tw(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Bw(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return gw(e,"GET","/v2/passwordPolicy",mw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ib(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new en("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return gw(e,"POST","/v2/accounts:revokeToken",mw(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Bw(e)||this._popupRedirectResolver;iw(t,this,"argument-error"),this.redirectPersistenceManager=await Hw.create(this,[Bw(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(iw(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return iw(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Jy.logLevel<=yn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Jy.warn(`Auth (${Dr}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function ob(e){return dn(e)}class ab{constructor(e){this.auth=e,this.observer=null,this.addObserver=un((e=>this.observer=e))}get next(){return iw(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let lb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ub(e){return lb.loadJS(e)}function cb(e){return`__${e}${Math.floor(1e6*Math.random())}`}class hb{constructor(e){this.type="recaptcha-enterprise",this.auth=ob(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Sw(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{kw(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Tw(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Sw(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=lb.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ub(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function db(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new hb(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function fb(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await db(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await db(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function pb(e,t,n){const r=ob(e);iw(r._canInitEmulator,r,"emulator-config-failed"),iw(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=mb(t),{host:o,port:a}=function(e){const t=mb(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:gb(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:gb(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function mb(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function gb(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class vb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return sw("not implemented")}_getIdTokenResponse(e){return sw("not implemented")}_linkToIdToken(e,t){return sw("not implemented")}_getReauthenticationResolver(e){return sw("not implemented")}}async function yb(e,t){return gw(e,"POST","/v1/accounts:resetPassword",mw(e,t))}async function wb(e,t){return gw(e,"POST","/v1/accounts:signUp",t)}async function bb(e,t){return yw(e,"POST","/v1/accounts:signInWithPassword",mw(e,t))}async function _b(e,t){return gw(e,"POST","/v1/accounts:sendOobCode",mw(e,t))}async function Eb(e,t){return _b(e,t)}async function Ib(e,t){return _b(e,t)}class Sb extends vb{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Sb(e,t,"password")}static _fromEmailAndCode(e,t){return new Sb(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return fb(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",bb);case"emailLink":return async function(e,t){return yw(e,"POST","/v1/accounts:signInWithEmailLink",mw(e,t))}(e,{email:this._email,oobCode:this._password});default:Xy(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return fb(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wb);case"emailLink":return async function(e,t){return yw(e,"POST","/v1/accounts:signInWithEmailLink",mw(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Xy(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Tb(e,t){return yw(e,"POST","/v1/accounts:signInWithIdp",mw(e,t))}class kb extends vb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new kb(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xy("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Oy(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new kb(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Tb(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Tb(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Tb(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=on(t)}return e}}const xb={USER_NOT_FOUND:"user-not-found"};class Cb extends vb{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Cb({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Cb({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return yw(e,"POST","/v1/accounts:signInWithPhoneNumber",mw(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await yw(e,"POST","/v1/accounts:signInWithPhoneNumber",mw(e,t));if(n.temporaryProof)throw Ew(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return yw(e,"POST","/v1/accounts:signInWithPhoneNumber",mw(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),xb)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Cb({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Nb{constructor(e){var t,n,r,i,s,o;const a=an(ln(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);iw(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=an(ln(e)).link,n=t?an(ln(t)).deep_link_id:null,r=an(ln(e)).deep_link_id;return(r?an(ln(r)).link:null)||r||n||t||e}(e);try{return new Nb(t)}catch(tT){return null}}}class Ab{constructor(){this.providerId=Ab.PROVIDER_ID}static credential(e,t){return Sb._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Nb.parseLink(t);return iw(n,"argument-error"),Sb._fromEmailAndCode(e,n.code,n.tenantId)}}Ab.PROVIDER_ID="password",Ab.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ab.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Rb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Db extends Rb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Pb extends Db{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return iw("providerId"in t&&"signInMethod"in t,"argument-error"),kb._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return iw(e.idToken||e.accessToken,"argument-error"),kb._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Pb.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Pb.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Pb(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(eT){return null}}}class Ob extends Db{constructor(){super("facebook.com")}static credential(e){return kb._fromParams({providerId:Ob.PROVIDER_ID,signInMethod:Ob.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ob.credentialFromTaggedObject(e)}static credentialFromError(e){return Ob.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ob.credential(t.oauthAccessToken)}catch(tT){return null}}}Ob.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ob.PROVIDER_ID="facebook.com";class Lb extends Db{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return kb._fromParams({providerId:Lb.PROVIDER_ID,signInMethod:Lb.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Lb.credentialFromTaggedObject(e)}static credentialFromError(e){return Lb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Lb.credential(n,r)}catch(tT){return null}}}Lb.GOOGLE_SIGN_IN_METHOD="google.com",Lb.PROVIDER_ID="google.com";class Mb extends Db{constructor(){super("github.com")}static credential(e){return kb._fromParams({providerId:Mb.PROVIDER_ID,signInMethod:Mb.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mb.credentialFromTaggedObject(e)}static credentialFromError(e){return Mb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Mb.credential(t.oauthAccessToken)}catch(tT){return null}}}Mb.GITHUB_SIGN_IN_METHOD="github.com",Mb.PROVIDER_ID="github.com";class Ub extends vb{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Tb(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Tb(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Tb(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Ub(n,i):null}static _create(e,t){return new Ub(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fb extends Rb{constructor(e){iw(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Fb.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Fb.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Ub.fromJSON(e);return iw(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Ub._create(r,n)}catch(eT){return null}}}class jb extends Db{constructor(){super("twitter.com")}static credential(e,t){return kb._fromParams({providerId:jb.PROVIDER_ID,signInMethod:jb.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return jb.credentialFromTaggedObject(e)}static credentialFromError(e){return jb.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return jb.credential(n,r)}catch(tT){return null}}}async function Vb(e,t){return yw(e,"POST","/v1/accounts:signUp",mw(e,t))}jb.TWITTER_SIGN_IN_METHOD="twitter.com",jb.PROVIDER_ID="twitter.com";class Bb{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await jw._fromIdTokenResponse(e,n,r),s=zb(n);return new Bb({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=zb(n);return new Bb({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function zb(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class qb extends Zt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,qb.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new qb(e,t,n,r)}}function Gb(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw qb._fromErrorAndOperation(e,n,t,r);throw n}))}function Hb(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Kb(e,t){const n=dn(e);await Wb(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return gw(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Hb(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function $b(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Dw(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Bb._forOperation(e,"link",r)}async function Wb(e,t,n){await Lw(t);const r=!1===e?"provider-already-linked":"no-such-provider";iw(Hb(t.providerData).has(n)===e,t.auth,r)}async function Qb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(xr(r.app))return Promise.reject(tw(r));const i="reauthenticate";try{const s=await Dw(e,Gb(r,i,t,e),n);iw(s.idToken,r,"internal-error");const o=Aw(s.idToken);iw(o,r,"internal-error");const{sub:a}=o;return iw(e.uid===a,r,"user-mismatch"),Bb._forOperation(e,i,s)}catch(eT){throw"auth/user-not-found"===(null===eT||void 0===eT?void 0:eT.code)&&Xy(r,"user-mismatch"),eT}}async function Jb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(xr(e.app))return Promise.reject(tw(e));const r="signIn",i=await Gb(e,r,t),s=await Bb._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Yb(e,t){return Jb(ob(e),t)}async function Xb(e,t){const n=dn(e);return await Wb(!1,n,t.providerId),$b(n,t)}async function Zb(e,t){return Qb(dn(e),t)}async function e_(e,t){if(xr(e.app))return Promise.reject(tw(e));const n=ob(e),r=await async function(e,t){return yw(e,"POST","/v1/accounts:signInWithCustomToken",mw(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Bb._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class t_{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?n_._fromServerResponse(e,t):"totpInfo"in t?r_._fromServerResponse(e,t):Xy(e,"internal-error")}}class n_ extends t_{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new n_(t)}}class r_ extends t_{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new r_(t)}}function i_(e,t,n){var r;iw((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),iw("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(iw(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(iw(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function s_(e){const t=ob(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function o_(e,t){await async function(e,t){return gw(e,"POST","/v1/accounts:update",mw(e,t))}(dn(e),{oobCode:t})}async function a_(e,t){const n=dn(e),r=await yb(n,{oobCode:t}),i=r.requestType;switch(iw(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":iw(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":iw(r.mfaInfo,n,"internal-error");default:iw(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=t_._fromServerResponse(ob(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function l_(e,t){const n={identifier:t,continueUri:lw()?aw():"http://localhost"},{signinMethods:r}=await async function(e,t){return gw(e,"POST","/v1/accounts:createAuthUri",mw(e,t))}(dn(e),n);return r||[]}async function u_(e,t){const n=dn(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&i_(n.auth,r,t);const{email:i}=await async function(e,t){return _b(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function c_(e,t,n){const r=dn(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&i_(r.auth,i,n);const{email:s}=await async function(e,t){return _b(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function h_(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=dn(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Dw(i,async function(e,t){return gw(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function d_(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Dw(e,async function(e,t){return gw(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class f_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class p_ extends f_{constructor(e,t,n,r){super(e,t,n),this.username=r}}class m_ extends f_{constructor(e,t){super(e,"facebook.com",t)}}class g_ extends p_{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class v_ extends f_{constructor(e,t){super(e,"google.com",t)}}class y_ extends p_{constructor(e,t,n){super(e,"twitter.com",t,n)}}function w_(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Aw(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new f_(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new m_(s,i);case"github.com":return new g_(s,i);case"google.com":return new v_(s,i);case"twitter.com":return new y_(s,i,e.screenName||null);case"custom":case"anonymous":return new f_(s,null);default:return new f_(s,r,i)}}(n)}class b_{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new b_("enroll",e,t)}static _fromMfaPendingCredential(e){return new b_("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return b_._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return b_._fromIdtoken(e.multiFactorSession.idToken)}return null}}class __{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=ob(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>t_._fromServerResponse(n,e)));iw(r.mfaPendingCredential,n,"internal-error");const s=b_._fromMfaPendingCredential(r.mfaPendingCredential);return new __(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Bb._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return iw(t.user,n,"internal-error"),Bb._forOperation(t.user,t.operationType,o);default:Xy(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class E_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>t_._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new E_(e)}async getSession(){return b_._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Dw(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Dw(this.user,function(e,t){return gw(e,"POST","/v2/accounts/mfaEnrollment:withdraw",mw(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(eT){throw eT}}}const I_=new WeakMap;const S_="__sak";class T_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(S_,"1"),this.storage.removeItem(S_),Promise.resolve(!0)):Promise.resolve(!1)}catch(tT){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class k_ extends T_{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Jt()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}k_.type="LOCAL";const x_=k_;class C_ extends T_{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}C_.type="SESSION";const N_=C_;class A_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new A_(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function R_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}A_.receivers=[];class D_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=R_("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function P_(){return window}function O_(){return"undefined"!==typeof P_().WorkerGlobalScope&&"function"===typeof P_().importScripts}const L_="firebaseLocalStorageDb",M_="firebaseLocalStorage",U_="fbase_key";class F_{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function j_(e,t){return e.transaction([M_],t?"readwrite":"readonly").objectStore(M_)}function V_(){const e=indexedDB.open(L_,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(M_,{keyPath:U_})}catch(eT){n(eT)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(M_)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(L_);return new F_(e).toPromise()}(),t(await V_()))}))}))}async function B_(e,t,n){const r=j_(e,!0).put({[U_]:t,value:n});return new F_(r).toPromise()}function z_(e,t){const n=j_(e,!0).delete(t);return new F_(n).toPromise()}class q_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await V_()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(eT){if(t++>3)throw eT;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=A_._getInstance(O_()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new D_(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(tT){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await V_();return await B_(e,S_,"1"),await z_(e,S_),!0}catch(tT){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>B_(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=j_(e,!1).get(t),r=await new F_(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>z_(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=j_(e,!1).getAll();return new F_(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}q_.type="LOCAL";const G_=q_;const H_=1e12;class K_{constructor(e){this.auth=e,this.counter=H_,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new $_(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||H_;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||H_;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||H_;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class $_{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;iw(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(eT){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(eT){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const W_=cb("rcb"),Q_=new cw(3e4,6e4);class J_{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=P_().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return iw(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Iw(P_().grecaptcha)?Promise.resolve(P_().grecaptcha):new Promise(((n,r)=>{const i=P_().setTimeout((()=>{r(Zy(e,"network-request-failed"))}),Q_.get());P_()[W_]=()=>{P_().clearTimeout(i),delete P_()[W_];const s=P_().grecaptcha;if(!s||!Iw(s))return void r(Zy(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};ub(`${lb.recaptchaV2Script}?${on({onload:W_,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(i),r(Zy(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=P_().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Y_{async load(e){return new K_(e)}clearedOneInstance(){}}const X_="recaptcha",Z_={theme:"light",type:"image"};class eE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Z_);this.parameters=n,this.type=X_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ob(e),this.isInvisible="invisible"===this.parameters.size,iw("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;iw(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Y_:new J_,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(eT){return Promise.reject(eT)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){iw(!this.parameters.sitekey,this.auth,"argument-error"),iw(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),iw("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=P_()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){iw(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){iw(lw()&&!O_(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await gw(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);iw(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return iw(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class tE{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Cb._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function nE(e,t,n){var r;const i=await n.verify();try{let s;if(iw("string"===typeof i,e,"argument-error"),iw(n.type===X_,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){iw("enroll"===t.type,e,"internal-error");const n=await function(e,t){return gw(e,"POST","/v2/accounts/mfaEnrollment:start",mw(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{iw("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;iw(n,e,"missing-multi-factor-info");const o=await function(e,t){return gw(e,"POST","/v2/accounts/mfaSignIn:start",mw(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return gw(e,"POST","/v1/accounts:sendVerificationCode",mw(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class rE{constructor(e){this.providerId=rE.PROVIDER_ID,this.auth=ob(e)}verifyPhoneNumber(e,t){return nE(this.auth,e,dn(t))}static credential(e,t){return Cb._fromVerification(e,t)}static credentialFromResult(e){const t=e;return rE.credentialFromTaggedObject(t)}static credentialFromError(e){return rE.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Cb._fromTokenResponse(n,r):null}}function iE(e,t){return t?Bw(t):(iw(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rE.PROVIDER_ID="phone",rE.PHONE_SIGN_IN_METHOD="phone";class sE extends vb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tb(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Tb(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Tb(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function oE(e){return Jb(e.auth,new sE(e),e.bypassAuthState)}function aE(e){const{auth:t,user:n}=e;return iw(n,t,"internal-error"),Qb(n,new sE(e),e.bypassAuthState)}async function lE(e){const{auth:t,user:n}=e;return iw(n,t,"internal-error"),$b(n,new sE(e),e.bypassAuthState)}class uE{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(eT){this.reject(eT)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(eT){this.reject(eT)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oE;case"linkViaPopup":case"linkViaRedirect":return lE;case"reauthViaPopup":case"reauthViaRedirect":return aE;default:Xy(this.auth,"internal-error")}}resolve(e){ow(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ow(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cE=new cw(2e3,1e4);class hE extends uE{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,hE.currentPopupAction&&hE.currentPopupAction.cancel(),hE.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return iw(e,this.auth,"internal-error"),e}async onExecution(){ow(1===this.filter.length,"Popup operations only handle one event");const e=R_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Zy(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Zy(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hE.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Zy(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,cE.get())};e()}}hE.currentPopupAction=null;const dE=new Map;class fE extends uE{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=dE.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=vE(t),r=gE(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(eT){e=()=>Promise.reject(eT)}dE.set(this.auth._key(),e)}return this.bypassAuthState||dE.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function pE(e,t){return gE(e)._set(vE(t),"true")}function mE(e,t){dE.set(e._key(),t)}function gE(e){return Bw(e._redirectPersistence)}function vE(e){return Gw("pendingRedirect",e.config.apiKey,e.name)}function yE(e,t,n){return async function(e,t,n){if(xr(e.app))return Promise.reject(tw(e));const r=ob(e);nw(e,t,Rb),await r._initializationPromise;const i=iE(r,n);return await pE(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function wE(e,t,n){return async function(e,t,n){const r=dn(e);if(nw(r.auth,t,Rb),xr(r.auth.app))return Promise.reject(tw(r.auth));await r.auth._initializationPromise;const i=iE(r.auth,n);await pE(i,r.auth);const s=await EE(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function bE(e,t,n){return async function(e,t,n){const r=dn(e);nw(r.auth,t,Rb),await r.auth._initializationPromise;const i=iE(r.auth,n);await Wb(!1,r,t.providerId),await pE(i,r.auth);const s=await EE(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function _E(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(xr(e.app))return Promise.reject(tw(e));const r=ob(e),i=iE(r,t),s=new fE(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function EE(e){const t=R_(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class IE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TE(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!TE(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Zy(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(SE(e))}saveEventToCache(e){this.cachedEventUids.add(SE(e)),this.lastProcessedEventTime=Date.now()}}function SE(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function TE(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}async function kE(e){return gw(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const xE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CE=/^https?/;function NE(e){const t=aw(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!CE.test(n))return!1;if(xE.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const AE=new cw(3e4,6e4);function RE(){const e=P_().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function DE(e){return new Promise(((t,n)=>{var r,i,s;function o(){RE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{RE(),n(Zy(e,"network-request-failed"))},timeout:AE.get()})}if(null===(i=null===(r=P_().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=P_().gapi)||void 0===s?void 0:s.load)){const t=cb("iframefcb");return P_()[t]=()=>{gapi.load?o():n(Zy(e,"network-request-failed"))},ub(`${lb.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw PE=null,e}))}let PE=null;const OE=new cw(5e3,15e3),LE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ME=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UE(e){const t=e.config;iw(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?hw(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Dr},i=ME.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${on(r).slice(1)}`}async function FE(e){const t=await function(e){return PE=PE||DE(e),PE}(e),n=P_().gapi;return iw(n,e,"internal-error"),t.open({where:document.body,url:UE(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LE,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Zy(e,"network-request-failed"),s=P_().setTimeout((()=>{r(i)}),OE.get());function o(){P_().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const jE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class VE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(eT){}}}function BE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},jE),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ht().toLowerCase();n&&(a=Qw(u)?"_blank":n),$w(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return eb(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new VE(null);const h=window.open(t||"",a,c);iw(h,e,"popup-blocked");try{h.focus()}catch(eT){}return new VE(h)}const zE="__/auth/handler",qE="emulator/auth/handler",GE=encodeURIComponent("fac");async function HE(e,t,n,r,i,s){iw(e.config.authDomain,e,"auth-domain-config-required"),iw(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Dr,eventId:i};if(t instanceof Rb){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Db){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${GE}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${zE}`;return hw(t,qE)}(e)}?${on(a).slice(1)}${u}`}const KE="webStorageSupport";const $E=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=N_,this._completeRedirectFn=_E,this._overrideRedirectResult=mE}async _openPopup(e,t,n,r){var i;ow(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return BE(e,await HE(e,t,n,aw(),r),R_())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){P_().location.href=e}(await HE(e,t,n,aw(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ow(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await FE(e),n=new IE(e);return t.register("authEvent",(t=>{iw(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(KE,{type:KE},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[KE];void 0!==i&&t(!!i),Xy(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await kE(e);for(const n of t)try{if(NE(n))return}catch(tT){}Xy(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tb()||Ww()||eb()}};class WE{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return sw("unexpected MultiFactorSessionType")}}}class QE extends WE{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new QE(e)}_finalizeEnroll(e,t,n){return function(e,t){return gw(e,"POST","/v2/accounts/mfaEnrollment:finalize",mw(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return gw(e,"POST","/v2/accounts/mfaSignIn:finalize",mw(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class JE{constructor(){}static assertion(e){return QE._fromCredential(e)}}JE.FACTOR_ID="phone";var YE="@firebase/auth",XE="1.7.9";class ZE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){iw(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Bt())||void 0===t||t[`_${e}`]})("authIdTokenMaxAge");var eI;function tI(){return window}lb={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Zy("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},eI="Browser",Ir(new fn("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;iw(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:eI,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nb(eI)},u=new sb(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Bw);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ir(new fn("auth-internal",(e=>(e=>new ZE(e))(ob(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Fr(YE,XE,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(eI)),Fr(YE,XE,"esm2017");async function nI(e,t,n){var r;const{BuildInfo:i}=tI();ow(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(ow(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return eb()?o.ibi=i.packageName:Yw()?o.apn=i.packageName:Xy(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,HE(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function rI(e){const{cordova:t}=tI();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}class iI extends IE{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInitialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function sI(e){const t=await lI()._get(uI(e));return t&&await lI()._remove(uI(e)),t}function oI(e,t){var n,r;const i=function(e){const t=cI(e),n=t.link?decodeURIComponent(t.link):void 0,r=cI(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return cI(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=cI(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(eT){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Zy(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function aI(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function lI(){return Bw(x_)}function uI(e){return Gw("authEvent",e.config.apiKey,e.name)}function cI(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return an(n.join("?"))}const hI=class{constructor(){this._redirectPersistence=N_,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_E,this._overrideRedirectResult=mE}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new iI(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Xy(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,u,c;const h=tI();iw("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),iw("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),iw("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),iw("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),iw("function"===typeof(null===(c=null===(u=null===h||void 0===h?void 0:h.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===c?void 0:c.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),dE.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:aI(),postBody:null,tenantId:e.tenantId,error:Zy(e,"no-auth-event")}}(e,n,r);await function(e,t){return lI()._set(uI(e),t)}(e,s);const o=await nI(e,s,t);return async function(e,t,n){const{cordova:r}=tI();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function u(){a||(a=window.setTimeout((()=>{o(Zy(e,"redirect-cancelled-by-user"))}),2e3))}function c(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(l),document.addEventListener("resume",u,!1),Yw()&&document.addEventListener("visibilitychange",c,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await rI(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=tI(),n={};eb()?n.iosBundleId=t.packageName:Yw()?n.androidPackageName=t.packageName:Xy(e,"operation-not-supported-in-this-environment"),await kE(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=tI(),s=setTimeout((async()=>{await sI(e),t.onEvent(dI())}),500),o=async n=>{clearTimeout(s);const r=await sI(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=oI(r,n.url)),t.onEvent(i||dI())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l=`${i.packageName.toLowerCase()}://`;tI().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(eT){console.error(eT)}}}};function dI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Zy("no-auth-event")}}function fI(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function pI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht();return!("file:"!==fI()&&"ionic:"!==fI()&&"capacitor:"!==fI()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function mI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht();return Jt()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht();return/Edge\/\d+/.test(e)}(e)}function gI(){try{const e=self.localStorage,t=R_();if(e)return e.setItem(t,"1"),e.removeItem(t),!mI()||Xt()}catch(eT){return vI()&&Xt()}return!1}function vI(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function yI(){return("http:"===fI()||"https:"===fI()||Wt()||pI())&&!(Qt()||Kt())&&gI()&&!vI()}function wI(){return pI()&&"undefined"!==typeof document}const bI={LOCAL:"local",NONE:"none",SESSION:"session"},_I=iw,EI="persistence";async function II(e){await e._initializationPromise;const t=SI(),n=Gw(EI,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function SI(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(eT){return null}}const TI=iw;class kI{constructor(){this.browserResolver=Bw($E),this.cordovaResolver=Bw(hI),this.underlyingResolver=null,this._redirectPersistence=N_,this._completeRedirectFn=_E,this._overrideRedirectResult=mE}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return wI()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return TI(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!wI()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function xI(e){return e.unwrap()}function CI(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new DI(e,function(e,t){var n;const r=dn(e),i=t;return iw(t.customData.operationType,r,"argument-error"),iw(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),__._fromError(r,i)}(e,t))}else if(r){const e=NI(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function NI(e){const{_tokenResponse:t}=e instanceof Zt?e.customData:e;if(!t)return null;if(!(e instanceof Zt)&&"temporaryProof"in t&&"phoneNumber"in t)return rE.credentialFromResult(e);const n=t.providerId;if(!n||n===Fy)return null;let r;switch(n){case Uy:r=Lb;break;case Ly:r=Ob;break;case My:r=Mb;break;case jy:r=jb;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Ub._create(n,o):kb._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Pb(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Zt?r.credentialFromError(e):r.credentialFromResult(e)}function AI(e,t){return t.catch((t=>{throw t instanceof Zt&&CI(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,NI(r)),additionalUserInfo:w_(e),user:PI.getOrCreate(n)};var r}))}async function RI(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>AI(e,n.confirm(t))}}class DI{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return AI(xI(this.auth),this.resolver.resolveSignIn(e))}}class PI{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=dn(e);return I_.has(t)||I_.set(t,E_._fromUser(t)),I_.get(t)}(e)}static getOrCreate(e){return PI.USER_MAP.has(e)||PI.USER_MAP.set(e,new PI(e)),PI.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return AI(this.auth,Xb(this._delegate,e))}async linkWithPhoneNumber(e,t){return RI(this.auth,async function(e,t,n){const r=dn(e);await Wb(!1,r,"phone");const i=await nE(r.auth,t,dn(n));return new tE(i,(e=>Xb(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return AI(this.auth,async function(e,t,n){const r=dn(e);nw(r.auth,t,Rb);const i=iE(r.auth,n);return new hE(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,kI))}async linkWithRedirect(e){return await II(ob(this.auth)),bE(this._delegate,e,kI)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return AI(this.auth,Zb(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return RI(this.auth,async function(e,t,n){const r=dn(e);if(xr(r.auth.app))return Promise.reject(tw(r.auth));const i=await nE(r.auth,t,dn(n));return new tE(i,(e=>Zb(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return AI(this.auth,async function(e,t,n){const r=dn(e);if(xr(r.auth.app))return Promise.reject(Zy(r.auth,"operation-not-supported-in-this-environment"));nw(r.auth,t,Rb);const i=iE(r.auth,n);return new hE(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,kI))}async reauthenticateWithRedirect(e){return await II(ob(this.auth)),wE(this._delegate,e,kI)}sendEmailVerification(e){return u_(this._delegate,e)}async unlink(e){return await Kb(this._delegate,e),this}updateEmail(e){return function(e,t){const n=dn(e);return xr(n.auth.app)?Promise.reject(tw(n.auth)):d_(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return d_(dn(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=dn(e);if(xr(n.auth.app))return Promise.reject(tw(n.auth));await $b(n,t)}(this._delegate,e)}updateProfile(e){return h_(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return c_(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}PI.USER_MAP=new WeakMap;const OI=iw;class LI{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;OI(n,"invalid-api-key",{appName:e.name}),OI(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?kI:void 0;this._delegate=t.initialize({options:{persistence:UI(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap($y),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?PI.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){pb(this._delegate,e,t)}applyActionCode(e){return o_(this._delegate,e)}checkActionCode(e){return a_(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await yb(dn(e),{oobCode:t,newPassword:n}).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&s_(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return AI(this._delegate,async function(e,t,n){if(xr(e.app))return Promise.reject(tw(e));const r=ob(e),i=fb(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vb),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&s_(e),t})),o=await Bb._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return l_(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Nb.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){OI(yI(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await ob(e)._initializationPromise,_E(e,t,!1)}(this._delegate,kI);return e?AI(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){ob(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=MI(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=MI(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=ob(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){iw(t.handleCodeInApp,r,"argument-error"),t&&i_(r,e,t)}(i,n),await fb(r,i,"getOobCode",Ib)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=ob(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&i_(r,i,n),await fb(r,i,"getOobCode",Eb)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){_I(Object.values(bI).includes(t),e,"invalid-persistence-type"),Qt()?_I(t!==bI.SESSION,e,"unsupported-persistence-type"):Kt()?_I(t===bI.NONE,e,"unsupported-persistence-type"):vI()?_I(t===bI.NONE||t===bI.LOCAL&&Xt(),e,"unsupported-persistence-type"):_I(t===bI.NONE||gI(),e,"unsupported-persistence-type")}(this._delegate,e),e){case bI.SESSION:t=N_;break;case bI.LOCAL:t=await Bw(G_)._isAvailable()?G_:x_;break;case bI.NONE:t=qw;break;default:return Xy("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return AI(this._delegate,async function(e){var t;if(xr(e.app))return Promise.reject(tw(e));const n=ob(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Bb({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Vb(n,{returnSecureToken:!0}),i=await Bb._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return AI(this._delegate,Yb(this._delegate,e))}signInWithCustomToken(e){return AI(this._delegate,e_(this._delegate,e))}signInWithEmailAndPassword(e,t){return AI(this._delegate,function(e,t,n){return xr(e.app)?Promise.reject(tw(e)):Yb(dn(e),Ab.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&s_(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return AI(this._delegate,async function(e,t,n){if(xr(e.app))return Promise.reject(tw(e));const r=dn(e),i=Ab.credentialWithLink(t,n||aw());return iw(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Yb(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return RI(this._delegate,async function(e,t,n){if(xr(e.app))return Promise.reject(tw(e));const r=ob(e),i=await nE(r,t,dn(n));return new tE(i,(e=>Yb(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return OI(yI(),this._delegate,"operation-not-supported-in-this-environment"),AI(this._delegate,async function(e,t,n){if(xr(e.app))return Promise.reject(Zy(e,"operation-not-supported-in-this-environment"));const r=ob(e);nw(e,t,Rb);const i=iE(r,n);return new hE(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,kI))}async signInWithRedirect(e){return OI(yI(),this._delegate,"operation-not-supported-in-this-environment"),await II(this._delegate),yE(this._delegate,e,kI)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await a_(dn(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function MI(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&PI.getOrCreate(e)),error:t,complete:n}}function UI(e,t){const n=function(e,t){const n=SI();if(!n)return[];const r=Gw(EI,e,t);switch(n.getItem(r)){case bI.NONE:return[qw];case bI.LOCAL:return[G_,N_];case bI.SESSION:return[N_];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(G_)||n.push(G_),"undefined"!==typeof window)for(const r of[x_,N_])n.includes(r)||n.push(r);return n.includes(qw)||n.push(qw),n}LI.Persistence=bI;class FI{constructor(){this.providerId="phone",this._delegate=new rE(xI(ti.auth()))}static credential(e,t){return rE.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}FI.PHONE_SIGN_IN_METHOD=rE.PHONE_SIGN_IN_METHOD,FI.PROVIDER_ID=rE.PROVIDER_ID;const jI=iw;class VI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ti.app();var r;jI(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new eE(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new fn("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new LI(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Vy,PASSWORD_RESET:By,RECOVER_EMAIL:zy,REVERT_SECOND_FACTOR_ADDITION:qy,VERIFY_AND_CHANGE_EMAIL:Gy,VERIFY_EMAIL:Hy}},EmailAuthProvider:Ab,FacebookAuthProvider:Ob,GithubAuthProvider:Mb,GoogleAuthProvider:Lb,OAuthProvider:Pb,SAMLAuthProvider:Fb,PhoneAuthProvider:FI,PhoneMultiFactorGenerator:JE,RecaptchaVerifier:VI,TwitterAuthProvider:jb,Auth:LI,AuthCredential:vb,Error:Zt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.14")}(ti);ti.initializeApp({apiKey:"AIzaSyB7dfb58FxYX39USJ_zQwg-1E2mPqcZgQU",authDomain:"cedre-6fcd2.firebaseapp.com",projectId:"cedre-6fcd2",storageBucket:"cedre-6fcd2.appspot.com",messagingSenderId:"763822582875",appId:"1:763822582875:web:5531f57909889929dde37e"});const BI=ti.firestore(),zI=ti.storage();ti.auth(),new ti.auth.GoogleAuthProvider;var qI=n(579);const GI=(0,s.createContext)(),HI=e=>{let{children:t}=e;const[n,r]=(0,s.useState)({type:[],material:[],price:[]});return(0,qI.jsx)(GI.Provider,{value:{filters:n,setFilters:r},children:t})};function KI(){const{setFilters:e}=(0,s.useContext)(GI),[t,n]=(0,s.useState)("Sofa"),[r,i]=(0,s.useState)(""),[o,a]=(0,s.useState)(""),[l,u]=(0,s.useState)([]),c=Qe();(0,s.useEffect)((()=>{h(t)}),[t]);const h=async e=>{try{if(e){const t=await BI.collection(e).get();let n=new Set;t.forEach((e=>{const t=e.data();t.material&&t.material.forEach((e=>{n.add(e)}))})),u(Array.from(n)),console.log("Materials for",e,":",Array.from(n))}}catch(t){console.error("Error fetching materials: ",t)}};return(0,s.useEffect)((()=>{l.length>0&&i(l[0])}),[l]),(0,qI.jsxs)("div",{className:"block1",children:[(0,qI.jsx)("h1",{children:"Your Ideas, Our Craft"}),(0,qI.jsxs)("div",{className:"form",children:[(0,qI.jsxs)("div",{className:"chapter",children:[(0,qI.jsx)("label",{className:"chapter_name",htmlFor:"type",children:"Select type"}),(0,qI.jsxs)("select",{className:"dropdown",id:"type",name:"type",onChange:e=>{const t=e.target.value;n(t),i("")},children:[(0,qI.jsx)("option",{disabled:!0,value:"",children:"Select type"}),Object.entries({Sofa:"Sofa",Armchair:"Armchair",Wardrobe:"Wardrobe",Bed:"Bed"}).map((e=>{let[t,n]=e;return(0,qI.jsx)("option",{className:"form_el",value:t,children:n},t)}))]})]}),(0,qI.jsxs)("div",{className:"chapter",children:[(0,qI.jsx)("label",{className:"chapter_name",htmlFor:"material",children:"Made of"}),(0,qI.jsxs)("select",{className:"dropdown",id:"material",name:"material",onChange:e=>{const t=e.target.value;i(t)},value:r,children:[(0,qI.jsx)("option",{disabled:!0,value:"",children:"Select material"}),l.map(((e,t)=>(0,qI.jsx)("option",{className:"form_el",value:e,children:e},t)))]})]}),(0,qI.jsxs)("div",{className:"chapter",children:[(0,qI.jsx)("label",{className:"chapter_name",htmlFor:"price",children:"Price"}),(0,qI.jsxs)("select",{className:"dropdown",id:"price",name:"price",onChange:e=>{const t=e.target.value;a(t)},value:o,children:[(0,qI.jsx)("option",{disabled:!0,value:"",children:"Select price"}),(0,qI.jsx)("option",{className:"form_el",value:"<$50",children:"Up to $50"}),(0,qI.jsx)("option",{className:"form_el",value:"50-100",children:"$50-$100"}),(0,qI.jsx)("option",{className:"form_el",value:"100-200",children:"$100-$200"}),(0,qI.jsx)("option",{className:"form_el",value:"200-300",children:"$200-$300"}),(0,qI.jsx)("option",{className:"form_el",value:">$300",children:"Over $300"})]})]}),(0,qI.jsx)("button",{className:"prod_search",onClick:()=>{e({type:t?[t]:[],material:r?[r]:[],price:o?[o]:[]}),c("/catalog")},children:"Search"})]})]})}const $I=n.p+"static/media/saa1.e0c9191798637563489a.png",WI=n.p+"static/media/saa2.e09d6a5e37db154dd9b1.png",QI=n.p+"static/media/saa3.fece0b094a583d3480fa.png";function JI(){const e=Qe(),{setFilters:t}=(0,s.useContext)(GI);return(0,qI.jsxs)("div",{className:"block2",children:[(0,qI.jsx)("h2",{children:"Sofas and Armchairs"}),(0,qI.jsxs)("div",{className:"box",children:[(0,qI.jsx)("img",{src:$I,alt:"Sofa",className:"big_img"}),(0,qI.jsxs)("div",{className:"box2",children:[(0,qI.jsx)("img",{src:WI,alt:"Sofa2",className:"lil_img"}),(0,qI.jsx)("p",{className:"block_text",children:"Our store offers a wide selection of armchairs and sofas known for their stylish design and high quality. Each piece is crafted using premium materials imported from Europe to ensure durability and comfort. You can choose from a variety of functional features that perfectly complement your interior."}),(0,qI.jsx)("button",{className:"see_more",onClick:()=>{t({type:["Sofa"]}),e("/catalog"),window.scrollTo(0,0)},children:"See more"})]}),(0,qI.jsx)("img",{src:QI,alt:"Sofa3",className:"big_img"})]})]})}const YI=n.p+"static/media/ward1.93ff6bbfbcd030cfce93.png",XI=n.p+"static/media/ward2.ef24991297c5fca25ba2.png",ZI=n.p+"static/media/ward3.687732821e3a4b683517.png";function eS(){const e=Qe(),{setFilters:t}=(0,s.useContext)(GI);return(0,qI.jsxs)("div",{className:"block3",children:[(0,qI.jsx)("h2",{children:"Wardrobes"}),(0,qI.jsxs)("div",{className:"box",children:[(0,qI.jsx)("img",{src:YI,alt:"Wardrobe",className:"big_img"}),(0,qI.jsx)("img",{src:XI,alt:"Wardrobe2",className:"big_img"}),(0,qI.jsxs)("div",{className:"box2",children:[(0,qI.jsx)("img",{src:ZI,alt:"Wardrobe3",className:"lil_img"}),(0,qI.jsx)("p",{className:"block_text",children:"Range of our wardrobes impresses with its elegance and quality. Each wardrobe is crafted with attention to detail, using only the finest materials. We offer wardrobes in various configurations and styles to help you organize your space efficiently while adding charm and style to your interior."}),(0,qI.jsx)("button",{className:"see_more",onClick:()=>{t({type:["Wardrobe"]}),e("/catalog"),window.scrollTo(0,0)},children:"Search"})]})]})]})}const tS=n.p+"static/media/bed1.fc16d8b7fd130e3a61d9.png",nS=n.p+"static/media/bed2.278f4da01f4711332878.png",rS=n.p+"static/media/bed3.af7b548cb5f9e2951815.png";function iS(){const e=Qe(),{setFilters:t}=(0,s.useContext)(GI);return(0,qI.jsxs)("div",{className:"block4",children:[(0,qI.jsx)("h2",{children:"Beds"}),(0,qI.jsxs)("div",{className:"box",children:[(0,qI.jsxs)("div",{className:"box2",children:[(0,qI.jsx)("img",{src:tS,alt:"Bed1",className:"lil_img"}),(0,qI.jsx)("p",{className:"block_text",children:"Our beds are designed to provide you with a comfortable and restful sleep. Each bed is crafted using the finest materials to ensure reliability and longevity. With a wide selection of models and designs, you can find the perfect bed to fit your bedroom and create an atmosphere of tranquility and comfort."}),(0,qI.jsx)("button",{className:"see_more",onClick:()=>{t({type:["Bed"]}),e("/catalog"),window.scrollTo(0,0)},children:"Search"})]}),(0,qI.jsx)("img",{src:nS,alt:"Bed2",className:"big_img"}),(0,qI.jsx)("img",{src:rS,alt:"Bed3",className:"big_img"})]})]})}const sS=n.p+"static/media/kit1.9b9447302805830923f4.png",oS=n.p+"static/media/kit2.fe7c6e6b0fe8e60f74ea.png",aS=n.p+"static/media/kit3.fb0235a2ad6d2e28e4f8.png";function lS(){return(0,qI.jsxs)("div",{className:"block5",children:[(0,qI.jsx)("h2",{children:"Kitchens"}),(0,qI.jsxs)("div",{className:"box",children:[(0,qI.jsx)("img",{src:sS,alt:"Kitchen",className:"big_img"}),(0,qI.jsxs)("div",{className:"box2",children:[(0,qI.jsx)("img",{src:oS,alt:"Kitchen2",className:"lil_img"}),(0,qI.jsx)("p",{className:"block_text",children:"Step into a world of culinary elegance with our meticulously crafted kitchens. We offer a range of designs tailored to meet your needs, all constructed from premium materials sourced for their durability and aesthetic appeal. Explore our collection and find the perfect kitchen to transform your home."}),(0,qI.jsx)("button",{className:"see_more",children:"Search"})]}),(0,qI.jsx)("img",{src:aS,alt:"Kitchen3",className:"big_img"})]})]})}const uS=n.p+"static/media/dec1.25e29be6eaa98df1721e.png",cS=n.p+"static/media/dec2.97e46fbef189c7d9da1a.png",hS=n.p+"static/media/dec3.0795a273917265f44cff.png";function dS(){return(0,qI.jsxs)("div",{className:"block6",children:[(0,qI.jsx)("h2",{children:"Decor and accessories"}),(0,qI.jsxs)("div",{className:"box",children:[(0,qI.jsx)("img",{src:uS,alt:"Decor",className:"big_img"}),(0,qI.jsx)("img",{src:cS,alt:"Decor2",className:"big_img"}),(0,qI.jsxs)("div",{className:"box2",children:[(0,qI.jsx)("img",{src:hS,alt:"Decor3",className:"lil_img"}),(0,qI.jsxs)("p",{className:"block_text",children:["Add the finishing touch to your interior with our decorative elements and accessories. Choose from our diverse range of decor items that match your style and add a touch of luxury ",(0,qI.jsx)("br",{}),"to your home. All our decorative elements are made from high-quality materials to ensure the durability of your interior."]}),(0,qI.jsx)("button",{className:"see_more",children:"Search"})]})]})]})}const fS=n.p+"static/media/aboutus.9af0aa32e78ea2a2149d.png";function pS(){return(0,qI.jsxs)("div",{className:"block7",children:[(0,qI.jsxs)("div",{className:"au_block",children:[(0,qI.jsx)("h2",{children:"About Us"}),(0,qI.jsxs)("div",{className:"au_block2",children:[(0,qI.jsx)("p",{className:"block_text",style:{width:"35.32vw"},children:"Welcome to C\xe8dre, your ultimate destination for premium furniture online. At C\xe8dre, we believe that furniture should not only be functional but also a reflection of your style and personality. With years of experience in the industry, we curate a carefully selected collection of high-quality furniture pieces that are designed to enhance your living space. From luxurious sofas to elegant dining sets, each item in our collection is crafted with precision and attention to detail."}),(0,qI.jsx)("p",{className:"block_text",style:{width:"35.32vw"},children:"Our commitment to excellence extends beyond our products. We pride ourselves on providing exceptional customer service and a seamless shopping experience. Whether you're furnishing your home or office, our knowledgeable team is here to assist you every step of the way."}),(0,qI.jsx)("p",{className:"block_text",style:{width:"35.32vw"},children:"Thank you for choosing C\xe8dre. We look forward to helping you create the perfect ambiance in your space."}),(0,qI.jsxs)("div",{className:"au_box",children:[(0,qI.jsxs)("div",{children:[(0,qI.jsx)("p",{className:"au_fact",children:"14 years"}),(0,qI.jsx)("p",{className:"block_text",style:{width:"11.67vw"},children:"Innovative experience in the furniture industry"})]}),(0,qI.jsxs)("div",{children:[(0,qI.jsx)("p",{className:"au_fact",children:"36 000+"}),(0,qI.jsx)("p",{className:"block_text",style:{width:"11.67vw"},children:"Satisfied customers who chose us for their interior"})]}),(0,qI.jsxs)("div",{children:[(0,qI.jsx)("p",{className:"au_fact",children:"12"}),(0,qI.jsx)("p",{className:"block_text",style:{width:"11.67vw"},children:"\u0421ountries from Europe cooperate with us"})]})]})]})]}),(0,qI.jsx)("img",{src:fS,alt:"Team",className:"big_img_au"})]})}function mS(){return window.scrollTo(0,0),(0,qI.jsxs)(qI.Fragment,{children:[(0,qI.jsx)(KI,{}),(0,qI.jsx)(JI,{}),(0,qI.jsx)(eS,{}),(0,qI.jsx)(iS,{}),(0,qI.jsx)(lS,{}),(0,qI.jsx)(dS,{}),(0,qI.jsx)(pS,{})]})}var gS,vS={};var yS=function(){if(gS)return vS;gS=1,vS.parse=function(e,n){if("string"!==typeof e)throw new TypeError("argument str must be a string");var r={},i=e.length;if(i<2)return r;var s=n&&n.decode||l,c=0,h=0,d=0;do{if(-1===(h=e.indexOf("=",c)))break;if(-1===(d=e.indexOf(";",c)))d=i;else if(h>d){c=e.lastIndexOf(";",h-1)+1;continue}var f=o(e,c,h),p=a(e,h,f),m=e.slice(f,p);if(!t.call(r,m)){var g=o(e,h+1,d),v=a(e,d,g);34===e.charCodeAt(g)&&34===e.charCodeAt(v-1)&&(g++,v--);var y=e.slice(g,v);r[m]=u(y,s)}c=d+1}while(c<i);return r},vS.serialize=function(t,o,a){var l=a&&a.encode||encodeURIComponent;if("function"!==typeof l)throw new TypeError("option encode is invalid");if(!n.test(t))throw new TypeError("argument name is invalid");var u=l(o);if(!r.test(u))throw new TypeError("argument val is invalid");var c=t+"="+u;if(!a)return c;if(null!=a.maxAge){var h=Math.floor(a.maxAge);if(!isFinite(h))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+h}if(a.domain){if(!i.test(a.domain))throw new TypeError("option domain is invalid");c+="; Domain="+a.domain}if(a.path){if(!s.test(a.path))throw new TypeError("option path is invalid");c+="; Path="+a.path}if(a.expires){var d=a.expires;if(!function(t){return"[object Date]"===e.call(t)}(d)||isNaN(d.valueOf()))throw new TypeError("option expires is invalid");c+="; Expires="+d.toUTCString()}a.httpOnly&&(c+="; HttpOnly");a.secure&&(c+="; Secure");a.partitioned&&(c+="; Partitioned");if(a.priority){switch("string"===typeof a.priority?a.priority.toLowerCase():a.priority){case"low":c+="; Priority=Low";break;case"medium":c+="; Priority=Medium";break;case"high":c+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(a.sameSite){switch("string"===typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c};var e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,n=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,r=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/;function o(e,t,n){do{var r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<n);return n}function a(e,t,n){for(;t>n;){var r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return n}function l(e){return-1!==e.indexOf("%")?decodeURIComponent(e):e}function u(e,t){try{return t(e)}catch(eT){return e}}return vS}();function wS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(!t.doNotParse)try{return JSON.parse(n)}catch(eT){}return e}class bS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.update=()=>{if(!this.HAS_DOCUMENT_COOKIE)return;const e=this.cookies;this.cookies=yS.parse(document.cookie),this._checkChanges(e)};const n="undefined"===typeof document?"":document.cookie;this.cookies=function(e){return"string"===typeof e?yS.parse(e):"object"===typeof e&&null!==e?e:{}}(e||n),this.defaultSetOptions=t,this.HAS_DOCUMENT_COOKIE=function(){const e="undefined"===typeof global?void 0:global.TEST_HAS_DOCUMENT_COOKIE;return"boolean"===typeof e?e:"object"===typeof document&&"string"===typeof document.cookie}()}_emitChange(e){for(let t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)}_checkChanges(e){new Set(Object.keys(e).concat(Object.keys(this.cookies))).forEach((t=>{e[t]!==this.cookies[t]&&this._emitChange({name:t,value:wS(this.cookies[t])})}))}_startPolling(){this.pollingInterval=setInterval(this.update,300)}_stopPolling(){this.pollingInterval&&clearInterval(this.pollingInterval)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.doNotUpdate||this.update(),wS(this.cookies[e],t)}getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.doNotUpdate||this.update();const t={};for(let n in this.cookies)t[n]=wS(this.cookies[n],e);return t}set(e,t,n){n=n?Object.assign(Object.assign({},this.defaultSetOptions),n):this.defaultSetOptions;const r="string"===typeof t?t:JSON.stringify(t);this.cookies=Object.assign(Object.assign({},this.cookies),{[e]:r}),this.HAS_DOCUMENT_COOKIE&&(document.cookie=yS.serialize(e,r,n)),this._emitChange({name:e,value:t,options:n})}remove(e,t){const n=t=Object.assign(Object.assign(Object.assign({},this.defaultSetOptions),t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=Object.assign({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=yS.serialize(e,"",n)),this._emitChange({name:e,value:void 0,options:t})}addChangeListener(e){this.changeListeners.push(e),this.HAS_DOCUMENT_COOKIE&&1===this.changeListeners.length&&("object"===typeof window&&"cookieStore"in window?window.cookieStore.addEventListener("change",this.update):this._startPolling())}removeChangeListener(e){const t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1),this.HAS_DOCUMENT_COOKIE&&0===this.changeListeners.length&&("object"===typeof window&&"cookieStore"in window?window.cookieStore.removeEventListener("change",this.update):this._stopPolling())}}const _S=s.createContext(new bS),{Provider:ES,Consumer:IS}=_S;s.Component;"function"===typeof SuppressedError&&SuppressedError;var SS,TS={exports:{}},kS={};TS.exports=function(){if(SS)return kS;SS=1;var e="function"===typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,c=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,d=e?Symbol.for("react.suspense_list"):60120,f=e?Symbol.for("react.memo"):60115,p=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,g=e?Symbol.for("react.fundamental"):60117,v=e?Symbol.for("react.responder"):60118,y=e?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var d=e.$$typeof;switch(d){case t:switch(e=e.type){case l:case u:case r:case s:case i:case h:return e;default:switch(e=e&&e.$$typeof){case a:case c:case p:case f:case o:return e;default:return d}}case n:return d}}}function b(e){return w(e)===u}return kS.AsyncMode=l,kS.ConcurrentMode=u,kS.ContextConsumer=a,kS.ContextProvider=o,kS.Element=t,kS.ForwardRef=c,kS.Fragment=r,kS.Lazy=p,kS.Memo=f,kS.Portal=n,kS.Profiler=s,kS.StrictMode=i,kS.Suspense=h,kS.isAsyncMode=function(e){return b(e)||w(e)===l},kS.isConcurrentMode=b,kS.isContextConsumer=function(e){return w(e)===a},kS.isContextProvider=function(e){return w(e)===o},kS.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===t},kS.isForwardRef=function(e){return w(e)===c},kS.isFragment=function(e){return w(e)===r},kS.isLazy=function(e){return w(e)===p},kS.isMemo=function(e){return w(e)===f},kS.isPortal=function(e){return w(e)===n},kS.isProfiler=function(e){return w(e)===s},kS.isStrictMode=function(e){return w(e)===i},kS.isSuspense=function(e){return w(e)===h},kS.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===r||e===u||e===s||e===i||e===h||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===f||e.$$typeof===o||e.$$typeof===a||e.$$typeof===c||e.$$typeof===g||e.$$typeof===v||e.$$typeof===y||e.$$typeof===m)},kS.typeOf=w,kS}();var xS=TS.exports,CS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},NS={};NS[xS.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},NS[xS.Memo]=CS;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;function AS(e){const t=(0,s.useContext)(_S);if(!t)throw new Error("Missing <CookiesProvider>");const[n,r]=(0,s.useState)((()=>t.getAll({doNotUpdate:!0})));"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement&&(0,s.useLayoutEffect)((()=>{function i(){const i=t.getAll({doNotUpdate:!0});(function(e,t,n){if(!e)return!0;for(let r of e)if(t[r]!==n[r])return!0;return!1})(e||null,i,n)&&r(i)}return t.addChangeListener(i),()=>{t.removeChangeListener(i)}}),[t,n]);const i=(0,s.useMemo)((()=>t.set.bind(t)),[t]),o=(0,s.useMemo)((()=>t.remove.bind(t)),[t]),a=(0,s.useMemo)((()=>t.update.bind(t)),[t]);return[n,i,o,a]}function RS(e){let{onClose:t}=e;const[n,r]=AS(["sessionID"]),i=n.sessionID,[o,a]=(0,s.useState)([]),[l,u]=(0,s.useState)(!0);(0,s.useEffect)((()=>{i&&BI.collection("ShoppingBag").doc(i).get().then((e=>{if(e.exists){const t=e.data();a(t.items||[])}else u(!1)})).catch((e=>{console.error("Error fetching document:",e)}))}),[i]);function c(e){const t=parseFloat(e);if(isNaN(t))return e;return`$${t.toLocaleString("en-US",{minimumFractionDigits:2})}`}return(0,qI.jsx)("div",{className:"overlay",onClick:t,children:(0,qI.jsxs)("div",{className:"shop_bag",onClick:e=>e.stopPropagation(),children:[(0,qI.jsxs)("p",{className:"bag_title",children:["Shopping bag (",o.length,")"]}),l&&o.length>0?(0,qI.jsxs)("div",{children:[o.map(((e,t)=>(0,qI.jsxs)("div",{className:"bag_item",children:[(0,qI.jsx)("img",{alt:e.name,src:e.img,className:"bag_item_img"}),(0,qI.jsxs)("div",{className:"bag_item_info",children:[(0,qI.jsxs)("p",{className:"bag_item_title",children:[e.collection_name,(0,qI.jsxs)("span",{style:{fontWeight:"700"},children:[" ",e.product_name]})]}),(0,qI.jsxs)("p",{className:"bag_item_text",children:["Material: ",e.material.join(", ")]}),(0,qI.jsxs)("p",{className:"bag_item_text",children:["Color: ",e.color]}),(0,qI.jsxs)("p",{className:"bag_item_text",children:["Quantity: ",e.quantity]}),(0,qI.jsx)("p",{className:"bag_item_price",children:c(e.price)}),(0,qI.jsx)("button",{className:"remove_item_button",onClick:()=>(e=>{const t=o.filter(((t,n)=>n!==e));a(t),BI.collection("ShoppingBag").doc(i).set({items:t}).then((()=>{console.log("Item removed from shopping bag in Firestore")})).catch((e=>{console.error("Error updating shopping bag:",e)}))})(t),children:"Remove"})]})]},t))),(0,qI.jsxs)("div",{className:"subt_box",children:[(0,qI.jsx)("p",{className:"subt",children:"Subtotal:"}),(0,qI.jsx)("p",{className:"bag_item_price",children:c(o.reduce(((e,t)=>{const n=parseFloat(t.price.replace("$",""));return isNaN(n)?e:e+n*t.quantity}),0))})]}),(0,qI.jsx)("button",{className:"checkout",children:"Checkout"}),(0,qI.jsx)("button",{className:"empty_bag_button",onClick:()=>{r("sessionID","",{path:"/"}),a([]),alert("Your shopping bag has been emptied.")},children:"Empty the bag"})]}):(0,qI.jsx)("div",{className:"bag_title",children:"Your shopping bag is empty."})]})})}function DS(){const[e,t]=(0,s.useState)(!1);return(0,qI.jsxs)(qI.Fragment,{children:[(0,qI.jsx)("header",{children:(0,qI.jsxs)("div",{className:"header",children:[(0,qI.jsx)("span",{className:"logo",children:"C\xe8dre"}),(0,qI.jsxs)("ul",{className:"navigation",children:[(0,qI.jsx)("li",{children:(0,qI.jsx)(At,{exact:!0,to:"/Cedre",className:"link",activeClassName:"active",children:"Home"})}),(0,qI.jsx)("li",{children:(0,qI.jsx)(At,{to:"/catalog",className:"link",activeClassName:"active",children:"Catalog"})}),(0,qI.jsx)("li",{children:(0,qI.jsx)(At,{to:"/delivery",className:"link",activeClassName:"active",children:"Delivery"})}),(0,qI.jsx)("li",{children:(0,qI.jsx)(At,{to:"/contacts",className:"link",activeClassName:"active",children:"Contacts"})})]}),(0,qI.jsxs)("ul",{className:"menu",children:[(0,qI.jsx)(At,{to:"/Cedre",children:(0,qI.jsx)("button",{className:"search"})}),(0,qI.jsx)("button",{className:"account"}),(0,qI.jsx)("button",{onClick:()=>{t(!0)},className:"basket"})]})]})}),e&&(0,qI.jsx)(RS,{onClose:()=>{t(!1)}})]})}const PS=n.p+"static/media/inst.16e6222f64a3d153bc524544ac631cd2.svg";const OS=n.p+"static/media/tg.ff4bce1a3bd5b9fe7b922b69a0576fb7.svg";const LS=n.p+"static/media/behance.ad615140e313b469db362e5895e60d4e.svg";function MS(){const e=Qe(),{setFilters:t}=(0,s.useContext)(GI);return(0,qI.jsxs)("footer",{children:[(0,qI.jsx)("p",{className:"footer_text",children:"We will create the home of your dreams"}),(0,qI.jsxs)("div",{className:"foot_box",children:[(0,qI.jsx)("span",{className:"foot_logo",children:"C\xe8dre"}),(0,qI.jsxs)("div",{className:"nav_box",children:[(0,qI.jsxs)("div",{className:"nav_box3",children:[(0,qI.jsx)("a",{href:"mailto:ultradesign@gmail.com",className:"footer_link",children:"ultradesign@gmail.com"}),(0,qI.jsx)("a",{href:"tel:+38 (096) 875 49 57",className:"tel",children:"+38 (096) 875 49 57"}),(0,qI.jsx)("a",{href:"https://maps.app.goo.gl/7UNNHzttEpRxTgGJ8",className:"footer_link",children:"Address: 37, Beresteyskyi Prospect, Kyiv"}),(0,qI.jsxs)("div",{className:"sites",children:[(0,qI.jsx)("a",{href:"https://www.instagram.com/alyona_shunevych/",children:(0,qI.jsx)("img",{src:PS,style:{height:"1.5vw"},alt:"inst"})}),(0,qI.jsx)("a",{href:"https://t.me/alona_shunevych",children:(0,qI.jsx)("img",{src:OS,style:{height:"1.5vw"},alt:"tg"})}),(0,qI.jsx)("a",{href:"https://www.behance.net/alyona_shunevych",children:(0,qI.jsx)("img",{src:LS,style:{height:"1.5vw"},alt:"behance"})})]})]}),(0,qI.jsxs)("div",{className:"nav_box2",children:[(0,qI.jsx)(At,{to:"/catalog",className:"footer_link",children:"Catalog"}),(0,qI.jsx)(At,{to:"/delivery",className:"footer_link",children:"Delivery"}),(0,qI.jsx)(At,{to:"/news",className:"footer_link",children:"News"}),(0,qI.jsx)(At,{to:"/reviews",className:"footer_link",children:"Reviews"}),(0,qI.jsx)(At,{to:"/about us",className:"footer_link",children:"About us"})]}),(0,qI.jsxs)("div",{className:"nav_box2",children:[(0,qI.jsx)("div",{onClick:()=>{t({type:["Sofa"]}),e("/catalog"),window.scrollTo(0,0)},className:"footer_link",children:"Sofas"}),(0,qI.jsx)("div",{onClick:()=>{t({type:["Armchair"]}),e("/catalog"),window.scrollTo(0,0)},className:"footer_link",children:"Armchairs"}),(0,qI.jsx)("div",{onClick:()=>{t({type:["Wardrobe"]}),e("/catalog"),window.scrollTo(0,0)},className:"footer_link",children:"Wardrobes"}),(0,qI.jsx)("div",{onClick:()=>{t({type:["Bed"]}),e("/catalog"),window.scrollTo(0,0)},className:"footer_link",children:"Beds"}),(0,qI.jsx)(At,{to:"/kitchens",className:"footer_link",children:"Kitchens"}),(0,qI.jsx)(At,{to:"/decor and accessories",className:"footer_link",children:"Decor and accessories"})]})]}),(0,qI.jsxs)("div",{className:"small_text_box",children:[(0,qI.jsx)("p",{className:"foot_small_text",children:"\xa9 2010-2024 \xabC\xe8dre\xbb"}),(0,qI.jsx)("p",{className:"foot_small_text",children:"Privacy policy"})]})]})]})}function US(){return(0,qI.jsxs)(qI.Fragment,{children:[(0,qI.jsx)(DS,{}),(0,qI.jsx)("main",{children:(0,qI.jsx)(ct,{})}),(0,qI.jsx)(MS,{})]})}function FS(e){let{priceRanges:t}=e;const{filters:n,setFilters:r}=(0,s.useContext)(GI),[i,o]=(0,s.useState)([]),[a,l]=(0,s.useState)([]),[u,c]=(0,s.useState)([]),h={Sofa:"Sofa",Armchair:"Armchair",Wardrobe:"Wardrobe",Bed:"Bed"};(0,s.useEffect)((()=>{c(Object.keys(h))}),[]),(0,s.useEffect)((()=>{(async()=>{if(n.type&&n.type.length>0){const t=n.type[0];try{let e=new Set,n=[];(await BI.collection(h[t]).get()).forEach((t=>{const r=t.data();r.material.forEach((t=>{e.add(t)})),n.push(r.color)})),o(Array.from(e)),l(Array.from(new Set(n)))}catch(e){console.error("Error fetching data: ",e)}}})()}),[n.type]);const d=(e,t)=>{r("type"===e?n=>({...n,[e]:[t]}):"price"===e?n=>n.price&&n.price.includes(t)?{...n,[e]:[]}:{...n,[e]:[t]}:n=>{var r;return{...n,[e]:null!==(r=n[e])&&void 0!==r&&r.includes(t)?n[e].filter((e=>e!==t)):[...n[e]||[],t]}})};return(0,s.useEffect)((()=>{console.log("Current Filters:",n)}),[n]),(0,qI.jsxs)("div",{className:"filter",children:[(0,qI.jsx)("h1",{className:"cat_h1",children:"Catalog"}),(0,qI.jsxs)("div",{className:"filter-category",children:[(0,qI.jsx)("h2",{className:"cat_h2",children:"Type"}),(0,qI.jsx)("ul",{className:"param_box",children:u.map((e=>{var t;return(0,qI.jsx)("li",{onClick:()=>d("type",e),children:(0,qI.jsx)("span",{className:"param",style:{fontWeight:null!==n&&void 0!==n&&null!==(t=n.type)&&void 0!==t&&t.includes(e)?"700":"500"},children:e})},e)}))})]}),(0,qI.jsxs)("div",{className:"filter-category",children:[(0,qI.jsx)("h2",{className:"cat_h2",children:"Material"}),(0,qI.jsx)("ul",{className:"param_box",children:i.map((e=>{var t;return(0,qI.jsx)("li",{onClick:()=>d("material",e),children:(0,qI.jsx)("span",{className:"param",style:{fontWeight:null!==n&&void 0!==n&&null!==(t=n.material)&&void 0!==t&&t.includes(e)?"700":"500"},children:e})},e)}))})]}),(0,qI.jsxs)("div",{className:"filter-category",children:[(0,qI.jsx)("h2",{className:"cat_h2",children:"Color"}),(0,qI.jsx)("ul",{className:"param_box",children:a.map((e=>{var t;return(0,qI.jsx)("li",{onClick:()=>d("color",e),children:(0,qI.jsx)("span",{className:"param",style:{fontWeight:null!==n&&void 0!==n&&null!==(t=n.color)&&void 0!==t&&t.includes(e)?"700":"500"},children:e})},e)}))})]}),(0,qI.jsxs)("div",{className:"filter-category",children:[(0,qI.jsx)("h2",{className:"cat_h2",children:"Price"}),(0,qI.jsx)("ul",{className:"param_box",children:t.map((e=>{var t;return(0,qI.jsx)("li",{onClick:()=>d("price",e),children:(0,qI.jsx)("span",{className:"param",style:{fontWeight:null!==n&&void 0!==n&&null!==(t=n.price)&&void 0!==t&&t.includes(e)?"700":"500"},children:e})},e)}))})]})]})}var jS,VS=new Uint8Array(16);function BS(){if(!jS&&!(jS="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jS(VS)}const zS=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const qS=function(e){return"string"===typeof e&&zS.test(e)};for(var GS=[],HS=0;HS<256;++HS)GS.push((HS+256).toString(16).substr(1));const KS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(GS[e[t+0]]+GS[e[t+1]]+GS[e[t+2]]+GS[e[t+3]]+"-"+GS[e[t+4]]+GS[e[t+5]]+"-"+GS[e[t+6]]+GS[e[t+7]]+"-"+GS[e[t+8]]+GS[e[t+9]]+"-"+GS[e[t+10]]+GS[e[t+11]]+GS[e[t+12]]+GS[e[t+13]]+GS[e[t+14]]+GS[e[t+15]]).toLowerCase();if(!qS(n))throw TypeError("Stringified UUID is invalid");return n};const $S=function(e,t,n){var r=(e=e||{}).random||(e.rng||BS)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return KS(r)};function WS(e){let{filters:t}=e;const[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)(!0),[a,l]=AS(["sessionID"]),[u]=(0,s.useState)((()=>{const e=a.sessionID;if(e)return e;{const e=$S();return l("sessionID",e,{path:"/"}),e}})),[c,h]=(0,s.useState)(!1);if((0,s.useEffect)((()=>{console.log("Current Filters:",t);(async()=>{try{if(!t)return;const e={Sofa:"Sofa",Armchair:"Armchair",Wardrobe:"Wardrobe",Bed:"Bed"};let n=[];for(const t of Object.values(e)){const e=(await BI.collection(t).get()).docs.map((async e=>{const n=e.data();if(!n.price)return console.error(`Error: Price is undefined for document with ID ${e.id}`),null;const r=await zI.refFromURL(n.img).getDownloadURL();return{id:e.id,product_name:n.product_name,color:n.color,price:parseFloat(n.price).toFixed(2),img:r,collection_name:t,material:n.material}})),r=(await Promise.all(e)).filter((e=>null!==e));n.push(...r)}const i=n.filter((e=>{const n=parseFloat(e.price),r=t.type?t.type[0]:null,i=t.material?t.material[0]:null,s=t.color?t.color[0]:null,o=t.price?t.price[0]:null,a=!r||e.collection_name===r,l=!i||e.material.includes(i),u=!s||e.color.includes(s);return a&&l&&u&&(!o||"<$50"===o&&n<50||"50-100"===o&&n>=50&&n<=100||"100-200"===o&&n>=100&&n<=200||"200-300"===o&&n>=200&&n<=300||">$300"===o&&n>300)}));r(i),o(!1)}catch(e){console.error("Error fetching items: ",e),o(!1)}})()}),[t]),(0,s.useEffect)((()=>{console.log("Filtered Items:",n)}),[n]),i)return(0,qI.jsx)("div",{className:"item_message",children:"Loading..."});if(0===n.length)return(0,qI.jsx)("div",{className:"item_message",children:"No items found"});function d(e){const t=parseFloat(e);if(isNaN(t))return e;return`$${t.toLocaleString("en-US",{minimumFractionDigits:2})}`}return(0,qI.jsxs)("main",{className:"items",children:[n.map((e=>(0,qI.jsxs)("div",{className:"item",style:{backgroundImage:`url(${e.img})`,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:[(0,qI.jsxs)("p",{className:"item_title",children:[e.collection_name,(0,qI.jsxs)("span",{style:{fontWeight:"700"},children:[" ",e.product_name]})]}),(0,qI.jsxs)("div",{className:"i_box",children:[(0,qI.jsx)("p",{className:"item_price",children:d(e.price)}),(0,qI.jsx)("button",{className:"item_basket",onClick:()=>(e=>{if(e){const t={id:e.id,quantity:1,product_name:e.product_name,color:e.color,price:e.price,img:e.img,collection_name:e.collection_name,material:e.material};BI.collection("ShoppingBag").doc(u).get().then((e=>{if(e.exists){const n=[...e.data().items||[],t];BI.collection("ShoppingBag").doc(u).set({items:n}).then((()=>{console.log("Item added to shopping bag in Firestore")}))}else BI.collection("ShoppingBag").doc(u).set({items:[t]}).then((()=>{console.log("New shopping bag created in Firestore")}))})).catch((e=>{console.error("Error accessing shopping bag:",e)})),h(!0),setTimeout((()=>{h(!1)}),2e3)}})(e)})]})]},e.id))),c&&(0,qI.jsx)("div",{className:"bag_overlay",children:(0,qI.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAhAAAABcCAYAAAA/BYy3AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABX3SURBVHgB7Z1fjBTHncerm2V2Nw+wfonu4WDXD8mdZDBYkXWSyS1LzokOIuMlEme/2EuUAHk4DMiwTxAcAy9hUSD4JdhSFnwPYFtmsSVj2Q4sRHDSnZMsBKSLncgD5OFkRWIWKdndGXY6/e2lZmtq++9Mz/RM9/cj9c6/2uqu6vrz7V/9qsoQCWJZVs/sbHGgXLZ6hTBW29/0WZbow2+GMfdKCCGEZJyC3Svm7T7SebWs8m3TFOMdHV0ThmEUREIYookogmHAFgrPUiQQQgghdZG3u/JxW1CcX7QoN95MQdEUAVEqTdmiwdhpC4YB+2OPIIQQQkgDMEYhJjo6OsdEg2mYgIC14cGD4k77dZegaCCEEEKaSd40zVdKpdnL3d3dedEAYhcQFA6EEEJIy5C3hzVGFy/u/ImImVgFxNTU1BbTNA7Qt4EQQghpKRyLREdH7pSIiVgEhC0c+hYtMn5pvx0QhBBCCGlJLMsYK5fLu+MY1jBFnRSL0ztt8fA7QfFACCGEtDSGYQ2iz37woDgk6qRmC8Scr8PMAcsSuwQhhBBC2o1juVzXblEjNQmIuSEL85wtI1YLQgghhLQpxsTsbHlTLUMakQUExINpGpfoKEkIIYSkgvzsrLUuqoiIJCAoHgghhJBUEllEhBYQFA+EEEJIqokkIkIJCIoHQgghJBOEFhGhpnHCYZLigRBCCEk9ziQJzLQMChgoIEql6Z9xtgUhhBCSFazVpdLMgaBQvkMYWJr64QqThBBCCMkQ5bLY3dXVdczrd08B8XB5aqwwyQ2xCCGEkOxRmJ21nvDyh/AcwjBNwx66oHgghBBCMkqP3yiEq4DA0IVhiEFBCCGEkCwz4LVvhusQxszM9BecdUEIIYQQm/zixZ1PGIZRUL9cYIGA5yXFAyGEEEIe0lcsTi/YOLPKAsEFowghhBDiQsG2QjyqWiF0C8QAxQMhhBCSLNevXxcnTrwmfvCDreKrX/0H8bWv/ZNImB7dClFlgaDvAyGEENJ8IBiuXPm1uHz5svNaKBQWhPnssz+Ivr5ekSCFXK7rEfmhYoGYmfnrIMUDIYQQ0jwOHjzkWBiefPJfxMsv7xHvvfe+Ix4gFPr7+6vCvv/+eyJheqampgbkh475701O2ySEEEKaCCwPqmCQBz7LYYuenh4nzMTEDZE0pmnutF/G8d4ZwrCsez2lUvc9QQghhJCmAnEAkaACywSO3t5eMTIyIjZv3uy8//zzP4iEqThTOgJibvhi0TlBCCGEkES5fft2xfrw9ttviWef3egMc0BotIAfBFaqHuzo6Dz/0AeCwxeEEEJI0kAkPP30d5z3O3b8pyMeQH//vzqvV65cEUlTLlvr8PpQQBhrBSGEEEISZc+evY4FAsMVR4+OVL5fu3aum758OXkBYfMs/pjwf+DsC0IIISRZ4PNw+vSbjj/Exx9/VPVbK1kgbPosy+oxSqWpAcsyLglCCCGEJML58++JzZv/w3kv/R50pB/El1/+/wKny2bj+EGUy87qk4QQQghJAAxZbN26zXm/f/8+V/EA4BNx48aNxMUDePDAetSYmZkaNQxjSLQgV69eq7xfvnyZWLZsmSDtyeTkfXHz5s3K5zVrnhL1ose5cuUKsWTJEtFqsBxHA/cU9xa0e35l+d7fvXtX3Llzt/I5jjqfRiAe4DSJVwgE1e+htTFGjWJxGsMXA6IFgblGsnfvHucg7cmZM2fFSy/trHyGCa5e0Dhv2vS9yuff/OZ/W7KBZjmOBu6p7HjbPb/Ue//znx8Xzz//nMgKqO+o9wD1EvWTVKOKh40bN4p33nlLtBHjWIkyeVtInUDlXrs2r/SzVElJtpicnBQXLnxY+bxhw/qWtLpI2u16CWkWqnh4/PHHxRtvnBRtRh8ERJ9oc2AqU59uKSBIWrl//35VWceTXSubhtvteglpBrp4+OSTj1rCryEqWAei7S0QhBBCSDuAdRywcVa7iwebPlMQQgghpOGcOPGa+Pa3v+NMxXzxxRfEp5/+T7uKBwcKCEIIIaSBQDC8/PJeZ7tugKmab7zxumh3OgRx0KccSVasWCGWLq3N6QtT0e7evVOZkga8xn/dzt/IseK406tPqQSIB/HVilv+NSLOeuL1iq+ectNovO59vXnbDNQpniDu+9asPIizvjQiLW5lpJXLdCuDIYsf/nCrM2QBa8PIyBHH+pAG2lZAHDky4hxuqFOnwFNPPSXGxt5dEA4V5OTJ18WZM2ccZy8v8P9wzPRyzlSnKMrpSr/4xUnn+vR48TvikVPT0Ijs2/fjqlkkEnirb9++LbZpbHGlVwUe9kir2/UDpDfq9WMKH/IuKM4oUzaD4pQ899xzYng4OO4weYm4Dh8+KOpFn66qon/vNV0OncvJkyede+V37/H/69f/u1Puap0SG8f16njVJxmHWqeCri3OchAVlBu0FX5lO860oA1Zv359qLSEKSMyX3BeOUUT14spqqQaWB0OHjxsD1uccD7D3+Gdd95OfCfNOMmsBQId9+Dg93wbUwkqKA6o8jAV20/cIA78BiWPjtrvGvA9wqLROXGivgqKONB44/xBhE2vXzolcoZM2CehKHGio4srTsnZs2fFhx9eEOfOvet5zWHLDuIK6qiaQZR7jzAQRhCGEN2tsK4G8tovH2WdQofq9qAgibscRAV5um/fft9yI9Mi899rymvYtOBcshz63c+wZUTGxcXQ/FGtDgALRGHYop39HdzIpIBAZRka+n5VRX7ssceclQxVUJnUleRkx79t2zbPuO/fn6xUbFR+NU6cV1ZQhFmyZGnlGlAhsVKdW1hUWgxn1DM9VW8c3NKrz9nHNULkuA2luDVgiLOnZ2nVdzL/dHOtG3iiiRKneq1R4kSa1LwG6r3Gkxjy6+LFXy1oKN3Kjn6fZTjEGabTbjT6vXe7XqCWObyi47506VeJrtugPg375TNAx4Z77SZ64y4HtXDhwoXKe72+A7WtQX158cUtroJITwvyBSLHLT79fnpZp8KUEbVMt0K5bkUgHLAhltzwClYHrCy5dm2/SCXF4rTVqoet1irH4cOHPMNdunSxKmxQvNu3bw8d95/+9Lm1cuXKStje3uXWX/7yZVWY06dPVcWHA+fQwyGu5cuXLwjrdn79vBs2bKg5H8fGztWcXrfz/vGPn1fFh/C4B2Hi87tHajjkk1+ca9asWRAnvveLE+9/+9tPPdP+2msnquIbHh6uq+zgtzD3OsqBNKrxeeWRV9lEmvRy6XfNzb5eHN/97oYF+eZ13XpZQP0MKlt+5dWtHOCe15p+PR0o1+fPj4Uu127XqeYP0uJW7r3uJ9qCMOXeq4wgrN6G/ehH7vmD79XrrDUP2+H4+OOPrP7+fsvuUp0DaT569EhbpaGWI5OzMNQngaDxRjwpqON7UOu//73/0zT+B0MO+pMbvsfYsorX+RF227atlc/1mMJv3bpVeY8n+qD0Bp1X/w5PSV4On4jPzxQr+eCDC1VPNYcOHfSN8/Tp0cA41ScwgHT7maORbjVvzp49syAMrEGSoLKD35JeNEm9XuTboUOv+uabfs1ynDtJYPHzuu65NM37mbg5J7qVA7/7opcDDGXEBa7Va+jNrVy7WdlU58bt27f6WkeQDtR5ybVr/70gDKw8EtQPvzKCvBke3ivInI8DpmViQShMzYTVAUMUGKr47LP/s4ctdoi0kzkBcfPmrSrzM5yCgkBjo1aoW7f8BURQB63id349bK1mQ1wP9p7AAZN0EHonq59XbdRgBg4y7+J3LGHshypKpCNZUJy6GPOLE0NPYYaAkB7JnHf7fNpVEzMIU3b27El2Hwf1mtHZhEFNF9Ifxk+oUczdZ//r1sUA6nj15/n6Gkc5qBXpnOzH3Eqdayqfr169uiAMhiFkffYbTpWoQxEYYlXBsKWaNvXhwQuEyfJy5BimwHTMr3/9n51XXTik0dfBi8z5QKDCqOjjhl4sXTrvr6BPl9IJ6ixV/J6EcM5WRG2EwjqYofH0e5pVO6mw483qk1Vw2HDXqZcHPO3J69E7kTDWhSQtEHpZD5sHev4jnqQ6DORfvf4H1b5O9ZeDWtmwIZzT77Jl/1h532jxpoutFSvC1SmIEl1QpxVYGiAaIBTefPO/nM8S+Da88MILYuPGZzIjGlQyvw7Ejh07Q4WL8gTSquocFR7WAwzh6OmRjlhRHTUbMS88iqgLC6xGcCILIsmn7bhJQ1ri9vZPshzAaToMYcs1BDkOWFj060VdhsCOXp9b86GlmeTzt8X169cdwXD9+o2KQ6QE0zAhGnCkaUpmLWReQLTCNLtmEDTtCw2QnL6ZRvMkrEZZudfEmzSUg6C1JABEBQ74wHD3U3cgFCYnC45IgGDAlMsrV35dZWEAsCysWvW4s932M888k3nRoMKVKDNA2OmRcA6FkEjTUzghaWP//v1V4sFtymWhMFlxnk57fYYQUJFrL6ivEAXIE7zHgWE5XShIpGDo7+93DrzP4vBEGDIvIOCQlPZFUVQvazkrwivNmA2xf/+PUzfP22s1UpIt2r0cwGdBdWKGg7SX0zbqsNvDQ7NQt26Pq43N5bpEXEAU9Pb2OgJh1apV9tDp3HtaGMJDC0QGUKdxBi0BDQdQjIN6LUWsE+RQKmmEIGkHkaM7MiZJK11LUiSZB/oMCC/Ua9SHH/QZJUEzvvC7FBJu1OrzEDSVHcS1BH8QeocPUaC/QiwgrXg/93kprQox0GFZIm8Yok9khForDMYc5fzrsPtEtCJhngSCOmbVGQyb+IQhynoCYRonEGYlSklYsYHGGytNSrCeh8wzvTFHnEH5GeUa40a/tj//OVwe6HmVJse6sOZ8v3JQKx988GGoaZeq4PfL+7BOmX5lX53xAeBoHdS2IUxSwyLF4rQgLUMhletARKkwYTo2CAeES4OTYdATGCwKQSZPNQ+RH0GNCYZQgjpwdUomGtCgKWJyNon/dc43+Pqy5H7xyvuMQ23A9XHmoLKDctNo83HQ/VSnkaIDC4O++FSc5T0JC4C6pkMc5aBWEE/QuVFm1DB+06TDWDRQRv3OiXSp9QT7oPiB9kFuHBgG5HeYZexJW5I3betDXrQ5+txldFhepnVUGLVRRQOPHei8QDxbtny/6ju3fQRambANhNua+G5gdz/1fzAtzut/cC/gUxGE/tSDRsorTjSIO3a8JILAin9q5+cXp4xX7fDR8aj/r47pApQbLxGBjgDlJu5hFr1DHxk56nsOtfOUe0V4gXuJzZ5qWXwqruttBPpCcPWWg3rAub06dFlmVPT8V+sy7pefOMBvuJ9BqHUPnf3Q0BbX/JG7rIa9f8jDb3zjSfGtbz3tHHTOTh0FewjDum3YKqKdkaJAViZ0kjhkZcNv6nLUBw++6hRoCbbTPnPmrQVCBE9Lurku6jbSrQAaCNkgohNBpdY7bDQKcKBEWpE+v0YC+anmNxqddev+bcGGPuoSwmiA/RoQ3EOscCcFDv4P16lveAQnMvlEEyZOLLsrG1GvOAEab31anNsYLlaWvHp1zj9EPo1BROgboekra8bZaeLeyXxCXiBNskxKJ1kJ8hTXp27ihs8o6+pTtVtZn1sR9HlRL1Gut1HEXQ5qAeUV50YnrJ/bLf8x3KG3NXJhLXk/EReEsmqpkMt5y3QE1ROUEdR9OXQyZ92rb+gN6VFFGK4H52jXoV/ihpGHgJiwBcSQaHMgCvQtlmUlU9eOB6hsEBSqKU7Om/YDS/w2yzEoTvQGQm4Z7AYam1OnflklsNwYHZ0LI/N4fh2JhWGlM1eQ6RP7BCA+tfHyixP3MMjZE2m/c+dOleXFK87qa3nVdRVJfIe0qPnnFx/Cyq3R4wJLeCOP1Di94odIQAetWonC7KYYdg+TuK+3UaAc6J1aPeWgFoaH99gWudedtAedGwID4d1A/VTbOr8OX+6m62d5QhnBHhx+lkQVWab9rB9ugoXrUaQLyyrftocwrLxIARAF2OcBCjfMEscIhymcYdfFR2cFR6p2BA0E8ibIeoJ0IlyY5akRJ/IvKE48RSHOsFabU6dGnbwOuk50bmFXrIQwQZxhygXiPnfuXV9nN6QZYfziQx4iTCMEp+zc0TGHSZMMj7IedB/QyOOao9yzKOePsvx43CBdcZaDqGAZbeSDOgSoI/PfT7zJts5P2KjxhAH3CPUZ+aMP+cj4ZJ6EKdP6cB8+t9vQL/GnXBbjhmXd6ymVuu+JjOOlplHo06acYWnRfUTqTWe7xIknI7dZHpgSt3z58shx44lNt3AhrrB7hCSBW74CCLK0r4kiibscRMWt3NSS/27paEYaYPmTbSaEoTpErCKHMTE9nBaIdLF4cecjjvPDzMz0F1maykkIIaR24EMihzv8FrMiqSWfy3U96kzjNIzyeUEIISRzwCIF/wd5BM2WgOVE9ZVIcliKJIUxjr+OgLAsa1wQQgjJHBg2Ude8+OlPj3iGhXhQHZfxv9/85hpBsoVpijG8OkMYD/0gvrDfcm1PQgjJGKpPA9CdICVyqreEwxfZxPF/MIxCZQGIUmnmnG2JGBSEEEIyBaa4qtOyw4Bp7e06M43UgzGay3U6K55VlrJ+8KDMkkAIIRkE07IvXvzEmVERNFsCv2N9DIqHbCKHL0DVEpTF4jSmc3IYgxBCMozXtPYsTfUlrjizL+SHKgExMzP1ij2ucUAQQgghhCiYprmloyN3qvJZ/TGXmz5mvxQEIYQQQsg8+VJp9rL6RZWAMIxHCpZlcWCLEEIIIRVsbXCqu7s7r35nLAx0r6dY7P4dV6YkhBBCiNB8HySm/gWsEOWy9RNBCCGEkMxjmuYrbt8bXv9QLE5fsl8GBCGEEEIyiWUZY52dnZvcfjO9/ml21sJCEXSoJIQQQrKJPSJR3u31o6eAgLNEuSw4lEEIIYRkEHvoYpfuOFn1u98/d3V1HROCK1QSQgghGeO4uuaDG4YI4OFGW/CHWC0IIYQQknKMiVyu84mgUGZgNMYjhdlZa5NlibwghBBCSJrJz86WN4UJGGiBkExNTfWZpnGJ60MQQgghqcQWD9Y6P78HldACAlBEEEIIIakkkngAkQQEoIgghBBCUkVk8QACfSB05qZ3WuvstxOCEEIIIW2MMVGLeACRBQTAiXK5ric4xZMQQghpW44vXpyrSTyAmgSEJJf7yi6uWEkIIYS0FYVyWey2DQG7DMOouf+O7APhBvwiOjrMn1mWNSgIIYQQ0qqM48G/VquDSiwCQmILiS2maRyggyUhhBDSUuSxq2bQ6pJRiFVASGZmpl6xox6ikCCEEEISpWCPDhy3hyuO1TNc4UZDBATAsIb9MkCLBCGEENJ0GiYcJA0TECozM38dFMIctBMxJAghhBDSCGzRYIyXy+Xj3d3d46LBNEVASGw11FMs/m0AYsI+9VpaJgghhJDawT5Vdl963rJmx3O5r4w3ytrgRlMFhA4ExfT09GrTFAOGYfba3/TZX/fYh3wlhBBCMo3czNIWCvarYR/WhC0YbjdbMOj8HS9yUvvA9OYtAAAAAElFTkSuQmCC",alt:"arrow"})})]})}function QS(){window.scrollTo(0,0);const{filters:e}=(0,s.useContext)(GI);return(0,qI.jsxs)("div",{className:"catalog",children:[(0,qI.jsx)(FS,{priceRanges:["<$50","50-100","100-200","200-300",">$300"]}),(0,qI.jsx)(WS,{filters:e})]})}function JS(){return window.scrollTo(0,0),(0,qI.jsx)("div",{className:"content",children:(0,qI.jsxs)("div",{className:"delmain",children:[(0,qI.jsx)("h2",{children:"Delivery"}),(0,qI.jsxs)("div",{className:"del_box",children:[(0,qI.jsxs)("div",{className:"del_box2",children:[(0,qI.jsx)("p",{className:"del_tit",children:"Delivery in Ukraine"}),(0,qI.jsxs)("div",{className:"boxd1",children:[(0,qI.jsx)("p",{className:"del_tit2",children:"Courier Services:"}),(0,qI.jsx)("p",{className:"del_text",children:"We offer fast and reliable delivery services within Ukraine through our trusted courier partners. Enjoy the convenience of having your order delivered right to your doorstep."})]}),(0,qI.jsxs)("div",{className:"boxd1",children:[(0,qI.jsx)("p",{className:"del_tit2",children:"Delivery Time:"}),(0,qI.jsx)("p",{className:"del_text",children:"Expect your package to arrive within 2-5 business days from the date of order confirmation. Our team works diligently to ensure swift processing and dispatch."})]}),(0,qI.jsxs)("div",{className:"boxd1",children:[(0,qI.jsx)("p",{className:"del_tit2",children:"Shipping Costs:"}),(0,qI.jsx)("p",{className:"del_text",children:"We provide transparent shipping costs, which are calculated based on your location and the weight of your order. The exact shipping fee will be displayed at the checkout before you finalize your purchase."})]}),(0,qI.jsxs)("div",{className:"boxd1",children:[(0,qI.jsx)("p",{className:"del_tit2",children:"Tracking Your Order:"}),(0,qI.jsx)("p",{className:"del_text",children:"Upon dispatch of your order, you will receive a tracking number, allowing you to monitor the status of your shipment. Follow the journey of your product from our store to your doorstep."})]})]}),(0,qI.jsxs)("div",{className:"del_box2",children:[(0,qI.jsx)("p",{className:"del_tit",children:"International Shipping"}),(0,qI.jsxs)("div",{className:"boxd1",children:[(0,qI.jsx)("p",{className:"del_tit2",children:"Destinations:"}),(0,qI.jsx)("p",{className:"del_text",children:"We proudly ship our products to various countries around the world. To check if we deliver to your location, please enter your address during the checkout process."})]}),(0,qI.jsxs)("div",{className:"boxd1",children:[(0,qI.jsx)("p",{className:"del_tit2",children:"International Courier Partners:"}),(0,qI.jsx)("p",{className:"del_text",children:"For our international customers, we collaborate with reputable courier services to ensure secure and timely delivery. We understand the importance of a smooth shipping process for our global clientele."})]}),(0,qI.jsxs)("div",{className:"boxd1",children:[(0,qI.jsx)("p",{className:"del_tit2",children:"Shipping Duration:"}),(0,qI.jsx)("p",{className:"del_text",children:"Delivery times for international orders may vary depending on your location and the shipping method chosen. Typically, you can expect your package to arrive within 7-14 business days. Please note that customs processing may extend delivery times."})]}),(0,qI.jsxs)("div",{className:"boxd1",children:[(0,qI.jsx)("p",{className:"del_tit2",children:"Tracking Your Order:"}),(0,qI.jsx)("p",{className:"del_text",children:"Once your order is dispatched, you will receive a tracking number to monitor the status of your shipment. Stay informed about the journey of your purchase from our store to your doorstep."})]})]})]}),(0,qI.jsxs)("div",{className:"buttons_box",children:[(0,qI.jsx)("a",{href:"https://novaposhta.ua/delivery",target:"_blank",rel:"noreferrer",style:{width:"100%"},children:(0,qI.jsx)("button",{className:"see_more",style:{width:"100%"},children:"\u0421alculate the cost of delivery"})}),(0,qI.jsx)("a",{href:"https://novaposhta.ua/calculatorinternational",target:"_blank",rel:"noreferrer",style:{width:"100%"},children:(0,qI.jsx)("button",{className:"see_more",style:{width:"100%"},children:"\u0421alculate the cost of international shipping"})})]}),(0,qI.jsx)("p",{className:"thanks",children:"Thank you for shopping with us!"})]})})}const YS=function(e,t){return se({basename:null==t?void 0:t.basename,future:ft({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:(n={window:null==t?void 0:t.window},void 0===n&&(n={}),y((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return m("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:g(t)}),null,n)),hydrationData:(null==t?void 0:t.hydrationData)||vt(),routes:e,mapRouteProperties:dt,window:null==t?void 0:t.window}).initialize();var n}([{path:"/",element:(0,qI.jsx)(US,{}),children:[{element:(0,qI.jsx)(mS,{}),path:"/Cedre"},{element:(0,qI.jsx)(QS,{}),path:"/catalog"},{element:(0,qI.jsx)(JS,{}),path:"/delivery"}]}]);class XS extends s.Component{render(){return(0,qI.jsx)(HI,{children:(0,qI.jsx)(Tt,{router:YS})})}}const ZS=XS;a.createRoot(document.getElementById("root")).render((0,qI.jsx)(s.StrictMode,{children:(0,qI.jsx)(ZS,{})}))})();
//# sourceMappingURL=main.046ff0ec.js.map